import{j as d}from"./index-CM8xp5W3.js";import{p as j,n as x,c as C,x as k}from"./index-ucXmJ9nZ.js";import{r as v}from"./react-vendor-C7qxa2PD.js";import{c as H,C as I}from"./antd-DPo7ARJh.js";import{R,b as L,I as S}from"./index-CHtwY3KI.js";import{L as N,a as r,I as g,b as A}from"./Line-imV8v0Iz.js";import"./monaco-editor-DFCLNRsn.js";import"./ahooks-CSAi6c6A.js";import"./lodash-es-CdGItEyc.js";const T="_editSeriesList_c1zv3_59",q={editSeriesList:T},D="_tabsHead_1q8na_59",w="_tabsHead_add_1q8na_64",E="_tabsHead_body_1q8na_72",P="_tabsHead_body_inner_1q8na_85",U="_tabsHead_item_1q8na_90",B="_tabsHead_item_selected_1q8na_102",F="_tabsHead_item_delete_1q8na_107",m={tabsHead:D,tabsHead_add:w,tabsHead_body:E,tabsHead_body_inner:P,tabsHead_item:U,tabsHead_item_selected:B,tabsHead_item_delete:F};function K(e){var l,i;const a=v.useRef(null);function _(n){const f=n.getBoundingClientRect(),b=a.current.getBoundingClientRect();return L({x1:f.x,y1:f.y,x2:f.right,y2:f.bottom},{x1:b.x,y1:b.y,x2:b.right,y2:b.bottom})}function o(n){_(n)||a.current.scrollTo({left:n.offsetLeft-20,behavior:"smooth"})}return d.jsxs("div",{style:e==null?void 0:e.style,className:m.tabsHead,children:[d.jsx("div",{className:m.tabsHead_body,ref:a,children:d.jsx("div",{className:m.tabsHead_body_inner,children:(i=(l=e==null?void 0:e.items)==null?void 0:l.map)==null?void 0:i.call(l,(n,f)=>{const b=(n==null?void 0:n.value)===(e==null?void 0:e.value);return d.jsxs("div",{className:H(m.tabsHead_item,b&&m.tabsHead_item_selected),onClick:y=>{var t;b||(o(y.target),(t=e==null?void 0:e.onChange)==null||t.call(e,n==null?void 0:n.value))},children:[n==null?void 0:n.label,d.jsx(R,{className:H(m.tabsHead_item_delete,"icon_clickable"),onClick:y=>{var t;y.stopPropagation(),(t=e==null?void 0:e.onDelete)==null||t.call(e,n.value)}})]},(n==null?void 0:n.value)||f)})})}),(e==null?void 0:e.showAdd)&&d.jsx("div",{className:m.tabsHead_add,onClick:e==null?void 0:e.onAdd,children:d.jsx(j,{})})]})}function O(e){const{value:a,onChange:_}=e;function o(l){_==null||_({...a,...l})}return d.jsx(N,{labelSpan:6,children:d.jsxs(I,{direction:"vertical",style:{width:"100%",padding:12},children:[d.jsx(r,{label:"名称",children:d.jsx(g,{value:a==null?void 0:a.name,onChange:l=>o({name:l})})}),d.jsx(r,{label:"字段",children:d.jsx(g,{value:a==null?void 0:a.value,onChange:l=>o({value:l})})}),d.jsx(r,{label:"颜色",children:d.jsx(A,{value:a==null?void 0:a.color,onChange:l=>o({color:l})})})]})})}function $(e){const{value:a=[]}=e,[_,o,l]=x(""),i=v.useMemo(()=>{var s,u;const t=((u=(s=e==null?void 0:e.value)==null?void 0:s.map)==null?void 0:u.call(s,c=>({label:c.name||"",value:c.key||(c==null?void 0:c.value)||"",data:c})))||[];return t.length&&(t.some(h=>h.value===l.current)||o(t[0].value)),t},[e==null?void 0:e.value]),n=v.useMemo(()=>{var t,s;return(s=(t=i==null?void 0:i.find)==null?void 0:t.call(i,u=>(u==null?void 0:u.value)===_))==null?void 0:s.data},[i,_]);function f(){var t;(t=e==null?void 0:e.onChange)==null||t.call(e,[...a,{key:C(4),name:`数据${a.length+1}`,value:void 0,color:"white"}])}function b(t){var u;const s=i==null?void 0:i.reduce((c,h)=>(h.value!==t&&c.push(h.data),c),[]);(u=e==null?void 0:e.onChange)==null||u.call(e,s)}function y(t){var s,u;(s=a==null?void 0:a.some)==null||s.call(a,c=>{const h=c.key===t.key;return h&&Object.assign(c,t),h}),(u=e==null?void 0:e.onChange)==null||u.call(e,[...a])}return d.jsxs("div",{className:q.editSeriesList,children:[d.jsx(K,{showAdd:!0,showDelete:!0,value:_,items:i,onChange:o,onAdd:f,onDelete:t=>{b(t)}}),!n&&d.jsx(S,{}),n&&d.jsx(O,{value:n,onChange:t=>{y(t)}})]})}const M={seriesList:[{key:"1",name:"数据1",value:"value1",color:"#f8e71c"},{key:"2",name:"数据2",value:"value2",color:"#7ed321"},{key:"3",name:"数据3",value:"value3",color:"#1071e0"}]},p=k([{key:"background",label:"背景",component:"colorPicker",options:{reset:!0}},d.jsx("b",{style:{marginTop:16},children:"数据配置"},"data"),{key:"nameCode",label:"字段",labelTip:"x轴标签名称映射字段",component:"input"},{key:"seriesList",label:"映射",labelTip:"图表的数据映射",component:({value:e,onChange:a})=>d.jsx("div",{style:{border:"1px solid #e8e8e8"},children:d.jsx($,{value:e,onChange:a})})}],M);export{M as DEFAULT_OPTIONS,p as default};
