var yi=Object.defineProperty;var xi=(e,n,t)=>n in e?yi(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var $e=(e,n,t)=>xi(e,typeof n!="symbol"?n+"":n,t);import{a as Bn,j as i,L as bi,b as wi}from"./index-CM8xp5W3.js";import{r as E,d as ki,g as ji,c as Le,R as Ln}from"./react-vendor-C7qxa2PD.js";import{g as le,A as Ci,j as Si,k as Ii,l as Ei,m as Ai,n as zi,o as Ni,p as Oi,q as Ri,L as Bi,R as Li,V as Di,h as oe,T as ke,c as je,r as Ve,s as tn,S as Ti,C as ue,t as ct,B as Ie,I as Mi,v as gn,F as _e,M as qe,x as At,y as Pi,z as Kt,G as Se,H as xt,J as Dn,K as Fi,N as vn}from"./antd-DPo7ARJh.js";import{R as ie,I as ce,u as re,E as Ui,a as $i,b as pi,c as nn,d as Hi,e as Fe,f as Tn,h as Je,i as rn,g as Gt,j as mt,l as zt,k as yn,m as Mn,n as Wi,o as xn,p as an,q as Nt,r as Vi,t as Zi}from"./index-ucXmJ9nZ.js";import{u as bt,i as wt,a as sn,b as Pn,c as Fn,g as Ke,d as Ki,e as Gi,f as qi,h as Ji,j as Un,s as bn,P as Yi,k as Xi,l as Qi}from"./index-VavuTpL6.js";import{I as Ue,L as kt,a as be,C as er,b as Ot}from"./Line-imV8v0Iz.js";import{I as on,R as Pe,u as Ye,a as tr}from"./IInputNumber-BDKZcotc.js";import{R as nr,I as Ee,i as ir,a as rr}from"./index-CHtwY3KI.js";import{h as qt,u as ar}from"./hotkeys.esm-C5d8raBv.js";import{l as sr,u as ln,j as $n,k as pn}from"./ahooks-CSAi6c6A.js";import{_ as wn,e as or}from"./monaco-editor-DFCLNRsn.js";import{s as lr}from"./driver-ldxPtC2B.js";import{c as Hn,d as cr,g as dr,t as Wn}from"./lodash-es-CdGItEyc.js";import{u as Vn}from"./useEffectOnce-BgFV88FQ.js";import{u as ur,s as Rt}from"./selectPage-CK-ACE0F.js";import{u as Zn}from"./useListenRef-BncaX_Rk.js";import{I as dt}from"./index-BdlHiGVB.js";import"./driver.js-P8JfiGj7.js";async function Kn(e){return new Promise(n=>{let t=document.createElement("input");t.type="file",e!=null&&e.accept&&(t.accept=e.accept),t.onchange=a=>{var o,s;const l=(s=(o=a.target)==null?void 0:o.files)==null?void 0:s[0];if(!l)return console.warn("file must be selected."),n(void 0);n(l)},t.click()})}async function hr(e){return Kn(e).then(n=>Gn(n))}async function Gn(e){return new Promise(n=>{if(!e)return"";const t=new FileReader;t.onload=function(){const a=this.result||"";n(a)},t.readAsText(e)})}function Jt(e,n,t){var l,o;let a=(l=e==null?void 0:e.dataset)==null?void 0:l[n];if(!t)return a;for(;a==null&&e;)e=e.parentElement,a=(o=e==null?void 0:e.dataset)==null?void 0:o[n];return a}function fr(e){var a;const n=ie.getActiveEngine();if(!n)return[];const t=(a=n.component.getPackage(e))==null?void 0:a.components;return n.componentNode.getAll().filter(l=>{var o;return(o=t==null?void 0:t.find)==null?void 0:o.call(t,s=>s.cId===l.cId)})}var mr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},_r=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:mr}))},gr=E.forwardRef(_r),vr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"},yr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:vr}))},xr=E.forwardRef(yr),br={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},wr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:br}))},Yt=E.forwardRef(wr),kr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Ci}))},jr=E.forwardRef(kr),Cr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Si}))},Sr=E.forwardRef(Cr),Ir={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},Er=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Ir}))},Xt=E.forwardRef(Er),Ar={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]},name:"bank",theme:"outlined"},zr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Ar}))},Nr=E.forwardRef(zr),Or=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Ii}))},Rr=E.forwardRef(Or),Br={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M856 376H648V168c0-8.8-7.2-16-16-16H168c-8.8 0-16 7.2-16 16v464c0 8.8 7.2 16 16 16h208v208c0 8.8 7.2 16 16 16h464c8.8 0 16-7.2 16-16V392c0-8.8-7.2-16-16-16zm-480 16v188H220V220h360v156H392c-8.8 0-16 7.2-16 16zm204 52v136H444V444h136zm224 360H444V648h188c8.8 0 16-7.2 16-16V444h156v360z"}}]},name:"block",theme:"outlined"},Lr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Br}))},Dr=E.forwardRef(Lr),Tr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 808H152c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-720-94h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0-498h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0 332h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0-166h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm166 166h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0-332h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm332 0h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0 332h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm222-72h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-388 72h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm388-404h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-388 72h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm388 426h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-388 72h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm388-404h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-388 72h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8z"}}]},name:"border-bottom",theme:"outlined"},Mr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Tr}))},Pr=E.forwardRef(Mr),Fr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM484 366h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM302 548h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm364 0h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-182 0h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0 182h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8z"}}]},name:"border-outer",theme:"outlined"},Ur=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Fr}))},$r=E.forwardRef(Ur),pr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},Hr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:pr}))},qn=E.forwardRef(Hr),Wr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Ei}))},Vr=E.forwardRef(Wr),Zr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832.6 191.4c-84.6-84.6-221.5-84.6-306 0l-96.9 96.9 51 51 96.9-96.9c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204l-96.9 96.9 51.1 51.1 96.9-96.9c84.4-84.6 84.4-221.5-.1-306.1zM446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l96.9-96.9-51.1-51.1-96.9 96.9c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l96.9-96.9-51-51-96.8 97zM260.3 209.4a8.03 8.03 0 00-11.3 0L209.4 249a8.03 8.03 0 000 11.3l554.4 554.4c3.1 3.1 8.2 3.1 11.3 0l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3L260.3 209.4z"}}]},name:"disconnect",theme:"outlined"},Kr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Zr}))},Gr=E.forwardRef(Kr),qr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Ai}))},Jr=E.forwardRef(qr),Yr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:zi}))},Xr=E.forwardRef(Yr),Qr=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Ni}))},ea=E.forwardRef(Qr),ta=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Oi}))},na=E.forwardRef(ta),ia=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Ri}))},ra=E.forwardRef(ia),aa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},sa=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:aa}))},oa=E.forwardRef(sa),la={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"filled"},ca=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:la}))},da=E.forwardRef(ca),ua={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"},ha=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:ua}))},fa=E.forwardRef(ha),ma=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Bi}))},Jn=E.forwardRef(ma),_a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},ga=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:_a}))},Yn=E.forwardRef(ga),va={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},ya=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:va}))},xa=E.forwardRef(ya),ba=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Li}))},wa=E.forwardRef(ba),ka={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},ja=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:ka}))},Xn=E.forwardRef(ja),Ca={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},Sa=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Ca}))},cn=E.forwardRef(Sa),Ia={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M140 188h584v164h76V144c0-17.7-14.3-32-32-32H96c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h544v-76H140V188z"}},{tag:"path",attrs:{d:"M414.3 256h-60.6c-3.4 0-6.4 2.2-7.6 5.4L219 629.4c-.3.8-.4 1.7-.4 2.6 0 4.4 3.6 8 8 8h55.1c3.4 0 6.4-2.2 7.6-5.4L322 540h196.2L422 261.4a8.42 8.42 0 00-7.7-5.4zm12.4 228h-85.5L384 360.2 426.7 484zM936 528H800v-93c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v93H592c-13.3 0-24 10.7-24 24v176c0 13.3 10.7 24 24 24h136v152c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V752h136c13.3 0 24-10.7 24-24V552c0-13.3-10.7-24-24-24zM728 680h-88v-80h88v80zm160 0h-88v-80h88v80z"}}]},name:"translation",theme:"outlined"},Ea=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Ia}))},Aa=E.forwardRef(Ea),za={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"},Na=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:za}))},Oa=E.forwardRef(Na),Ra={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},Ba=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Ra}))},La=E.forwardRef(Ba),Da={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z"}}]},name:"vertical-align-bottom",theme:"outlined"},Ta=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Da}))},Qn=E.forwardRef(Ta),Ma=function(n,t){return E.createElement(ce,le({},n,{ref:t,icon:Di}))},Pa=E.forwardRef(Ma);function Fa(e,n){const t=E.useRef(),a=E.useRef(null),l=E.useRef(),{engine:o}=re();return l.current=n,E.useEffect(()=>()=>{var s;(s=t.current)==null||s.call(t)},[]),E.useMemo(()=>{let s=document.createElement("div");document.body.appendChild(s);let r=Bn(s);return r.render(i.jsx(Ui.Provider,{value:{engine:o},children:i.jsx($i,{ref:a,component:e,onCancel:(...c)=>{var d,m;(m=(d=l.current)==null?void 0:d.onCancel)==null||m.call(d,...c)},onOk:(...c)=>{var d,m;(m=(d=l.current)==null?void 0:d.onOk)==null||m.call(d,...c)}})})),t.current=()=>{s&&(r.unmount(),s.remove(),s=void 0)},{open(c){var d,m;(m=(d=a.current)==null?void 0:d.open)==null||m.call(d,c)},close(c=!0){var d,m;(m=(d=a.current)==null?void 0:d.close)==null||m.call(d,c)}}},[])}function Xe(e){return function(n){return Fa(e,n)}}function Ua(){const e=pi(n=>n.componentMap);return E.useMemo(()=>e?Object.values(e):[],[e])}function dn(){const{engine:e}=re(),[n,t]=E.useState(()=>e.instance.getAllSelected());return E.useEffect(()=>e.instance.onSelectedChange(a=>{const l=Object.values(a);t(o=>!l.length&&!o.length?o:l)}),[]),n}function $a(){const{engine:e}=re(),[n,t]=E.useState([]);return Vn(()=>(t(e.favorites.getAll()),e.favorites.onChange(a=>{t([...a])}))),n}function ei(){const{engine:e}=re(),[n,t]=E.useState(()=>e.history.getHistoryData());return E.useEffect(()=>{e.history.onChange(a=>{t(a)})},[]),n}const pa=`/**
 * 转换request扩展参数函数 (必须包含主函数main)
 *
 * @params {value} 默认携带参数或json对象
 * @params {origin} 源componentNode
 * @params {target} 目标componentNode
 * @params {option} 事件的最小配置 event.target.opt.option
 * @return {value} 返回修改后的额外查询参数
 */
function main(value, {origin, target, option}) {
  return value
}`,Ha=`/**
 * 修改目标componentNode (必须包含主函数main)
 *
 * @params {target} 目标componentNode
 * @params {origin} 源componentNode
 * @params {payload} 触发事件源组件发送参数
 * @return {target} 返回修改后的目标componentNode
 */
function main(target, origin, payload) {
  return target
}`,Ge={componentNodeId:"rid",dragDirection:"d_dir"};function Wa(e){const n=[];return Object.entries(e).forEach(([t,a])=>{qt(t,a),n.push(()=>qt.unbind(t,a))}),()=>n.forEach(t=>t())}function Va(e){E.useEffect(()=>Wa(e),[])}function Qt(){const e=ie.getActiveEngine();e&&(e.componentNode.delete(Ct()),fe("删除选中组件"))}function ti(){const e=ie.getActiveEngine();e&&(e.instance.selectAll(),fe("全选组件"))}function Za(){const e=ie.getActiveEngine();e&&(e.instance.getAllSelected().forEach(n=>{const t=e.componentNode.get(n.id);t&&e.componentNode.update(n.id,{x:((t==null?void 0:t.x)||0)-1})}),fe("组件左移"))}function Ka(){const e=ie.getActiveEngine();e&&(e.instance.getAllSelected().forEach(n=>{const t=e.componentNode.get(n.id);t&&e.componentNode.update(n.id,{x:((t==null?void 0:t.x)||0)+1})}),fe("组件右移动"))}function Ga(){const e=ie.getActiveEngine();e&&(e.instance.getAllSelected().forEach(n=>{const t=e.componentNode.get(n.id);t&&e.componentNode.update(n.id,{y:((t==null?void 0:t.y)||0)-1})}),fe("组件上移"))}function qa(){const e=ie.getActiveEngine();e&&(e.instance.getAllSelected().forEach(n=>{const t=e.componentNode.get(n.id);t&&e.componentNode.update(n.id,{y:((t==null?void 0:t.y)||0)+1})}),fe("组件下移"))}function ni(){const e=ie.getActiveEngine();if(!e)return;const n=Ct(),t=new Set(e.instance.getAllSelected().map(o=>o.id)),a=[],l=e.componentNode.cloneComponentNodes(n,{onClone(o,s){t.has(o.id)&&(t.delete(o.id),a.push(s.id)),s.x+=10,s.y+=10}});e.componentNode.add(l),setTimeout(()=>{e.instance.select(a,!0),fe("复制组件")})}function Ja(){var n,t;const e=ie.getActiveEngine();(t=(n=e==null?void 0:e.componentNode)==null?void 0:n.clear)==null||t.call(n)}function un(e){const n=ie.getActiveEngine();n&&(n.getJSON().then(t=>{localStorage.setItem("json",JSON.stringify(t))}),oe.success("保存成功"))}function jt(){const e=ie.getActiveEngine();e&&e.instance.getAllSelected().length&&(e.instance.unselectAll(),fe("取消全选组件"))}function Ya(){const e=ie.getActiveEngine();if(!e)return;e.instance.getAllSelected().forEach(t=>{e.componentNode.get(t.id)&&e.componentNode.update(t.id,{lock:!0})}),e.instance.unselectAll()}function Xa(){const e=ie.getActiveEngine();if(!e)return;e.instance.getAllSelected().forEach(t=>{e.componentNode.get(t.id)&&e.componentNode.update(t.id,{lock:!1})})}function Qa(){const e=ie.getActiveEngine();if(!e)return;const n=e.instance.getAllSelected();if(n.length<2)return;const t=n.map(a=>{const l=a.getComponentNode();return l.groupId&&(e.componentNode.unlinkFromGroup(l.groupId,l.id),l.groupId=void 0),l});e.componentNode.createGroup(t)}function es(){const e=ie.getActiveEngine();if(!e)return;const n=e.instance.getAllSelected(),t=Array.from(n.reduce((a,l)=>{const o=l.getComponentNode();return o.groupId&&a.add(o.groupId),a},new Set));e.componentNode.unlinkGroup(t),e.instance.unselectAll()}function ts(){const e=ie.getActiveEngine();if(!e)return;const n=e.componentNode.getMaxLevel();e.instance.getAllSelected().forEach(t=>{e.componentNode.get(t.id)&&e.componentNode.update(t.id,{level:n})})}function ns(){const e=ie.getActiveEngine();if(!e)return;const n=e.componentNode.getMinLevel();e.instance.getAllSelected().forEach(t=>{e.componentNode.get(t.id)&&e.componentNode.update(t.id,{level:n})})}function is(){const e=ie.getActiveEngine();if(!e)return;const n=e.componentNode.getMaxLevel();e.instance.getAllSelected().forEach(t=>{const a=e.componentNode.get(t.id);a&&e.componentNode.update(t.id,{level:Math.min(n,((a==null?void 0:a.level)||0)+1)})})}function rs(){const e=ie.getActiveEngine();if(!e)return;const n=e.componentNode.getMinLevel();e.instance.getAllSelected().forEach(t=>{const a=e.componentNode.get(t.id);a&&e.componentNode.update(t.id,{level:Math.max(n,((a==null?void 0:a.level)||0)-1)})})}function as(){const e=ie.getActiveEngine();if(!e)return;const n=Ct();if(!n.length){oe.warn("收藏组件不能为空");return}const t=nn(),a=e.favorites.getAll().length;e.favorites.add({id:t,name:`收藏${a+1}`,children:n,gmtCreate:sr().format("YYYY-MM-DD HH:mm:ss")})}function Ct(){const e=ie.getActiveEngine();if(!e)return[];const n=e.instance.getAllSelected();return ss(n.map(t=>t.id))}function ss(e){const n=ie.getActiveEngine();if(!n)return[];const t=Array.isArray(e)?e:[e];return Object.values(t.reduce((a,l)=>{var s;const o=n.componentNode.get(l);return o&&(a[o.id]=o,(s=o==null?void 0:o.panels)!=null&&s.length&&n.componentNode.getPanelComponentNodes(o,!0).forEach(r=>{a[r.id]=r})),a},{}))}function fe(e){setTimeout(async()=>{const n=ie.getActiveEngine();if(n){const t=await n.getJSON(),a=Hn(t);n.history.add(a,e)}})}function hn(){const e=ie.getActiveEngine();if(!e)return;const{data:n}=e.history.goBack()||{};n&&(n.config.currentMenu=e.config.getConfig().currentMenu,e.loadJSON(n))}function en(){const e=ie.getActiveEngine();if(!e)return;const{data:n}=e.history.goForward()||{};n&&(n.config.currentMenu=e.config.getConfig().currentMenu,e.loadJSON(n))}function os(e){const n=ie.getActiveEngine();if(!n)return;const{data:t}=n.history.go(e)||{};t&&(t.config.currentMenu=n.config.getConfig().currentMenu,n.instance.unselectAll(),n.loadJSON(t))}function St(e){return qt[e]}function ls(){Va({backspace:()=>{Qt()},delete:()=>{Qt()},"Shift + A":()=>{ti()},left:e=>{e.preventDefault(),Za()},right:e=>{e.preventDefault(),Ka()},up:e=>{e.preventDefault(),Ga()},down:e=>{e.preventDefault(),qa()},"Shift + C":()=>ni(),"Shift + S":()=>un(),"Shift + R":()=>jt(),"Shift + Z":()=>hn(),"Shift + Command + Z":()=>en(),"Shift + Ctrl + Z":()=>en()})}const cs="_page_1ijjl_59",ds="_page_header_1ijjl_69",us="_page_body_1ijjl_74",hs="_page_body_left_1ijjl_79",fs="_page_body_main_1ijjl_86",ms="_page_body_right_1ijjl_91",pe={page:cs,page_header:ds,page_body:us,page_body_left:hs,page_body_main:fs,page_body_right:ms},_s="_header_2phks_59",gs="_header_flex_2phks_67",vs="_header_flex_btnContainer_2phks_68",_t={header:_s,header_flex:gs,header_flex_btnContainer:vs},ys="_tooltipButton_tq7lx_59",xs="_tooltipButton_hover_tq7lx_70",bs="_tooltipButton_disabled_tq7lx_73",Bt={tooltipButton:ys,tooltipButton_hover:xs,tooltipButton_disabled:bs};function ii(e){return i.jsx(ke,{title:e==null?void 0:e.title,children:i.jsx("div",{className:je(Bt.tooltipButton,(e==null?void 0:e.disabled)&&Bt.tooltipButton_disabled,!(e!=null&&e.noHoverClass)&&Bt.tooltipButton_hover),onClick:n=>{var t;e!=null&&e.disabled||(t=e==null?void 0:e.onClick)==null||t.call(e,n)},children:e==null?void 0:e.children})})}window._iconfont_svg_string_4790291='<svg><symbol id="icon-undo" viewBox="0 0 1024 1024"><path d="M363 252h8.582c298.234 0 540 241.766 540 540v80.007c0 22.09-17.909 40-40 40s-40-17.91-40-40V792c0-254.051-205.95-460-460-460H363v132.533c0 8.836-7.163 16-16 16a16 16 0 0 1-9.747-3.312L118.517 309.188c-7.008-5.383-8.324-15.428-2.941-22.435a16 16 0 0 1 2.94-2.941l218.737-168.033c7.007-5.383 17.052-4.066 22.435 2.941a16 16 0 0 1 3.312 9.747V252z"  ></path></symbol><symbol id="icon-cancel-undo" viewBox="0 0 1024 1024"><path d="M660.992 251.904h-8.704c-297.984 0-540.16 241.664-540.16 540.16v79.872c0 22.016 17.92 39.936 39.936 39.936s39.936-17.92 39.936-39.936v-79.872c0-253.952 205.824-459.776 459.776-459.776h8.704v132.608c0 8.704 7.168 15.872 15.872 15.872 3.584 0 7.168-1.024 9.728-3.072l218.624-167.936c7.168-5.632 8.192-15.36 3.072-22.528l-3.072-3.072L686.08 116.224c-7.168-5.632-16.896-4.096-22.528 3.072-2.048 2.56-3.072 6.144-3.072 9.728v122.88z"  ></path></symbol></svg>',(e=>{var n=(t=(t=document.getElementsByTagName("script"))[t.length-1]).getAttribute("data-injectcss"),t=t.getAttribute("data-disable-injectsvg");if(!t){var a,l,o,s,r,c=function(f,v){v.parentNode.insertBefore(f,v)};if(n&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(f){console&&console.log(f)}}a=function(){var f,v=document.createElement("div");v.innerHTML=e._iconfont_svg_string_4790291,(v=v.getElementsByTagName("svg")[0])&&(v.setAttribute("aria-hidden","true"),v.style.position="absolute",v.style.width=0,v.style.height=0,v.style.overflow="hidden",v=v,(f=document.body).firstChild?c(v,f.firstChild):f.appendChild(v))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(a,0):(l=function(){document.removeEventListener("DOMContentLoaded",l,!1),a()},document.addEventListener("DOMContentLoaded",l,!1)):document.attachEvent&&(o=a,s=e.document,r=!1,m(),s.onreadystatechange=function(){s.readyState=="complete"&&(s.onreadystatechange=null,d())})}function d(){r||(r=!0,o())}function m(){try{s.documentElement.doScroll("left")}catch{return void setTimeout(m,50)}d()}})(window);function kn(e){return i.jsx("svg",{className:"icon","aria-hidden":"true",children:i.jsx("use",{xlinkHref:`#${e==null?void 0:e.type}`})})}const ws="_sizeBar_1yvet_59",ks={sizeBar:ws},js="_inputNumberWithSuffix_1pwr4_59",Cs="_inputNumberWithSuffix_suffix_1pwr4_63",jn={inputNumberWithSuffix:js,inputNumberWithSuffix_suffix:Cs};function Cn(e){const{suffix:n,containerStyle:t,containerClassName:a,...l}=e;return i.jsxs("div",{style:t,className:je(jn.inputNumberWithSuffix,a),children:[i.jsx(Ve,{size:"small",style:{width:70},...l}),n&&i.jsx("div",{className:jn.inputNumberWithSuffix_suffix,children:n})]})}const Ss={50:i.jsx("span",{style:{fontSize:12},children:"50%"}),100:i.jsx("span",{style:{fontSize:12},children:"100%"}),150:i.jsx("span",{style:{fontSize:12},children:"150%"}),200:" "};function Is(e){const{value:n=1,isCustom:t}=e,a=bt(),l=E.useMemo(()=>a.scaleMinZoom*100,[a]),o=E.useMemo(()=>a.scaleMaxZoom*100,[a]),s=E.useMemo(()=>a.scaleDefault*100,[a]),r=E.useMemo(()=>Math.round(n*100),[n]);function c(d){var f;const m=Math.round(Number(d))/100;m!==r&&((f=e==null?void 0:e.onChange)==null||f.call(e,m))}return i.jsx(tn,{content:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[i.jsx(Ti,{style:{width:250},min:l,max:Math.max(o,r),tooltip:{formatter:d=>`${d}%`},marks:Ss,value:r,onChange:c}),i.jsxs(ue,{style:{marginTop:-16},children:[t&&i.jsx(on,{min:l,max:1e3,value:r,placeholder:"缩放值",style:{fontSize:12,width:80},onChange:d=>{c(d||1)}}),i.jsx(ii,{noHoverClass:!0,title:"重置",children:i.jsx(Pe,{className:"theme-color icon_clickable",onClick:()=>{c(s)}})})]})]}),children:i.jsxs("span",{style:{cursor:"pointer"},children:[i.jsx("span",{style:{marginRight:4},children:`${r}%`}),i.jsx(Jr,{})]})})}function Es(){const e=bt(),{engine:n}=re();return i.jsxs("div",{className:ks.sizeBar,id:"rbs-sizebar",children:[i.jsx(Cn,{suffix:"px",value:e.width,onChange:t=>{n.config.setConfig({width:t})}}),i.jsx(nr,{style:{fontSize:10}}),i.jsx(Cn,{suffix:"px",value:e.height,onChange:t=>{n.config.setConfig({height:t})}}),i.jsx(Is,{value:e.scale,onChange:t=>{n.config.setConfig({scale:t})}})]})}function me({children:e}){return i.jsx("div",{style:{border:"1px solid white",padding:"0 8px",height:25,fontSize:12,borderRadius:2,minWidth:25,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e})}function As(){const[e]=Ye();return i.jsxs(ue,{direction:"vertical",style:{padding:"6px 6px 10px",userSelect:"none",whiteSpace:"nowrap",width:335},children:[i.jsx("b",{children:e("head.shortCutKeys.title")}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.all"),"："]}),i.jsx(me,{children:"Shift"}),i.jsx("span",{children:"+"}),i.jsx(me,{children:"A"})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.invert"),"："]}),i.jsx(me,{children:"Shift"}),i.jsx("span",{children:"+"}),i.jsx(me,{children:"R"})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.copy"),"："]}),i.jsx(me,{children:"Shift"}),i.jsx("span",{children:"+"}),i.jsx(me,{children:"C"})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.save"),"："]}),i.jsx(me,{children:"Shift"}),i.jsx("span",{children:"+"}),i.jsx(me,{children:"S"})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.multiple"),"："]}),i.jsx("span",{children:e("head.shortCutKeys.multipleExt.ext1")}),i.jsx(me,{children:"Shift"}),i.jsx("span",{children:e("head.shortCutKeys.multipleExt.ext2")})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.delete"),"："]}),i.jsx(me,{children:"BackSpace"}),i.jsxs("span",{children:[" ",e("head.shortCutKeys.deleteExt.ext1")," "]}),i.jsx(me,{children:"Delete"})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.move"),"："]}),i.jsx(me,{children:i.jsx(Xt,{})}),i.jsx(me,{children:i.jsx(Sr,{})}),i.jsx(me,{children:i.jsx(Yt,{})}),i.jsx(me,{children:i.jsx(jr,{})})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.force"),"："]}),i.jsx("span",{children:e("head.shortCutKeys.forceExt.ext1")}),i.jsx(me,{children:"Shift"}),i.jsx("span",{children:e("head.shortCutKeys.forceExt.ext2")})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.undo"),"："]}),i.jsx(me,{children:"Shift"}),i.jsx("span",{children:"+"}),i.jsx(me,{children:"Z"})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.cancelUndo"),"："]}),i.jsx(me,{children:"Shift"}),i.jsx("span",{children:"+"}),i.jsx(me,{children:"Ctrl / Command"}),i.jsx("span",{children:"+"}),i.jsx(me,{children:"Z"})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.zoom"),"："]}),i.jsx(me,{children:i.jsxs(ue,{children:[i.jsx("span",{children:e("head.shortCutKeys.zoomExt.ext1")}),i.jsx(Xt,{}),i.jsx("span",{children:"/"}),i.jsx(Yt,{})]})})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.zoomReset"),"："]}),i.jsx(me,{children:e("head.shortCutKeys.zoomResetExt.ext1")})]}),i.jsxs(ue,{children:[i.jsxs("span",{children:[e("head.shortCutKeys.dragCanvas"),"："]}),i.jsx("span",{children:e("head.shortCutKeys.dragCanvasExt.ext1")}),i.jsx(me,{children:"Space"}),i.jsx("span",{children:e("head.shortCutKeys.dragCanvas")})]})]})}const zs=["rbs-screen.top"];function Ns(e=window.location.host){const n=e==null?void 0:e.toLowerCase();return zs.some(t=>{var a,l;return(l=n==null?void 0:n.includes)==null?void 0:l.call(n,(a=t==null?void 0:t.toLowerCase)==null?void 0:a.call(t))})}const Os=(e,n,t)=>{const a=e[n];return a?typeof a=="function"?a():Promise.resolve(a):new Promise((l,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+n+(n.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})};async function Rs(e){var a;const n=await Os(Object.assign({"../../../../../../public/example/classic.json":()=>wn(()=>import("./classic-BaB2AgFf.js"),[],import.meta.url),"../../../../../../public/example/multiple-components-interactive.json":()=>wn(()=>import("./multiple-components-interactive--7DokoLk.js"),[],import.meta.url)}),`../../../../../../public/example/${e}.json`,9),t=ie.getActiveEngine();(a=t==null?void 0:t.loadJSON)==null||a.call(t,n)}function Bs(){return i.jsx(ct,{menu:{items:[{label:i.jsx("span",{style:{fontSize:12},children:"经典大屏"}),key:"classic"},{label:i.jsx("span",{style:{fontSize:12},children:"表格查询"}),key:"multiple-components-interactive"}],onClick({key:e}){Rs(e)}},children:i.jsx(Ie,{size:"small",style:{fontSize:12},id:"rbs-choose-example-button",children:"切换示例"})})}function Ls(){return i.jsx(Ie,{size:"small",style:{fontSize:12},id:"rbs-starter-help",onClick:()=>{lr(!0)},children:"新手教程"})}const Ds=Ns();function Ts(e){const{pageLogo:n}=e,{engine:t,rbsEngine:a}=re(),[l,o]=Ye(),s=ei(),r=o.language===bi.zh,c=E.useMemo(()=>[{key:"shortCutKeys",description:i.jsx(As,{}),icon:i.jsx(Hi,{})},{key:"undo",description:l("head.undo"),disabled:!s.isCanGoBack,icon:i.jsx(kn,{type:"icon-undo"})},{key:"cancelUndo",description:l("head.cancelUndo"),disabled:!s.isCanGoForward,icon:i.jsx(kn,{type:"icon-cancel-undo"})},{key:"export",description:l("head.export"),icon:i.jsx(La,{})},{key:"import",description:l("head.import"),icon:i.jsx(Qn,{})},{key:"save",description:l("head.save"),icon:i.jsx(Fe,{})},{key:"clear",description:l("head.clear"),icon:i.jsx(qn,{})},{key:"language",description:l("head.language",{text:`${r?"切换英语":"change chinese"}`}),icon:i.jsx(Aa,{})},{key:"settings",description:l("head.settings"),disabled:!0,icon:i.jsx(Xn,{})}],[o.language,s.isCanGoForward,s.isCanGoBack]);function d(){window.open("https://github.com/tangjiahui-cn/react-big-screen.git")}async function m(){a==null||a.emit("startPreview",t)}function f(h){switch(h.key){case"undo":hn();break;case"cancelUndo":en();break;case"export":t.getJSON().then(g=>{const y=JSON.stringify(g);Tn(y,"大屏看板.json")});break;case"import":hr().then(g=>{if(!g)return oe.warn("文件内容不能为空");try{const y=JSON.parse(g);t.loadJSON(y)}catch{oe.error("请上传json格式文件")}});break;case"preview":m();break;case"save":un();break;case"clear":t.clear();break;case"settings":break;case"language":const w=r?"en":"zh";wi(w),t.config.setConfig({language:w});break}}const v=i.jsxs("div",{className:_t.header_flex,children:[i.jsx("b",{children:"BigScreen"}),!Ds&&i.jsx(da,{style:{cursor:"pointer",fontSize:16},onClick:d})]});return i.jsxs("div",{className:_t.header,children:[n?i.jsx(n,{}):v,i.jsx(Es,{}),i.jsxs("div",{className:_t.header_flex,children:[i.jsx(Bs,{}),i.jsx(Ls,{}),i.jsx("div",{className:_t.header_flex_btnContainer,id:"rbs-tool-bar",children:c.map(h=>i.jsx(ii,{disabled:h==null?void 0:h.disabled,title:h.description,onClick:()=>f(h),children:h==null?void 0:h.icon},h.key))}),i.jsx(Ie,{type:"primary",size:"small",style:{fontSize:12},id:"rbs-preview",onClick:m,children:"开始预览"})]})]})}const Ms="_menu_1ueks_59",Ps="_menu_bar_1ueks_68",Fs="_menu_main_1ueks_72",Lt={menu:Ms,menu_bar:Ps,menu_main:Fs},Us="_library_11n9v_59",$s="_library_header_11n9v_72",ps="_library_main_11n9v_83",Dt={library:Us,library_header:$s,library_main:ps},Hs="_componentsBlock_mx05c_59",Ws={componentsBlock:Hs},Vs="_componentItem_1a82r_59",Zs="_componentItem_body_1a82r_71",Ks="_componentItem_footer_1a82r_80",Tt={componentItem:Vs,componentItem_body:Zs,componentItem_footer:Ks};class Gs{constructor(){$e(this,"style");$e(this,"count",0)}mount(){if(this.count++,this.style)return;const n=document.createElement("style");n.setAttribute("id","virtual-drag"),n.innerHTML="html.is-dragging * {cursor: copy;};",document.head.appendChild(this.style=n)}unmount(){!this.style||--this.count>0||(this.count=0,this.style.remove(),this.style=void 0)}}const Sn=new Gs;function qs(e,n){let t=!1;e.addEventListener("mousedown",l);function a(r){var c;t||(t=!0,(c=n==null?void 0:n.onStart)==null||c.call(n,r,{isDragging:t}))}function l(){e.addEventListener("mousemove",a),window.addEventListener("mouseup",o)}function o(r){var c;(c=n==null?void 0:n.onEnd)==null||c.call(n,r,{isDragging:t}),s()}function s(){t=!1,e.removeEventListener("mousemove",a),window.removeEventListener("mouseup",o)}return()=>{s(),e.removeEventListener("mousedown",l)}}class Js{constructor(){$e(this,"isDragging",!1);$e(this,"dragOptions",{type:"",data:void 0});$e(this,"draggingChangeCallback",[])}notifyDraggingChange(){this.draggingChangeCallback.forEach(n=>{n({...this.dragOptions,isDragging:this.isDragging})})}onDraggingChange(n){return this.draggingChangeCallback.push(n),()=>{this.draggingChangeCallback=this.draggingChangeCallback.filter(t=>t!==n)}}setIsDragging(n){this.isDragging=n,this.notifyDraggingChange()}getIsDragging(){return this.isDragging}setDragOptions(n,t){if(t){this.dragOptions={...n};return}this.dragOptions={...this.dragOptions,...n}}getDragOptions(){return this.dragOptions}}const Ze=new Js;function ri(e,n){const t=E.useRef(n);t.current=n,E.useEffect(()=>{const a=e.current;if(!a){console.warn("dom must be set.");return}const l=qs(a,{onStart(){Sn.mount(),document.documentElement.classList.add("is-dragging"),Ze.setDragOptions(t.current),Ze.setIsDragging(!0)},onEnd(){Sn.unmount(),document.documentElement.classList.remove("is-dragging"),Ze.setDragOptions(t.current),Ze.setIsDragging(!1)}});return()=>l()},[])}function ai(e,n){const t=E.useRef(n);t.current=n,E.useEffect(()=>{const{accept:a}=n;if(a&&!Array.isArray(a))throw new Error("accept must be a string array.");const l=e.current;if(!l){console.warn("dom must be set.");return}const o=s=>{var c,d,m;if(!Ze.getIsDragging())return;const r=Ze.getDragOptions();a&&!((c=a==null?void 0:a.includes)!=null&&c.call(a,r.type||""))||(m=(d=t.current)==null?void 0:d.onDrop)==null||m.call(d,s,r)};return l.addEventListener("mouseup",o),()=>{l.removeEventListener("mouseup",o)}},[])}function ut(e){const{src:n}=e,[t,a]=E.useState("");return E.useEffect(()=>{switch(typeof n){case"string":a(n);break;case"function":n().then(l=>{a(l.default)});break}},[n]),n?i.jsx("img",{style:e==null?void 0:e.style,src:t,draggable:!1}):i.jsx("span",{style:{color:"#b8b8b8"},children:"None"})}function Ys(e){const{component:n}=e,t=E.useRef(null);return ri(t,{type:"create-component",data:{component:n}}),i.jsxs("div",{style:e==null?void 0:e.style,className:je(Tt.componentItem,e==null?void 0:e.className),ref:t,children:[i.jsx("div",{className:Tt.componentItem_body,children:i.jsx(ut,{src:n==null?void 0:n.icon,style:{maxWidth:"50%",maxHeight:"50%"}})}),i.jsx("div",{className:Tt.componentItem_footer,children:n.cName})]})}function Xs(e){var o;const{components:n,column:t=3}=e,{width:a,lines:l}=E.useMemo(()=>({width:`${100/t}%`,lines:Math.ceil(n.length/t)}),[n,t]);return i.jsxs("div",{className:Ws.componentsBlock,children:[!(n!=null&&n.length)&&i.jsx(Ee,{description:"暂无组件"}),(o=n==null?void 0:n.map)==null?void 0:o.call(n,(s,r)=>{const c=r%t===t-1,d=l===1||r>(l-1)*t-1;return i.jsx(Ys,{component:s,style:{width:a,borderRight:c?"none":"1px solid #e7e7e7",borderBottom:d?"none":"1px solid #e7e7e7"}},s.cId)})]})}function In(e,n=""){if(!n)return e;const t=n.toLowerCase();return e.filter(a=>a.cName.toLowerCase().includes(t)||a.cId.toLowerCase().includes(t))}function Qs(){const[e,n]=Ye(),[t,a]=E.useState([]),l=Ua(),[o,s]=E.useState(""),[r,c]=E.useState([]),d=E.useMemo(()=>({base:e("menu.library.base"),charts:e("menu.library.charts"),layout:e("menu.library.layout"),nav:e("menu.library.nav"),unknown:e("menu.library.unknown")}),[n.language]),m=E.useMemo(()=>cr((v,h="")=>{const w=In(v,h);c(w)},500),[]);E.useEffect(()=>{c(In(l,o))},[l]),ln(()=>{m(l,o)},[o]);const f=E.useMemo(()=>{const v=[],h=Object.entries(dr(r,w=>w.category||"unknown")).map(([w,g])=>(v.push(w),{key:w,components:g,label:d[w]||w}));return a(v),h},[r,d]);return i.jsxs("div",{className:Dt.library,children:[i.jsx("div",{className:Dt.library_header,children:i.jsx(Mi.Search,{allowClear:!0,value:o,placeholder:"搜索组件",onChange:v=>{s(v.target.value)}})}),i.jsx("div",{className:Dt.library_main,children:f.length?i.jsx(gn,{expandIconPosition:"end",activeKey:t,style:{padding:0},onChange:v=>a(v||[]),children:f.map(v=>i.jsx(gn.Panel,{header:v.label,style:{padding:0},children:i.jsx(Xs,{components:v.components})},v.key))}):i.jsx(Ee,{style:{height:"100%",background:"white"}})})]})}const eo="_componentNodes_x43ss_59",to="_componentNodes_head_x43ss_63",no="_componentNodes_block_x43ss_67",Mt={componentNodes:eo,componentNodes_head:to,componentNodes_block:no},io="_componentNodeItem_r9mbq_59",ro="_componentNodeItem_selected_r9mbq_65",ao="_componentNodeItem_icon_r9mbq_71",so="_componentNodeItem_name_r9mbq_81",oo="_componentNodeItem_tail_r9mbq_84",lo="_componentNodeItem_tail_operatable_r9mbq_95",He={componentNodeItem:io,componentNodeItem_selected:ro,componentNodeItem_icon:ao,componentNodeItem_name:so,componentNodeItem_tail:oo,componentNodeItem_tail_operatable:lo};function co(e){const{engine:n}=re(),t=E.useRef(null),[a,l]=E.useState(e==null?void 0:e.componentNode),o=(a==null?void 0:a.show)??!0,{component:s,instance:r}=E.useMemo(()=>({component:n.component.get(a==null?void 0:a.cId),instance:n.instance.get(a==null?void 0:a.id)}),[a]);function c(m){m.stopPropagation();const f=St("shift");if(n.instance.isSelected(a.id)){if(!wt(m.nativeEvent))return;f?n.instance.unselect(a.id):n.instance.select(a==null?void 0:a.id,!0);return}n.instance.select(a==null?void 0:a.id,!f)}function d(m){n.componentNode.update(a.id,{show:m})}return E.useEffect(()=>n.componentNode.onChange(a.id,({payload:m})=>{l({...m})}),[]),i.jsxs("div",{[`data-${Ge.componentNodeId}`]:a.id,ref:t,className:je(He.componentNodeItem,(e==null?void 0:e.isSelected)&&He.componentNodeItem_selected),onMouseDown:m=>{c(m)},onMouseEnter:()=>{var m;(m=r==null?void 0:r.handleHover)==null||m.call(r)},onMouseLeave:()=>{var m;(m=r==null?void 0:r.handleUnHover)==null||m.call(r)},children:[i.jsx("div",{className:He.componentNodeItem_icon,children:i.jsx(ut,{src:s==null?void 0:s.icon,style:{height:"75%",maxWidth:"100%"}})}),i.jsx("div",{className:He.componentNodeItem_name,children:a==null?void 0:a.name}),i.jsxs("div",{className:He.componentNodeItem_tail,children:[i.jsx("div",{children:a!=null&&a.lock?i.jsx(Yn,{}):""}),i.jsx("div",{className:He.componentNodeItem_tail_operatable,onMouseDown:m=>{m.stopPropagation(),d(!o)},children:o?i.jsx(na,{}):i.jsx(ea,{})})]})]})}const uo="_renderContextMenu_vitq8_59",ho={renderContextMenu:uo},fo="_renderList_p7203_59",mo="_renderList_disabled_p7203_63",_o="_renderList_item_p7203_70",go="_renderList_item_title_p7203_87",vo="_renderList_item_unselectable_p7203_94",it={renderList:fo,renderList_disabled:mo,renderList_item:_o,renderList_item_title:go,renderList_item_unselectable:vo},yo="_hoverItem_overlay_twv7t_59",xo={hoverItem_overlay:yo},bo={top:0,left:0};function wo(e){const{engine:n}=re(),{children:t,items:a,onSelect:l,...o}=e,[s,r]=E.useState(!1),[c,d]=E.useState(bo);function m(v){var w,g,y;if((w=e==null?void 0:e.onMouseEnter)==null||w.call(e,v),!(a!=null&&a.length))return;const h=(y=(g=v.target)==null?void 0:g.getBoundingClientRect)==null?void 0:y.call(g);h&&(d({top:h.top,left:h.left+h.width}),r(!0))}function f(v){var h;(h=e==null?void 0:e.onMouseLeave)==null||h.call(e,v),r(!1)}return i.jsxs("div",{...o,onMouseEnter:m,onMouseLeave:f,children:[t,s&&ki.createPortal(i.jsx("div",{className:xo.hoverItem_overlay,style:{top:c.top,left:c.left,zIndex:n.componentNode.getMaxLevel()},children:i.jsx(si,{items:a,onSelect:(v,h)=>{l==null||l(v,h),h.stopPropagation()}})}),document.body)]})}function si(e){var n,t;return i.jsx("div",{className:it.renderList,children:(t=(n=e==null?void 0:e.items)==null?void 0:n.map)==null?void 0:t.call(n,a=>{var o;const l=!(a!=null&&a.disabled)&&((a==null?void 0:a.selectable)??(a==null?void 0:a.selectable)===void 0);return i.jsxs(wo,{items:a==null?void 0:a.children,style:a==null?void 0:a.style,className:je(it.renderList_item,(a==null?void 0:a.disabled)&&it.renderList_disabled,!l&&it.renderList_item_unselectable),onSelect:(s,r)=>{var c,d;(c=e==null?void 0:e.onSelect)==null||c.call(e,s,r),s.key===a.key&&((d=a==null?void 0:a.onSelect)==null||d.call(a,r))},onClick:s=>{var r,c;s.stopPropagation(),l&&((r=e==null?void 0:e.onSelect)==null||r.call(e,a,s),(c=a==null?void 0:a.onSelect)==null||c.call(a,s))},children:[i.jsxs("div",{className:it.renderList_item_title,style:a==null?void 0:a.titleStyle,children:[a==null?void 0:a.icon,a==null?void 0:a.title]}),!!((o=a==null?void 0:a.children)!=null&&o.length)&&i.jsx(wa,{style:{fontSize:"0.75em"}})]},a==null?void 0:a.key)})})}function ko(e){const n=E.useRef(null);return E.useEffect(()=>{function t(a){var l,o,s;(o=(l=n.current)==null?void 0:l.contains)!=null&&o.call(l,a.target)||(s=e==null?void 0:e.onClickOuter)==null||s.call(e)}return window.addEventListener("click",t),()=>{window.removeEventListener("click",t)}},[]),i.jsx("div",{ref:n,tabIndex:0,className:ho.renderContextMenu,onContextMenu:t=>{t.preventDefault()},children:i.jsx(si,{items:e==null?void 0:e.items,onSelect:t=>{var a;(a=e==null?void 0:e.onSelect)==null||a.call(e,t)}})})}function oi(e,n,t,a){var c;if(!t||(a!=null&&a.onBeforeOpen&&(t=((c=a==null?void 0:a.onBeforeOpen)==null?void 0:c.call(a,t))||t),t=t==null?void 0:t.filter(Boolean),!(t!=null&&t.length)))return;const l=document.createElement("div");l.style.position="fixed",l.style.left=`${e}px`,l.style.top=`${n}px`,typeof(a==null?void 0:a.zIndex)=="number"&&(l.style.zIndex=`${a==null?void 0:a.zIndex}`),document.body.appendChild(l);const o=Bn(l);let s=!1;const r=()=>{var d,m;s||((d=o==null?void 0:o.unmount)==null||d.call(o),(m=l==null?void 0:l.remove)==null||m.call(l),s=!0)};return o.render(i.jsx(ko,{items:t,onClickOuter:()=>{r()},onSelect:d=>{var m;(m=a==null?void 0:a.onSelect)==null||m.call(a,d==null?void 0:d.key,d),r()}})),r}const jo=[{key:"top",icon:i.jsx(Pa,{}),title:"置顶",style:{borderTop:"1px solid #e8e8e8"},onSelect:()=>ts()},{key:"bottom",icon:i.jsx(Qn,{}),title:"置底",onSelect:()=>ns()},{key:"levelUp",icon:i.jsx(Xt,{}),title:"上移一层",onSelect:()=>is()},{key:"levelDown",icon:i.jsx(Yt,{}),title:"下移一层",style:{borderBottom:"1px solid #e8e8e8"},onSelect:()=>rs()},{key:"lock",icon:i.jsx(Yn,{}),title:"锁定",onSelect:()=>Ya()},{key:"unlock",icon:i.jsx(Oa,{}),title:"解锁",onSelect:()=>Xa()},{key:"group",icon:i.jsx(Dr,{}),title:"成组",onSelect:()=>Qa()},{key:"ungroup",icon:i.jsx(Gr,{}),title:"取消成组",onSelect:()=>es()},{key:"copy",icon:i.jsx(Vr,{}),title:"复制",style:{borderTop:"1px solid #e8e8e8"},onSelect:()=>ni()},{key:"delete",icon:i.jsx(Je,{}),title:"删除",titleStyle:{gap:6},onSelect:()=>Qt()},{key:"collect",icon:i.jsx(cn,{}),title:"收藏",onSelect:()=>as()}];function Co(e,n){var t;return oi(e.clientX,e.clientY,jo,{zIndex:(t=n==null?void 0:n.componentNode)==null?void 0:t.getMaxLevel(),onBeforeOpen(a){let l=0,o=!1;const s=n.instance.getAllSelected(),r=s.map(c=>{const d=c.getComponentNode();return d!=null&&d.lock&&l++,d.groupId&&(o=!0),d});return r.length?a.filter(c=>c.key==="group"?s.length>1:c.key==="ungroup"?o:c.key==="lock"?l!==r.length:c.key==="unlock"?!!l:!0):a}})}const So=[{key:"selectAll",title:"全选",icon:i.jsx($r,{}),onSelect:()=>ti()},{key:"unselectAll",title:"反选",icon:i.jsx(Pr,{}),onSelect:()=>jt()},{key:"clear",title:"清空",icon:i.jsx(qn,{}),onSelect:()=>Ja()},{key:"saveLocal",title:"保存",icon:i.jsx(Fe,{}),onSelect:()=>un()}];function Io(e,n){var t;return oi(e.clientX,e.clientY,So,{zIndex:(t=n==null?void 0:n.componentNode)==null?void 0:t.getMaxLevel()})}let lt=[];function En(){lt.length&&(lt.forEach(e=>e==null?void 0:e()),lt=[])}function li(e){const{engine:n}=re();sn(e,{contextmenu(t){var s;En(),t.preventDefault();const a=Jt(t.target,Ge.componentNodeId,!0),l=n.instance.get(a),o=(s=l==null?void 0:l.getComponentNode)==null?void 0:s.call(l);if(l&&o){lt.push(Co(t,n));return}lt.push(Io(t,n))}}),$n(()=>{En()})}function Eo(){const{engine:e}=re(),n=Pn(),t=dn(),a=E.useRef(null),l=E.useMemo(()=>n.length?i.jsx("div",{className:Mt.componentNodes_block,children:n.map(o=>i.jsx(co,{componentNode:o,isSelected:e.instance.isSelected(o.id)},o.id))}):i.jsx(i.Fragment,{}),[n,t]);return li(a),i.jsxs("div",{ref:a,className:Mt.componentNodes,onMouseDown:()=>jt(),children:[i.jsxs("div",{className:Mt.componentNodes_head,children:["当前页组件数量：",n.length]}),!n.length&&i.jsx(Ee,{}),l]})}const Ao="_menubar_1ah1r_59",zo="_menubar_item_1ah1r_67",No="_menubar_item_selected_1ah1r_81",Pt={menubar:Ao,menubar_item:zo,menubar_item_selected:No};function Oo(e){var n,t;return i.jsx("div",{className:Pt.menubar,children:(t=(n=e==null?void 0:e.list)==null?void 0:n.map)==null?void 0:t.call(n,a=>{const l=a.key===e.value;return i.jsx(ke,{title:a==null?void 0:a.title,placement:"right",children:i.jsx("div",{id:a==null?void 0:a.domId,className:je(Pt.menubar_item,l&&Pt.menubar_item_selected),onClick:()=>{var o;(o=e==null?void 0:e.onChange)==null||o.call(e,a==null?void 0:a.key)},children:a==null?void 0:a.icon})},a==null?void 0:a.key)})})}const Ro="_propertyItem_1r9fx_59",Bo="_propertyItem_icon_1r9fx_68",Lo="_propertyItem_icon_disabled_1r9fx_75",Do="_propertyItemPopover_1r9fx_79",To="_propertyItemPopover_description_1r9fx_84",Mo="_propertyItemPopover_statistic_1r9fx_89",Po="_propertyItemPopover_body_1r9fx_92",Fo="_propertyItemPopover_body_item_1r9fx_95",Uo="_propertyItemPopover_body_item_icon_1r9fx_105",$o="_propertyItemPopover_title_1r9fx_108",ze={propertyItem:Ro,propertyItem_icon:Bo,propertyItem_icon_disabled:Lo,propertyItemPopover:Do,propertyItemPopover_description:To,propertyItemPopover_statistic:Mo,propertyItemPopover_body:Po,propertyItemPopover_body_item:Fo,propertyItemPopover_body_item_icon:Uo,propertyItemPopover_title:$o};function po(e){var c,d,m;const{data:n}=e,t=rn(),{engine:a}=re(),l=(n==null?void 0:n.origin)!=="system",o=(n==null?void 0:n.origin)!=="system";function s(){const f=fr(n==null?void 0:n.id),v=()=>{var h;return(h=e==null?void 0:e.onDelete)==null?void 0:h.call(e,n,f)};f.length||v(),t({content:i.jsxs("span",{children:[i.jsx("span",{children:"该操作会同时删除"}),i.jsxs("span",{style:{color:"red"},children:[" ",f.length," "]}),i.jsxs("span",{children:["个相关实例 ，确定删除组件包“",n.name,"”？"]})]}),onOk(h){v(),h()}})}async function r(){const f=await a.component.getPackageSourceCode(n==null?void 0:n.id);if(!f){oe.warn("源码不存在");return}const v=`${n==null?void 0:n.name}.js`;Tn(f,v)}return i.jsx(tn,{placement:"rightTop",title:i.jsxs("div",{className:ze.propertyItemPopover_title,children:[i.jsx("b",{children:n==null?void 0:n.name}),i.jsxs("span",{style:{color:"rgba(0,0,0,0.25)"},children:["v",n==null?void 0:n.version]})]}),content:i.jsxs(ue,{direction:"vertical",className:ze.propertyItemPopover,children:[(n==null?void 0:n.description)&&i.jsx("div",{className:ze.propertyItemPopover_description,children:n==null?void 0:n.description}),i.jsxs("div",{className:ze.propertyItemPopover_statistic,children:["共包含组件",i.jsxs("b",{children:[" ",(c=n==null?void 0:n.components)==null?void 0:c.length," "]}),"个："]}),i.jsx("div",{className:ze.propertyItemPopover_body,children:i.jsx(ue,{size:4,direction:"vertical",style:{width:300,maxHeight:160,overflowY:"auto"},children:(m=(d=n==null?void 0:n.components)==null?void 0:d.map)==null?void 0:m.call(d,f=>i.jsxs("div",{className:ze.propertyItemPopover_body_item,children:[i.jsx("div",{className:ze.propertyItemPopover_body_item_icon,children:i.jsx(ut,{src:f==null?void 0:f.icon,style:{maxHeight:"80%",maxWidth:32}})}),i.jsx("span",{children:f==null?void 0:f.cName})]},f==null?void 0:f.cId))})})]}),children:i.jsxs("div",{className:ze.propertyItem,onContextMenu:f=>f.preventDefault(),children:[i.jsx("span",{children:n==null?void 0:n.name}),i.jsxs(ue,{children:[i.jsx(Je,{title:"删除",className:je(ze.propertyItem_icon,!o&&ze.propertyItem_icon_disabled),onClick:o?s:void 0}),i.jsx(Xr,{title:"下载到本地",className:je(ze.propertyItem_icon,!l&&ze.propertyItem_icon_disabled),onClick:o?r:void 0})]})]})})}const Ho="_jsonEditor_13vbq_59",Wo="_jsonEditor_render_13vbq_68",Vo="_jsonEditor_loading_13vbq_72",Ft={jsonEditor:Ho,jsonEditor_render:Wo,jsonEditor_loading:Vo};self.MonacoEnvironment={getWorker:function(e,n){const t=(a,l)=>new Worker(self.MonacoEnvironment.getWorkerUrl(a),{name:l,type:"module"});switch(n){case"json":return t("/monaco-editor/esm/vs/language/json/json.worker?worker",n);case"typescript":case"javascript":return t("/monaco-editor/esm/vs/language/typescript/ts.worker?worker",n);default:return t("/monaco-editor/esm/vs/editor/editor.worker?worker",n)}}};function Te(e){const n=E.useRef(null),t=E.useRef();return E.useEffect(()=>{var l,o;const a=or.create(n.current,{theme:"vs-light",value:e==null?void 0:e.value,language:(e==null?void 0:e.language)||"text",fontSize:12,tabSize:4,lineDecorationsWidth:0,lineNumbersMinChars:3,readOnly:e==null?void 0:e.readOnly,automaticLayout:!0,...e==null?void 0:e.options,minimap:{enabled:(e==null?void 0:e.minimap)??!0,showSlider:void 0,...(l=e==null?void 0:e.options)==null?void 0:l.minimap},readOnlyMessage:{value:"禁止编辑",...(o=e==null?void 0:e.options)==null?void 0:o.readOnlyMessage}});return a.onDidChangeModelContent(()=>{var r;const s=a.getValue();(r=e==null?void 0:e.onChange)==null||r.call(e,s)}),t.current=a,()=>{a.dispose()}},[e==null?void 0:e.language]),ln(()=>{var l,o,s,r;if(!(t!=null&&t.current)){console.error("monaco-editor init failed.");return}const a=`${(e==null?void 0:e.value)||""}`;a!==((o=(l=t==null?void 0:t.current)==null?void 0:l.getValue)==null?void 0:o.call(l))&&((r=(s=t.current)==null?void 0:s.setValue)==null||r.call(s,a))},[e==null?void 0:e.value]),i.jsxs("div",{className:Ft.jsonEditor,style:e==null?void 0:e.style,children:[i.jsx("div",{ref:n,className:Ft.jsonEditor_render}),(e==null?void 0:e.loading)&&i.jsx("div",{className:Ft.jsonEditor_loading,children:i.jsx(Jn,{style:{fontSize:20}})})]})}const Zo=Xe(e=>{const{params:n}=e,[t]=_e.useForm(),[a,l]=E.useState(!1),o=E.useRef("");function s(){t.validateFields(["url"]).then(c=>{var d;if(!["http","https"].find(m=>{var f,v;return(v=(f=c==null?void 0:c.url)==null?void 0:f.startsWith)==null?void 0:v.call(f,m)})){oe.error("地址格式不正确");return}l(!0),(d=Gt(c==null?void 0:c.url))==null||d.then(m=>{l(!1),o.current=c==null?void 0:c.url,t.setFieldsValue({content:m})})})}async function r(){var d,m;const c=t.getFieldValue("content");c||oe.warn("文本内容不能为空"),!(n!=null&&n.beforeOk&&!await Promise.resolve((d=n==null?void 0:n.beforeOk)==null?void 0:d.call(n,c)))&&((m=e==null?void 0:e.onOk)==null||m.call(e,{url:o.current,content:c}))}return i.jsx(qe,{width:800,okText:"确定",cancelText:"取消",title:"远程读取",open:e==null?void 0:e.visible,afterClose:e==null?void 0:e.afterClose,onCancel:e==null?void 0:e.onCancel,bodyStyle:{paddingBottom:0},onOk:r,children:i.jsxs(_e,{form:t,labelCol:{span:2},children:[i.jsx(_e.Item,{label:"地址",name:"url",rules:[{required:!0,message:"请输入地址"}],children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx(_e.Item,{noStyle:!0,name:"url",style:{flex:1},children:i.jsx(Ue,{size:"middle"})}),i.jsx(Ie,{type:"primary",onClick:s,loading:a,children:"读取"})]})}),i.jsx(_e.Item,{label:"文本",name:"content",children:i.jsx(Te,{readOnly:!0,language:"javascript",style:{height:400}})})]})})});var ci={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,n){(function(t){e.exports=t()})(function(){return function t(a,l,o){function s(d,m){if(!l[d]){if(!a[d]){var f=typeof mt=="function"&&mt;if(!m&&f)return f(d,!0);if(r)return r(d,!0);var v=new Error("Cannot find module '"+d+"'");throw v.code="MODULE_NOT_FOUND",v}var h=l[d]={exports:{}};a[d][0].call(h.exports,function(w){var g=a[d][1][w];return s(g||w)},h,h.exports,t,a,l,o)}return l[d].exports}for(var r=typeof mt=="function"&&mt,c=0;c<o.length;c++)s(o[c]);return s}({1:[function(t,a,l){var o=t("./utils"),s=t("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l.encode=function(c){for(var d,m,f,v,h,w,g,y=[],x=0,b=c.length,j=b,S=o.getTypeOf(c)!=="string";x<c.length;)j=b-x,f=S?(d=c[x++],m=x<b?c[x++]:0,x<b?c[x++]:0):(d=c.charCodeAt(x++),m=x<b?c.charCodeAt(x++):0,x<b?c.charCodeAt(x++):0),v=d>>2,h=(3&d)<<4|m>>4,w=1<j?(15&m)<<2|f>>6:64,g=2<j?63&f:64,y.push(r.charAt(v)+r.charAt(h)+r.charAt(w)+r.charAt(g));return y.join("")},l.decode=function(c){var d,m,f,v,h,w,g=0,y=0,x="data:";if(c.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var b,j=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===r.charAt(64)&&j--,c.charAt(c.length-2)===r.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=s.uint8array?new Uint8Array(0|j):new Array(0|j);g<c.length;)d=r.indexOf(c.charAt(g++))<<2|(v=r.indexOf(c.charAt(g++)))>>4,m=(15&v)<<4|(h=r.indexOf(c.charAt(g++)))>>2,f=(3&h)<<6|(w=r.indexOf(c.charAt(g++))),b[y++]=d,h!==64&&(b[y++]=m),w!==64&&(b[y++]=f);return b}},{"./support":30,"./utils":32}],2:[function(t,a,l){var o=t("./external"),s=t("./stream/DataWorker"),r=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function d(m,f,v,h,w){this.compressedSize=m,this.uncompressedSize=f,this.crc32=v,this.compression=h,this.compressedContent=w}d.prototype={getContentWorker:function(){var m=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),f=this;return m.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(m,f,v){return m.pipe(new r).pipe(new c("uncompressedSize")).pipe(f.compressWorker(v)).pipe(new c("compressedSize")).withStreamInfo("compression",f)},a.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,a,l){var o=t("./stream/GenericWorker");l.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},l.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,a,l){var o=t("./utils"),s=function(){for(var r,c=[],d=0;d<256;d++){r=d;for(var m=0;m<8;m++)r=1&r?3988292384^r>>>1:r>>>1;c[d]=r}return c}();a.exports=function(r,c){return r!==void 0&&r.length?o.getTypeOf(r)!=="string"?function(d,m,f,v){var h=s,w=v+f;d^=-1;for(var g=v;g<w;g++)d=d>>>8^h[255&(d^m[g])];return-1^d}(0|c,r,r.length,0):function(d,m,f,v){var h=s,w=v+f;d^=-1;for(var g=v;g<w;g++)d=d>>>8^h[255&(d^m.charCodeAt(g))];return-1^d}(0|c,r,r.length,0):0}},{"./utils":32}],5:[function(t,a,l){l.base64=!1,l.binary=!1,l.dir=!1,l.createFolders=!0,l.date=null,l.compression=null,l.compressionOptions=null,l.comment=null,l.unixPermissions=null,l.dosPermissions=null},{}],6:[function(t,a,l){var o=null;o=typeof Promise<"u"?Promise:t("lie"),a.exports={Promise:o}},{lie:37}],7:[function(t,a,l){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),r=t("./utils"),c=t("./stream/GenericWorker"),d=o?"uint8array":"array";function m(f,v){c.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=v,this.meta={}}l.magic="\b\0",r.inherits(m,c),m.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(d,f.data),!1)},m.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(v){f.push({data:v,meta:f.meta})}},l.compressWorker=function(f){return new m("Deflate",f)},l.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,a,l){function o(h,w){var g,y="";for(g=0;g<w;g++)y+=String.fromCharCode(255&h),h>>>=8;return y}function s(h,w,g,y,x,b){var j,S,A=h.file,T=h.compression,B=b!==d.utf8encode,$=r.transformTo("string",b(A.name)),D=r.transformTo("string",d.utf8encode(A.name)),V=A.comment,Q=r.transformTo("string",b(V)),I=r.transformTo("string",d.utf8encode(V)),M=D.length!==A.name.length,_=I.length!==V.length,F="",te="",H="",ne=A.dir,W=A.date,ee={crc32:0,compressedSize:0,uncompressedSize:0};w&&!g||(ee.crc32=h.crc32,ee.compressedSize=h.compressedSize,ee.uncompressedSize=h.uncompressedSize);var R=0;w&&(R|=8),B||!M&&!_||(R|=2048);var O=0,X=0;ne&&(O|=16),x==="UNIX"?(X=798,O|=function(G,ge){var we=G;return G||(we=ge?16893:33204),(65535&we)<<16}(A.unixPermissions,ne)):(X=20,O|=function(G){return 63&(G||0)}(A.dosPermissions)),j=W.getUTCHours(),j<<=6,j|=W.getUTCMinutes(),j<<=5,j|=W.getUTCSeconds()/2,S=W.getUTCFullYear()-1980,S<<=4,S|=W.getUTCMonth()+1,S<<=5,S|=W.getUTCDate(),M&&(te=o(1,1)+o(m($),4)+D,F+="up"+o(te.length,2)+te),_&&(H=o(1,1)+o(m(Q),4)+I,F+="uc"+o(H.length,2)+H);var q="";return q+=`
\0`,q+=o(R,2),q+=T.magic,q+=o(j,2),q+=o(S,2),q+=o(ee.crc32,4),q+=o(ee.compressedSize,4),q+=o(ee.uncompressedSize,4),q+=o($.length,2),q+=o(F.length,2),{fileRecord:f.LOCAL_FILE_HEADER+q+$+F,dirRecord:f.CENTRAL_FILE_HEADER+o(X,2)+q+o(Q.length,2)+"\0\0\0\0"+o(O,4)+o(y,4)+$+F+Q}}var r=t("../utils"),c=t("../stream/GenericWorker"),d=t("../utf8"),m=t("../crc32"),f=t("../signature");function v(h,w,g,y){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=g,this.encodeFileName=y,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(v,c),v.prototype.push=function(h){var w=h.meta.percent||0,g=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,c.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:g?(w+100*(g-y-1))/g:100}}))},v.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var w=this.streamFiles&&!h.file.dir;if(w){var g=s(h,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(h){this.accumulate=!1;var w=this.streamFiles&&!h.file.dir,g=s(h,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),w)this.push({data:function(y){return f.DATA_DESCRIPTOR+o(y.crc32,4)+o(y.compressedSize,4)+o(y.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var h=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var g=this.bytesWritten-h,y=function(x,b,j,S,A){var T=r.transformTo("string",A(S));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(x,2)+o(x,2)+o(b,4)+o(j,4)+o(T.length,2)+T}(this.dirRecords.length,g,h,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(h){this._sources.push(h);var w=this;return h.on("data",function(g){w.processChunk(g)}),h.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),h.on("error",function(g){w.error(g)}),this},v.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(h){var w=this._sources;if(!c.prototype.error.call(this,h))return!1;for(var g=0;g<w.length;g++)try{w[g].error(h)}catch{}return!0},v.prototype.lock=function(){c.prototype.lock.call(this);for(var h=this._sources,w=0;w<h.length;w++)h[w].lock()},a.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,a,l){var o=t("../compressions"),s=t("./ZipFileWorker");l.generateWorker=function(r,c,d){var m=new s(c.streamFiles,d,c.platform,c.encodeFileName),f=0;try{r.forEach(function(v,h){f++;var w=function(b,j){var S=b||j,A=o[S];if(!A)throw new Error(S+" is not a valid compression method !");return A}(h.options.compression,c.compression),g=h.options.compressionOptions||c.compressionOptions||{},y=h.dir,x=h.date;h._compressWorker(w,g).withStreamInfo("file",{name:v,dir:y,date:x,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(m)}),m.entriesCount=f}catch(v){m.error(v)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,a,l){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var r in this)typeof this[r]!="function"&&(s[r]=this[r]);return s}}(o.prototype=t("./object")).loadAsync=t("./load"),o.support=t("./support"),o.defaults=t("./defaults"),o.version="3.10.1",o.loadAsync=function(s,r){return new o().loadAsync(s,r)},o.external=t("./external"),a.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,a,l){var o=t("./utils"),s=t("./external"),r=t("./utf8"),c=t("./zipEntries"),d=t("./stream/Crc32Probe"),m=t("./nodejsUtils");function f(v){return new s.Promise(function(h,w){var g=v.decompressed.getContentWorker().pipe(new d);g.on("error",function(y){w(y)}).on("end",function(){g.streamInfo.crc32!==v.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}a.exports=function(v,h){var w=this;return h=o.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),m.isNode&&m.isStream(v)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",v,!0,h.optimizedBinaryString,h.base64).then(function(g){var y=new c(h);return y.load(g),y}).then(function(g){var y=[s.Promise.resolve(g)],x=g.files;if(h.checkCRC32)for(var b=0;b<x.length;b++)y.push(f(x[b]));return s.Promise.all(y)}).then(function(g){for(var y=g.shift(),x=y.files,b=0;b<x.length;b++){var j=x[b],S=j.fileNameStr,A=o.resolve(j.fileNameStr);w.file(A,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:h.createFolders}),j.dir||(w.file(A).unsafeOriginalName=S)}return y.zipComment.length&&(w.comment=y.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,a,l){var o=t("../utils"),s=t("../stream/GenericWorker");function r(c,d){s.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(d)}o.inherits(r,s),r.prototype._bindStream=function(c){var d=this;(this._stream=c).pause(),c.on("data",function(m){d.push({data:m,meta:{percent:0}})}).on("error",function(m){d.isPaused?this.generatedError=m:d.error(m)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},r.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,a,l){var o=t("readable-stream").Readable;function s(r,c,d){o.call(this,c),this._helper=r;var m=this;r.on("data",function(f,v){m.push(f)||m._helper.pause(),d&&d(v)}).on("error",function(f){m.emit("error",f)}).on("end",function(){m.push(null)})}t("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},a.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,a,l){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(t,a,l){function o(A,T,B){var $,D=r.getTypeOf(T),V=r.extend(B||{},m);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(A=x(A)),V.createFolders&&($=y(A))&&b.call(this,$,!0);var Q=D==="string"&&V.binary===!1&&V.base64===!1;B&&B.binary!==void 0||(V.binary=!Q),(T instanceof f&&T.uncompressedSize===0||V.dir||!T||T.length===0)&&(V.base64=!1,V.binary=!0,T="",V.compression="STORE",D="string");var I=null;I=T instanceof f||T instanceof c?T:w.isNode&&w.isStream(T)?new g(A,T):r.prepareContent(A,T,V.binary,V.optimizedBinaryString,V.base64);var M=new v(A,I,V);this.files[A]=M}var s=t("./utf8"),r=t("./utils"),c=t("./stream/GenericWorker"),d=t("./stream/StreamHelper"),m=t("./defaults"),f=t("./compressedObject"),v=t("./zipObject"),h=t("./generate"),w=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),y=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var T=A.lastIndexOf("/");return 0<T?A.substring(0,T):""},x=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},b=function(A,T){return T=T!==void 0?T:m.createFolders,A=x(A),this.files[A]||o.call(this,A,null,{dir:!0,createFolders:T}),this.files[A]};function j(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var T,B,$;for(T in this.files)$=this.files[T],(B=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&A(B,$)},filter:function(A){var T=[];return this.forEach(function(B,$){A(B,$)&&T.push($)}),T},file:function(A,T,B){if(arguments.length!==1)return A=this.root+A,o.call(this,A,T,B),this;if(j(A)){var $=A;return this.filter(function(V,Q){return!Q.dir&&$.test(V)})}var D=this.files[this.root+A];return D&&!D.dir?D:null},folder:function(A){if(!A)return this;if(j(A))return this.filter(function(D,V){return V.dir&&A.test(D)});var T=this.root+A,B=b.call(this,T),$=this.clone();return $.root=B.name,$},remove:function(A){A=this.root+A;var T=this.files[A];if(T||(A.slice(-1)!=="/"&&(A+="/"),T=this.files[A]),T&&!T.dir)delete this.files[A];else for(var B=this.filter(function(D,V){return V.name.slice(0,A.length)===A}),$=0;$<B.length;$++)delete this.files[B[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var T,B={};try{if((B=r.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");r.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var $=B.comment||this.comment||"";T=h.generateWorker(this,B,$)}catch(D){(T=new c("error")).error(D)}return new d(T,B.type||"string",B.mimeType)},generateAsync:function(A,T){return this.generateInternalStream(A).accumulate(T)},generateNodeStream:function(A,T){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(T)}};a.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,a,l){a.exports=t("stream")},{stream:void 0}],17:[function(t,a,l){var o=t("./DataReader");function s(r){o.call(this,r);for(var c=0;c<this.data.length;c++)r[c]=255&r[c]}t("../utils").inherits(s,o),s.prototype.byteAt=function(r){return this.data[this.zero+r]},s.prototype.lastIndexOfSignature=function(r){for(var c=r.charCodeAt(0),d=r.charCodeAt(1),m=r.charCodeAt(2),f=r.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===c&&this.data[v+1]===d&&this.data[v+2]===m&&this.data[v+3]===f)return v-this.zero;return-1},s.prototype.readAndCheckSignature=function(r){var c=r.charCodeAt(0),d=r.charCodeAt(1),m=r.charCodeAt(2),f=r.charCodeAt(3),v=this.readData(4);return c===v[0]&&d===v[1]&&m===v[2]&&f===v[3]},s.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},a.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,a,l){var o=t("../utils");function s(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var c,d=0;for(this.checkOffset(r),c=this.index+r-1;c>=this.index;c--)d=(d<<8)+this.byteAt(c);return this.index+=r,d},readString:function(r){return o.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},a.exports=s},{"../utils":32}],19:[function(t,a,l){var o=t("./Uint8ArrayReader");function s(r){o.call(this,r)}t("../utils").inherits(s,o),s.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},a.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,a,l){var o=t("./DataReader");function s(r){o.call(this,r)}t("../utils").inherits(s,o),s.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},s.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},s.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},s.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},a.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,a,l){var o=t("./ArrayReader");function s(r){o.call(this,r)}t("../utils").inherits(s,o),s.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},a.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,a,l){var o=t("../utils"),s=t("../support"),r=t("./ArrayReader"),c=t("./StringReader"),d=t("./NodeBufferReader"),m=t("./Uint8ArrayReader");a.exports=function(f){var v=o.getTypeOf(f);return o.checkSupport(v),v!=="string"||s.uint8array?v==="nodebuffer"?new d(f):s.uint8array?new m(o.transformTo("uint8array",f)):new r(o.transformTo("array",f)):new c(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,a,l){l.LOCAL_FILE_HEADER="PK",l.CENTRAL_FILE_HEADER="PK",l.CENTRAL_DIRECTORY_END="PK",l.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",l.ZIP64_CENTRAL_DIRECTORY_END="PK",l.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,a,l){var o=t("./GenericWorker"),s=t("../utils");function r(c){o.call(this,"ConvertWorker to "+c),this.destType=c}s.inherits(r,o),r.prototype.processChunk=function(c){this.push({data:s.transformTo(this.destType,c.data),meta:c.meta})},a.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(t,a,l){var o=t("./GenericWorker"),s=t("../crc32");function r(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(r,o),r.prototype.processChunk=function(c){this.streamInfo.crc32=s(c.data,this.streamInfo.crc32||0),this.push(c)},a.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,a,l){var o=t("../utils"),s=t("./GenericWorker");function r(c){s.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}o.inherits(r,s),r.prototype.processChunk=function(c){if(c){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+c.data.length}s.prototype.processChunk.call(this,c)},a.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(t,a,l){var o=t("../utils"),s=t("./GenericWorker");function r(c){s.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(m){d.dataIsReady=!0,d.data=m,d.max=m&&m.length||0,d.type=o.getTypeOf(m),d.isPaused||d._tickAndRepeat()},function(m){d.error(m)})}o.inherits(r,s),r.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,d);break;case"uint8array":c=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":c=this.data.slice(this.index,d)}return this.index=d,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(t,a,l){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,r){return this._listeners[s].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,r){if(this._listeners[s])for(var c=0;c<this._listeners[s].length;c++)this._listeners[s][c].call(this,r)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var r=this;return s.on("data",function(c){r.processChunk(c)}),s.on("end",function(){r.end()}),s.on("error",function(c){r.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,r){return this.extraStreamInfo[s]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},a.exports=o},{}],29:[function(t,a,l){var o=t("../utils"),s=t("./ConvertWorker"),r=t("./GenericWorker"),c=t("../base64"),d=t("../support"),m=t("../external"),f=null;if(d.nodestream)try{f=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(w,g){return new m.Promise(function(y,x){var b=[],j=w._internalType,S=w._outputType,A=w._mimeType;w.on("data",function(T,B){b.push(T),g&&g(B)}).on("error",function(T){b=[],x(T)}).on("end",function(){try{var T=function(B,$,D){switch(B){case"blob":return o.newBlob(o.transformTo("arraybuffer",$),D);case"base64":return c.encode($);default:return o.transformTo(B,$)}}(S,function(B,$){var D,V=0,Q=null,I=0;for(D=0;D<$.length;D++)I+=$[D].length;switch(B){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(Q=new Uint8Array(I),D=0;D<$.length;D++)Q.set($[D],V),V+=$[D].length;return Q;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+B+"'")}}(j,b),A);y(T)}catch(B){x(B)}b=[]}).resume()})}function h(w,g,y){var x=g;switch(g){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=g,this._mimeType=y,o.checkSupport(x),this._worker=w.pipe(new s(x)),w.lock()}catch(b){this._worker=new r("error"),this._worker.error(b)}}h.prototype={accumulate:function(w){return v(this,w)},on:function(w,g){var y=this;return w==="data"?this._worker.on(w,function(x){g.call(y,x.data,x.meta)}):this._worker.on(w,function(){o.delay(g,arguments,y)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},w)}},a.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,a,l){if(l.base64=!0,l.array=!0,l.string=!0,l.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",l.nodebuffer=typeof Buffer<"u",l.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")l.blob=!1;else{var o=new ArrayBuffer(0);try{l.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),l.blob=s.getBlob("application/zip").size===0}catch{l.blob=!1}}}try{l.nodestream=!!t("readable-stream").Readable}catch{l.nodestream=!1}},{"readable-stream":16}],31:[function(t,a,l){for(var o=t("./utils"),s=t("./support"),r=t("./nodejsUtils"),c=t("./stream/GenericWorker"),d=new Array(256),m=0;m<256;m++)d[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;d[254]=d[254]=1;function f(){c.call(this,"utf-8 decode"),this.leftOver=null}function v(){c.call(this,"utf-8 encode")}l.utf8encode=function(h){return s.nodebuffer?r.newBufferFrom(h,"utf-8"):function(w){var g,y,x,b,j,S=w.length,A=0;for(b=0;b<S;b++)(64512&(y=w.charCodeAt(b)))==55296&&b+1<S&&(64512&(x=w.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),b++),A+=y<128?1:y<2048?2:y<65536?3:4;for(g=s.uint8array?new Uint8Array(A):new Array(A),b=j=0;j<A;b++)(64512&(y=w.charCodeAt(b)))==55296&&b+1<S&&(64512&(x=w.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),b++),y<128?g[j++]=y:(y<2048?g[j++]=192|y>>>6:(y<65536?g[j++]=224|y>>>12:(g[j++]=240|y>>>18,g[j++]=128|y>>>12&63),g[j++]=128|y>>>6&63),g[j++]=128|63&y);return g}(h)},l.utf8decode=function(h){return s.nodebuffer?o.transformTo("nodebuffer",h).toString("utf-8"):function(w){var g,y,x,b,j=w.length,S=new Array(2*j);for(g=y=0;g<j;)if((x=w[g++])<128)S[y++]=x;else if(4<(b=d[x]))S[y++]=65533,g+=b-1;else{for(x&=b===2?31:b===3?15:7;1<b&&g<j;)x=x<<6|63&w[g++],b--;1<b?S[y++]=65533:x<65536?S[y++]=x:(x-=65536,S[y++]=55296|x>>10&1023,S[y++]=56320|1023&x)}return S.length!==y&&(S.subarray?S=S.subarray(0,y):S.length=y),o.applyFromCharCode(S)}(h=o.transformTo(s.uint8array?"uint8array":"array",h))},o.inherits(f,c),f.prototype.processChunk=function(h){var w=o.transformTo(s.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=w;(w=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),w.set(g,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var y=function(b,j){var S;for((j=j||b.length)>b.length&&(j=b.length),S=j-1;0<=S&&(192&b[S])==128;)S--;return S<0||S===0?j:S+d[b[S]]>j?S:j}(w),x=w;y!==w.length&&(s.uint8array?(x=w.subarray(0,y),this.leftOver=w.subarray(y,w.length)):(x=w.slice(0,y),this.leftOver=w.slice(y,w.length))),this.push({data:l.utf8decode(x),meta:h.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:l.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},l.Utf8DecodeWorker=f,o.inherits(v,c),v.prototype.processChunk=function(h){this.push({data:l.utf8encode(h.data),meta:h.meta})},l.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,a,l){var o=t("./support"),s=t("./base64"),r=t("./nodejsUtils"),c=t("./external");function d(g){return g}function m(g,y){for(var x=0;x<g.length;++x)y[x]=255&g.charCodeAt(x);return y}t("setimmediate"),l.newBlob=function(g,y){l.checkSupport("blob");try{return new Blob([g],{type:y})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(g),x.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(g,y,x){var b=[],j=0,S=g.length;if(S<=x)return String.fromCharCode.apply(null,g);for(;j<S;)y==="array"||y==="nodebuffer"?b.push(String.fromCharCode.apply(null,g.slice(j,Math.min(j+x,S)))):b.push(String.fromCharCode.apply(null,g.subarray(j,Math.min(j+x,S)))),j+=x;return b.join("")},stringifyByChar:function(g){for(var y="",x=0;x<g.length;x++)y+=String.fromCharCode(g[x]);return y},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function v(g){var y=65536,x=l.getTypeOf(g),b=!0;if(x==="uint8array"?b=f.applyCanBeUsed.uint8array:x==="nodebuffer"&&(b=f.applyCanBeUsed.nodebuffer),b)for(;1<y;)try{return f.stringifyByChunk(g,x,y)}catch{y=Math.floor(y/2)}return f.stringifyByChar(g)}function h(g,y){for(var x=0;x<g.length;x++)y[x]=g[x];return y}l.applyFromCharCode=v;var w={};w.string={string:d,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return w.string.uint8array(g).buffer},uint8array:function(g){return m(g,new Uint8Array(g.length))},nodebuffer:function(g){return m(g,r.allocBuffer(g.length))}},w.array={string:v,array:d,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return r.newBufferFrom(g)}},w.arraybuffer={string:function(g){return v(new Uint8Array(g))},array:function(g){return h(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:d,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return r.newBufferFrom(new Uint8Array(g))}},w.uint8array={string:v,array:function(g){return h(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:d,nodebuffer:function(g){return r.newBufferFrom(g)}},w.nodebuffer={string:v,array:function(g){return h(g,new Array(g.length))},arraybuffer:function(g){return w.nodebuffer.uint8array(g).buffer},uint8array:function(g){return h(g,new Uint8Array(g.length))},nodebuffer:d},l.transformTo=function(g,y){if(y=y||"",!g)return y;l.checkSupport(g);var x=l.getTypeOf(y);return w[x][g](y)},l.resolve=function(g){for(var y=g.split("/"),x=[],b=0;b<y.length;b++){var j=y[b];j==="."||j===""&&b!==0&&b!==y.length-1||(j===".."?x.pop():x.push(j))}return x.join("/")},l.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":o.nodebuffer&&r.isBuffer(g)?"nodebuffer":o.uint8array&&g instanceof Uint8Array?"uint8array":o.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},l.checkSupport=function(g){if(!o[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},l.MAX_VALUE_16BITS=65535,l.MAX_VALUE_32BITS=-1,l.pretty=function(g){var y,x,b="";for(x=0;x<(g||"").length;x++)b+="\\x"+((y=g.charCodeAt(x))<16?"0":"")+y.toString(16).toUpperCase();return b},l.delay=function(g,y,x){setImmediate(function(){g.apply(x||null,y||[])})},l.inherits=function(g,y){function x(){}x.prototype=y.prototype,g.prototype=new x},l.extend=function(){var g,y,x={};for(g=0;g<arguments.length;g++)for(y in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],y)&&x[y]===void 0&&(x[y]=arguments[g][y]);return x},l.prepareContent=function(g,y,x,b,j){return c.Promise.resolve(y).then(function(S){return o.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new c.Promise(function(A,T){var B=new FileReader;B.onload=function($){A($.target.result)},B.onerror=function($){T($.target.error)},B.readAsArrayBuffer(S)}):S}).then(function(S){var A=l.getTypeOf(S);return A?(A==="arraybuffer"?S=l.transformTo("uint8array",S):A==="string"&&(j?S=s.decode(S):x&&b!==!0&&(S=function(T){return m(T,o.uint8array?new Uint8Array(T.length):new Array(T.length))}(S))),S):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,a,l){var o=t("./reader/readerFor"),s=t("./utils"),r=t("./signature"),c=t("./zipEntry"),d=t("./support");function m(f){this.files=[],this.loadOptions=f}m.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(v)+", expected "+s.pretty(f)+")")}},isSignature:function(f,v){var h=this.reader.index;this.reader.setIndex(f);var w=this.reader.readString(4)===v;return this.reader.setIndex(h),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),v=d.uint8array?"uint8array":"array",h=s.transformTo(v,f);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,v,h,w=this.zip64EndOfCentralSize-44;0<w;)f=this.reader.readInt(2),v=this.reader.readInt(4),h=this.reader.readData(v),this.zip64ExtensibleData[f]={id:f,length:v,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,v;for(f=0;f<this.files.length;f++)v=this.files[f],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(f=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var v=f;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var w=v-h;if(0<w)this.isSignature(v,r.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(f){this.reader=o(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,a,l){var o=t("./reader/readerFor"),s=t("./utils"),r=t("./compressedObject"),c=t("./crc32"),d=t("./utf8"),m=t("./compressions"),f=t("./support");function v(h,w){this.options=h,this.loadOptions=w}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var w,g;if(h.skip(22),this.fileNameLength=h.readInt(2),g=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(y){for(var x in m)if(Object.prototype.hasOwnProperty.call(m,x)&&m[x].magic===y)return m[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,w,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var w=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(w),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var w,g,y,x=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<x;)w=h.readInt(2),g=h.readInt(2),y=h.readData(g),this.extraFields[w]={id:w,length:g,value:y};h.setIndex(x)},handleUTF8:function(){var h=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var g=s.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var x=s.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var w=o(h.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:d.utf8decode(w.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var w=o(h.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:d.utf8decode(w.readData(h.length-5))}return null}},a.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,a,l){function o(w,g,y){this.name=w,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=g,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var s=t("./stream/StreamHelper"),r=t("./stream/DataWorker"),c=t("./utf8"),d=t("./compressedObject"),m=t("./stream/GenericWorker");o.prototype={internalStream:function(w){var g=null,y="string";try{if(!w)throw new Error("No output type specified.");var x=(y=w.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),g=this._decompressWorker();var b=!this._dataBinary;b&&!x&&(g=g.pipe(new c.Utf8EncodeWorker)),!b&&x&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(j){(g=new m("error")).error(j)}return new s(g,y,"")},async:function(w,g){return this.internalStream(w).accumulate(g)},nodeStream:function(w,g){return this.internalStream(w||"nodebuffer").toNodejsStream(g)},_compressWorker:function(w,g){if(this._data instanceof d&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new c.Utf8EncodeWorker)),d.createWorkerFrom(y,w,g)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof m?this._data:new r(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<f.length;h++)o.prototype[f[h]]=v;a.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,a,l){(function(o){var s,r,c=o.MutationObserver||o.WebKitMutationObserver;if(c){var d=0,m=new c(w),f=o.document.createTextNode("");m.observe(f,{characterData:!0}),s=function(){f.data=d=++d%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var g=o.document.createElement("script");g.onreadystatechange=function(){w(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},o.document.documentElement.appendChild(g)}:function(){setTimeout(w,0)};else{var v=new o.MessageChannel;v.port1.onmessage=w,s=function(){v.port2.postMessage(0)}}var h=[];function w(){var g,y;r=!0;for(var x=h.length;x;){for(y=h,h=[],g=-1;++g<x;)y[g]();x=h.length}r=!1}a.exports=function(g){h.push(g)!==1||r||s()}}).call(this,typeof Le<"u"?Le:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,a,l){var o=t("immediate");function s(){}var r={},c=["REJECTED"],d=["FULFILLED"],m=["PENDING"];function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,x!==s&&g(this,x)}function v(x,b,j){this.promise=x,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function h(x,b,j){o(function(){var S;try{S=b(j)}catch(A){return r.reject(x,A)}S===x?r.reject(x,new TypeError("Cannot resolve promise with itself")):r.resolve(x,S)})}function w(x){var b=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof b=="function")return function(){b.apply(x,arguments)}}function g(x,b){var j=!1;function S(B){j||(j=!0,r.reject(x,B))}function A(B){j||(j=!0,r.resolve(x,B))}var T=y(function(){b(A,S)});T.status==="error"&&S(T.value)}function y(x,b){var j={};try{j.value=x(b),j.status="success"}catch(S){j.status="error",j.value=S}return j}(a.exports=f).prototype.finally=function(x){if(typeof x!="function")return this;var b=this.constructor;return this.then(function(j){return b.resolve(x()).then(function(){return j})},function(j){return b.resolve(x()).then(function(){throw j})})},f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,b){if(typeof x!="function"&&this.state===d||typeof b!="function"&&this.state===c)return this;var j=new this.constructor(s);return this.state!==m?h(j,this.state===d?x:b,this.outcome):this.queue.push(new v(j,x,b)),j},v.prototype.callFulfilled=function(x){r.resolve(this.promise,x)},v.prototype.otherCallFulfilled=function(x){h(this.promise,this.onFulfilled,x)},v.prototype.callRejected=function(x){r.reject(this.promise,x)},v.prototype.otherCallRejected=function(x){h(this.promise,this.onRejected,x)},r.resolve=function(x,b){var j=y(w,b);if(j.status==="error")return r.reject(x,j.value);var S=j.value;if(S)g(x,S);else{x.state=d,x.outcome=b;for(var A=-1,T=x.queue.length;++A<T;)x.queue[A].callFulfilled(b)}return x},r.reject=function(x,b){x.state=c,x.outcome=b;for(var j=-1,S=x.queue.length;++j<S;)x.queue[j].callRejected(b);return x},f.resolve=function(x){return x instanceof this?x:r.resolve(new this(s),x)},f.reject=function(x){var b=new this(s);return r.reject(b,x)},f.all=function(x){var b=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=x.length,S=!1;if(!j)return this.resolve([]);for(var A=new Array(j),T=0,B=-1,$=new this(s);++B<j;)D(x[B],B);return $;function D(V,Q){b.resolve(V).then(function(I){A[Q]=I,++T!==j||S||(S=!0,r.resolve($,A))},function(I){S||(S=!0,r.reject($,I))})}},f.race=function(x){var b=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=x.length,S=!1;if(!j)return this.resolve([]);for(var A=-1,T=new this(s);++A<j;)B=x[A],b.resolve(B).then(function($){S||(S=!0,r.resolve(T,$))},function($){S||(S=!0,r.reject(T,$))});var B;return T}},{immediate:36}],38:[function(t,a,l){var o={};(0,t("./lib/utils/common").assign)(o,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),a.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,a,l){var o=t("./zlib/deflate"),s=t("./utils/common"),r=t("./utils/strings"),c=t("./zlib/messages"),d=t("./zlib/zstream"),m=Object.prototype.toString,f=0,v=-1,h=0,w=8;function g(x){if(!(this instanceof g))return new g(x);this.options=s.assign({level:v,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},x||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var j=o.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(j!==f)throw new Error(c[j]);if(b.header&&o.deflateSetHeader(this.strm,b.header),b.dictionary){var S;if(S=typeof b.dictionary=="string"?r.string2buf(b.dictionary):m.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(j=o.deflateSetDictionary(this.strm,S))!==f)throw new Error(c[j]);this._dict_set=!0}}function y(x,b){var j=new g(b);if(j.push(x,!0),j.err)throw j.msg||c[j.err];return j.result}g.prototype.push=function(x,b){var j,S,A=this.strm,T=this.options.chunkSize;if(this.ended)return!1;S=b===~~b?b:b===!0?4:0,typeof x=="string"?A.input=r.string2buf(x):m.call(x)==="[object ArrayBuffer]"?A.input=new Uint8Array(x):A.input=x,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new s.Buf8(T),A.next_out=0,A.avail_out=T),(j=o.deflate(A,S))!==1&&j!==f)return this.onEnd(j),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(s.shrinkBuf(A.output,A.next_out))):this.onData(s.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&j!==1);return S===4?(j=o.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===f):S!==2||(this.onEnd(f),!(A.avail_out=0))},g.prototype.onData=function(x){this.chunks.push(x)},g.prototype.onEnd=function(x){x===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},l.Deflate=g,l.deflate=y,l.deflateRaw=function(x,b){return(b=b||{}).raw=!0,y(x,b)},l.gzip=function(x,b){return(b=b||{}).gzip=!0,y(x,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,a,l){var o=t("./zlib/inflate"),s=t("./utils/common"),r=t("./utils/strings"),c=t("./zlib/constants"),d=t("./zlib/messages"),m=t("./zlib/zstream"),f=t("./zlib/gzheader"),v=Object.prototype.toString;function h(g){if(!(this instanceof h))return new h(g);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},g||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||g&&g.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var x=o.inflateInit2(this.strm,y.windowBits);if(x!==c.Z_OK)throw new Error(d[x]);this.header=new f,o.inflateGetHeader(this.strm,this.header)}function w(g,y){var x=new h(y);if(x.push(g,!0),x.err)throw x.msg||d[x.err];return x.result}h.prototype.push=function(g,y){var x,b,j,S,A,T,B=this.strm,$=this.options.chunkSize,D=this.options.dictionary,V=!1;if(this.ended)return!1;b=y===~~y?y:y===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?B.input=r.binstring2buf(g):v.call(g)==="[object ArrayBuffer]"?B.input=new Uint8Array(g):B.input=g,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new s.Buf8($),B.next_out=0,B.avail_out=$),(x=o.inflate(B,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&D&&(T=typeof D=="string"?r.string2buf(D):v.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,x=o.inflateSetDictionary(this.strm,T)),x===c.Z_BUF_ERROR&&V===!0&&(x=c.Z_OK,V=!1),x!==c.Z_STREAM_END&&x!==c.Z_OK)return this.onEnd(x),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&x!==c.Z_STREAM_END&&(B.avail_in!==0||b!==c.Z_FINISH&&b!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=r.utf8border(B.output,B.next_out),S=B.next_out-j,A=r.buf2string(B.output,j),B.next_out=S,B.avail_out=$-S,S&&s.arraySet(B.output,B.output,j,S,0),this.onData(A)):this.onData(s.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(V=!0)}while((0<B.avail_in||B.avail_out===0)&&x!==c.Z_STREAM_END);return x===c.Z_STREAM_END&&(b=c.Z_FINISH),b===c.Z_FINISH?(x=o.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===c.Z_OK):b!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(B.avail_out=0))},h.prototype.onData=function(g){this.chunks.push(g)},h.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},l.Inflate=h,l.inflate=w,l.inflateRaw=function(g,y){return(y=y||{}).raw=!0,w(g,y)},l.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,a,l){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";l.assign=function(c){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var m=d.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var f in m)m.hasOwnProperty(f)&&(c[f]=m[f])}}return c},l.shrinkBuf=function(c,d){return c.length===d?c:c.subarray?c.subarray(0,d):(c.length=d,c)};var s={arraySet:function(c,d,m,f,v){if(d.subarray&&c.subarray)c.set(d.subarray(m,m+f),v);else for(var h=0;h<f;h++)c[v+h]=d[m+h]},flattenChunks:function(c){var d,m,f,v,h,w;for(d=f=0,m=c.length;d<m;d++)f+=c[d].length;for(w=new Uint8Array(f),d=v=0,m=c.length;d<m;d++)h=c[d],w.set(h,v),v+=h.length;return w}},r={arraySet:function(c,d,m,f,v){for(var h=0;h<f;h++)c[v+h]=d[m+h]},flattenChunks:function(c){return[].concat.apply([],c)}};l.setTyped=function(c){c?(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,s)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,r))},l.setTyped(o)},{}],42:[function(t,a,l){var o=t("./common"),s=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var c=new o.Buf8(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function m(f,v){if(v<65537&&(f.subarray&&r||!f.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(f,v));for(var h="",w=0;w<v;w++)h+=String.fromCharCode(f[w]);return h}c[254]=c[254]=1,l.string2buf=function(f){var v,h,w,g,y,x=f.length,b=0;for(g=0;g<x;g++)(64512&(h=f.charCodeAt(g)))==55296&&g+1<x&&(64512&(w=f.charCodeAt(g+1)))==56320&&(h=65536+(h-55296<<10)+(w-56320),g++),b+=h<128?1:h<2048?2:h<65536?3:4;for(v=new o.Buf8(b),g=y=0;y<b;g++)(64512&(h=f.charCodeAt(g)))==55296&&g+1<x&&(64512&(w=f.charCodeAt(g+1)))==56320&&(h=65536+(h-55296<<10)+(w-56320),g++),h<128?v[y++]=h:(h<2048?v[y++]=192|h>>>6:(h<65536?v[y++]=224|h>>>12:(v[y++]=240|h>>>18,v[y++]=128|h>>>12&63),v[y++]=128|h>>>6&63),v[y++]=128|63&h);return v},l.buf2binstring=function(f){return m(f,f.length)},l.binstring2buf=function(f){for(var v=new o.Buf8(f.length),h=0,w=v.length;h<w;h++)v[h]=f.charCodeAt(h);return v},l.buf2string=function(f,v){var h,w,g,y,x=v||f.length,b=new Array(2*x);for(h=w=0;h<x;)if((g=f[h++])<128)b[w++]=g;else if(4<(y=c[g]))b[w++]=65533,h+=y-1;else{for(g&=y===2?31:y===3?15:7;1<y&&h<x;)g=g<<6|63&f[h++],y--;1<y?b[w++]=65533:g<65536?b[w++]=g:(g-=65536,b[w++]=55296|g>>10&1023,b[w++]=56320|1023&g)}return m(b,w)},l.utf8border=function(f,v){var h;for((v=v||f.length)>f.length&&(v=f.length),h=v-1;0<=h&&(192&f[h])==128;)h--;return h<0||h===0?v:h+c[f[h]]>v?h:v}},{"./common":41}],43:[function(t,a,l){a.exports=function(o,s,r,c){for(var d=65535&o|0,m=o>>>16&65535|0,f=0;r!==0;){for(r-=f=2e3<r?2e3:r;m=m+(d=d+s[c++]|0)|0,--f;);d%=65521,m%=65521}return d|m<<16|0}},{}],44:[function(t,a,l){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,a,l){var o=function(){for(var s,r=[],c=0;c<256;c++){s=c;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;r[c]=s}return r}();a.exports=function(s,r,c,d){var m=o,f=d+c;s^=-1;for(var v=d;v<f;v++)s=s>>>8^m[255&(s^r[v])];return-1^s}},{}],46:[function(t,a,l){var o,s=t("../utils/common"),r=t("./trees"),c=t("./adler32"),d=t("./crc32"),m=t("./messages"),f=0,v=4,h=0,w=-2,g=-1,y=4,x=2,b=8,j=9,S=286,A=30,T=19,B=2*S+1,$=15,D=3,V=258,Q=V+D+1,I=42,M=113,_=1,F=2,te=3,H=4;function ne(u,P){return u.msg=m[P],P}function W(u){return(u<<1)-(4<u?9:0)}function ee(u){for(var P=u.length;0<=--P;)u[P]=0}function R(u){var P=u.state,L=P.pending;L>u.avail_out&&(L=u.avail_out),L!==0&&(s.arraySet(u.output,P.pending_buf,P.pending_out,L,u.next_out),u.next_out+=L,P.pending_out+=L,u.total_out+=L,u.avail_out-=L,P.pending-=L,P.pending===0&&(P.pending_out=0))}function O(u,P){r._tr_flush_block(u,0<=u.block_start?u.block_start:-1,u.strstart-u.block_start,P),u.block_start=u.strstart,R(u.strm)}function X(u,P){u.pending_buf[u.pending++]=P}function q(u,P){u.pending_buf[u.pending++]=P>>>8&255,u.pending_buf[u.pending++]=255&P}function G(u,P){var L,C,k=u.max_chain_length,z=u.strstart,U=u.prev_length,p=u.nice_match,N=u.strstart>u.w_size-Q?u.strstart-(u.w_size-Q):0,Z=u.window,J=u.w_mask,K=u.prev,Y=u.strstart+V,he=Z[z+U-1],se=Z[z+U];u.prev_length>=u.good_match&&(k>>=2),p>u.lookahead&&(p=u.lookahead);do if(Z[(L=P)+U]===se&&Z[L+U-1]===he&&Z[L]===Z[z]&&Z[++L]===Z[z+1]){z+=2,L++;do;while(Z[++z]===Z[++L]&&Z[++z]===Z[++L]&&Z[++z]===Z[++L]&&Z[++z]===Z[++L]&&Z[++z]===Z[++L]&&Z[++z]===Z[++L]&&Z[++z]===Z[++L]&&Z[++z]===Z[++L]&&z<Y);if(C=V-(Y-z),z=Y-V,U<C){if(u.match_start=P,p<=(U=C))break;he=Z[z+U-1],se=Z[z+U]}}while((P=K[P&J])>N&&--k!=0);return U<=u.lookahead?U:u.lookahead}function ge(u){var P,L,C,k,z,U,p,N,Z,J,K=u.w_size;do{if(k=u.window_size-u.lookahead-u.strstart,u.strstart>=K+(K-Q)){for(s.arraySet(u.window,u.window,K,K,0),u.match_start-=K,u.strstart-=K,u.block_start-=K,P=L=u.hash_size;C=u.head[--P],u.head[P]=K<=C?C-K:0,--L;);for(P=L=K;C=u.prev[--P],u.prev[P]=K<=C?C-K:0,--L;);k+=K}if(u.strm.avail_in===0)break;if(U=u.strm,p=u.window,N=u.strstart+u.lookahead,Z=k,J=void 0,J=U.avail_in,Z<J&&(J=Z),L=J===0?0:(U.avail_in-=J,s.arraySet(p,U.input,U.next_in,J,N),U.state.wrap===1?U.adler=c(U.adler,p,J,N):U.state.wrap===2&&(U.adler=d(U.adler,p,J,N)),U.next_in+=J,U.total_in+=J,J),u.lookahead+=L,u.lookahead+u.insert>=D)for(z=u.strstart-u.insert,u.ins_h=u.window[z],u.ins_h=(u.ins_h<<u.hash_shift^u.window[z+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[z+D-1])&u.hash_mask,u.prev[z&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=z,z++,u.insert--,!(u.lookahead+u.insert<D)););}while(u.lookahead<Q&&u.strm.avail_in!==0)}function we(u,P){for(var L,C;;){if(u.lookahead<Q){if(ge(u),u.lookahead<Q&&P===f)return _;if(u.lookahead===0)break}if(L=0,u.lookahead>=D&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+D-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),L!==0&&u.strstart-L<=u.w_size-Q&&(u.match_length=G(u,L)),u.match_length>=D)if(C=r._tr_tally(u,u.strstart-u.match_start,u.match_length-D),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=D){for(u.match_length--;u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+D-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart,--u.match_length!=0;);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else C=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(C&&(O(u,!1),u.strm.avail_out===0))return _}return u.insert=u.strstart<D-1?u.strstart:D-1,P===v?(O(u,!0),u.strm.avail_out===0?te:H):u.last_lit&&(O(u,!1),u.strm.avail_out===0)?_:F}function ae(u,P){for(var L,C,k;;){if(u.lookahead<Q){if(ge(u),u.lookahead<Q&&P===f)return _;if(u.lookahead===0)break}if(L=0,u.lookahead>=D&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+D-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=D-1,L!==0&&u.prev_length<u.max_lazy_match&&u.strstart-L<=u.w_size-Q&&(u.match_length=G(u,L),u.match_length<=5&&(u.strategy===1||u.match_length===D&&4096<u.strstart-u.match_start)&&(u.match_length=D-1)),u.prev_length>=D&&u.match_length<=u.prev_length){for(k=u.strstart+u.lookahead-D,C=r._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-D),u.lookahead-=u.prev_length-1,u.prev_length-=2;++u.strstart<=k&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+D-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),--u.prev_length!=0;);if(u.match_available=0,u.match_length=D-1,u.strstart++,C&&(O(u,!1),u.strm.avail_out===0))return _}else if(u.match_available){if((C=r._tr_tally(u,0,u.window[u.strstart-1]))&&O(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return _}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(C=r._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<D-1?u.strstart:D-1,P===v?(O(u,!0),u.strm.avail_out===0?te:H):u.last_lit&&(O(u,!1),u.strm.avail_out===0)?_:F}function de(u,P,L,C,k){this.good_length=u,this.max_lazy=P,this.nice_length=L,this.max_chain=C,this.func=k}function xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*B),this.dyn_dtree=new s.Buf16(2*(2*A+1)),this.bl_tree=new s.Buf16(2*(2*T+1)),ee(this.dyn_ltree),ee(this.dyn_dtree),ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16($+1),this.heap=new s.Buf16(2*S+1),ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*S+1),ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ve(u){var P;return u&&u.state?(u.total_in=u.total_out=0,u.data_type=x,(P=u.state).pending=0,P.pending_out=0,P.wrap<0&&(P.wrap=-P.wrap),P.status=P.wrap?I:M,u.adler=P.wrap===2?0:1,P.last_flush=f,r._tr_init(P),h):ne(u,w)}function Oe(u){var P=ve(u);return P===h&&function(L){L.window_size=2*L.w_size,ee(L.head),L.max_lazy_match=o[L.level].max_lazy,L.good_match=o[L.level].good_length,L.nice_match=o[L.level].nice_length,L.max_chain_length=o[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=D-1,L.match_available=0,L.ins_h=0}(u.state),P}function Ne(u,P,L,C,k,z){if(!u)return w;var U=1;if(P===g&&(P=6),C<0?(U=0,C=-C):15<C&&(U=2,C-=16),k<1||j<k||L!==b||C<8||15<C||P<0||9<P||z<0||y<z)return ne(u,w);C===8&&(C=9);var p=new xe;return(u.state=p).strm=u,p.wrap=U,p.gzhead=null,p.w_bits=C,p.w_size=1<<p.w_bits,p.w_mask=p.w_size-1,p.hash_bits=k+7,p.hash_size=1<<p.hash_bits,p.hash_mask=p.hash_size-1,p.hash_shift=~~((p.hash_bits+D-1)/D),p.window=new s.Buf8(2*p.w_size),p.head=new s.Buf16(p.hash_size),p.prev=new s.Buf16(p.w_size),p.lit_bufsize=1<<k+6,p.pending_buf_size=4*p.lit_bufsize,p.pending_buf=new s.Buf8(p.pending_buf_size),p.d_buf=1*p.lit_bufsize,p.l_buf=3*p.lit_bufsize,p.level=P,p.strategy=z,p.method=L,Oe(u)}o=[new de(0,0,0,0,function(u,P){var L=65535;for(L>u.pending_buf_size-5&&(L=u.pending_buf_size-5);;){if(u.lookahead<=1){if(ge(u),u.lookahead===0&&P===f)return _;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var C=u.block_start+L;if((u.strstart===0||u.strstart>=C)&&(u.lookahead=u.strstart-C,u.strstart=C,O(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-Q&&(O(u,!1),u.strm.avail_out===0))return _}return u.insert=0,P===v?(O(u,!0),u.strm.avail_out===0?te:H):(u.strstart>u.block_start&&(O(u,!1),u.strm.avail_out),_)}),new de(4,4,8,4,we),new de(4,5,16,8,we),new de(4,6,32,32,we),new de(4,4,16,16,ae),new de(8,16,32,32,ae),new de(8,16,128,128,ae),new de(8,32,128,256,ae),new de(32,128,258,1024,ae),new de(32,258,258,4096,ae)],l.deflateInit=function(u,P){return Ne(u,P,b,15,8,0)},l.deflateInit2=Ne,l.deflateReset=Oe,l.deflateResetKeep=ve,l.deflateSetHeader=function(u,P){return u&&u.state?u.state.wrap!==2?w:(u.state.gzhead=P,h):w},l.deflate=function(u,P){var L,C,k,z;if(!u||!u.state||5<P||P<0)return u?ne(u,w):w;if(C=u.state,!u.output||!u.input&&u.avail_in!==0||C.status===666&&P!==v)return ne(u,u.avail_out===0?-5:w);if(C.strm=u,L=C.last_flush,C.last_flush=P,C.status===I)if(C.wrap===2)u.adler=0,X(C,31),X(C,139),X(C,8),C.gzhead?(X(C,(C.gzhead.text?1:0)+(C.gzhead.hcrc?2:0)+(C.gzhead.extra?4:0)+(C.gzhead.name?8:0)+(C.gzhead.comment?16:0)),X(C,255&C.gzhead.time),X(C,C.gzhead.time>>8&255),X(C,C.gzhead.time>>16&255),X(C,C.gzhead.time>>24&255),X(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),X(C,255&C.gzhead.os),C.gzhead.extra&&C.gzhead.extra.length&&(X(C,255&C.gzhead.extra.length),X(C,C.gzhead.extra.length>>8&255)),C.gzhead.hcrc&&(u.adler=d(u.adler,C.pending_buf,C.pending,0)),C.gzindex=0,C.status=69):(X(C,0),X(C,0),X(C,0),X(C,0),X(C,0),X(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),X(C,3),C.status=M);else{var U=b+(C.w_bits-8<<4)<<8;U|=(2<=C.strategy||C.level<2?0:C.level<6?1:C.level===6?2:3)<<6,C.strstart!==0&&(U|=32),U+=31-U%31,C.status=M,q(C,U),C.strstart!==0&&(q(C,u.adler>>>16),q(C,65535&u.adler)),u.adler=1}if(C.status===69)if(C.gzhead.extra){for(k=C.pending;C.gzindex<(65535&C.gzhead.extra.length)&&(C.pending!==C.pending_buf_size||(C.gzhead.hcrc&&C.pending>k&&(u.adler=d(u.adler,C.pending_buf,C.pending-k,k)),R(u),k=C.pending,C.pending!==C.pending_buf_size));)X(C,255&C.gzhead.extra[C.gzindex]),C.gzindex++;C.gzhead.hcrc&&C.pending>k&&(u.adler=d(u.adler,C.pending_buf,C.pending-k,k)),C.gzindex===C.gzhead.extra.length&&(C.gzindex=0,C.status=73)}else C.status=73;if(C.status===73)if(C.gzhead.name){k=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>k&&(u.adler=d(u.adler,C.pending_buf,C.pending-k,k)),R(u),k=C.pending,C.pending===C.pending_buf_size)){z=1;break}z=C.gzindex<C.gzhead.name.length?255&C.gzhead.name.charCodeAt(C.gzindex++):0,X(C,z)}while(z!==0);C.gzhead.hcrc&&C.pending>k&&(u.adler=d(u.adler,C.pending_buf,C.pending-k,k)),z===0&&(C.gzindex=0,C.status=91)}else C.status=91;if(C.status===91)if(C.gzhead.comment){k=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>k&&(u.adler=d(u.adler,C.pending_buf,C.pending-k,k)),R(u),k=C.pending,C.pending===C.pending_buf_size)){z=1;break}z=C.gzindex<C.gzhead.comment.length?255&C.gzhead.comment.charCodeAt(C.gzindex++):0,X(C,z)}while(z!==0);C.gzhead.hcrc&&C.pending>k&&(u.adler=d(u.adler,C.pending_buf,C.pending-k,k)),z===0&&(C.status=103)}else C.status=103;if(C.status===103&&(C.gzhead.hcrc?(C.pending+2>C.pending_buf_size&&R(u),C.pending+2<=C.pending_buf_size&&(X(C,255&u.adler),X(C,u.adler>>8&255),u.adler=0,C.status=M)):C.status=M),C.pending!==0){if(R(u),u.avail_out===0)return C.last_flush=-1,h}else if(u.avail_in===0&&W(P)<=W(L)&&P!==v)return ne(u,-5);if(C.status===666&&u.avail_in!==0)return ne(u,-5);if(u.avail_in!==0||C.lookahead!==0||P!==f&&C.status!==666){var p=C.strategy===2?function(N,Z){for(var J;;){if(N.lookahead===0&&(ge(N),N.lookahead===0)){if(Z===f)return _;break}if(N.match_length=0,J=r._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,J&&(O(N,!1),N.strm.avail_out===0))return _}return N.insert=0,Z===v?(O(N,!0),N.strm.avail_out===0?te:H):N.last_lit&&(O(N,!1),N.strm.avail_out===0)?_:F}(C,P):C.strategy===3?function(N,Z){for(var J,K,Y,he,se=N.window;;){if(N.lookahead<=V){if(ge(N),N.lookahead<=V&&Z===f)return _;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=D&&0<N.strstart&&(K=se[Y=N.strstart-1])===se[++Y]&&K===se[++Y]&&K===se[++Y]){he=N.strstart+V;do;while(K===se[++Y]&&K===se[++Y]&&K===se[++Y]&&K===se[++Y]&&K===se[++Y]&&K===se[++Y]&&K===se[++Y]&&K===se[++Y]&&Y<he);N.match_length=V-(he-Y),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=D?(J=r._tr_tally(N,1,N.match_length-D),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(J=r._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),J&&(O(N,!1),N.strm.avail_out===0))return _}return N.insert=0,Z===v?(O(N,!0),N.strm.avail_out===0?te:H):N.last_lit&&(O(N,!1),N.strm.avail_out===0)?_:F}(C,P):o[C.level].func(C,P);if(p!==te&&p!==H||(C.status=666),p===_||p===te)return u.avail_out===0&&(C.last_flush=-1),h;if(p===F&&(P===1?r._tr_align(C):P!==5&&(r._tr_stored_block(C,0,0,!1),P===3&&(ee(C.head),C.lookahead===0&&(C.strstart=0,C.block_start=0,C.insert=0))),R(u),u.avail_out===0))return C.last_flush=-1,h}return P!==v?h:C.wrap<=0?1:(C.wrap===2?(X(C,255&u.adler),X(C,u.adler>>8&255),X(C,u.adler>>16&255),X(C,u.adler>>24&255),X(C,255&u.total_in),X(C,u.total_in>>8&255),X(C,u.total_in>>16&255),X(C,u.total_in>>24&255)):(q(C,u.adler>>>16),q(C,65535&u.adler)),R(u),0<C.wrap&&(C.wrap=-C.wrap),C.pending!==0?h:1)},l.deflateEnd=function(u){var P;return u&&u.state?(P=u.state.status)!==I&&P!==69&&P!==73&&P!==91&&P!==103&&P!==M&&P!==666?ne(u,w):(u.state=null,P===M?ne(u,-3):h):w},l.deflateSetDictionary=function(u,P){var L,C,k,z,U,p,N,Z,J=P.length;if(!u||!u.state||(z=(L=u.state).wrap)===2||z===1&&L.status!==I||L.lookahead)return w;for(z===1&&(u.adler=c(u.adler,P,J,0)),L.wrap=0,J>=L.w_size&&(z===0&&(ee(L.head),L.strstart=0,L.block_start=0,L.insert=0),Z=new s.Buf8(L.w_size),s.arraySet(Z,P,J-L.w_size,L.w_size,0),P=Z,J=L.w_size),U=u.avail_in,p=u.next_in,N=u.input,u.avail_in=J,u.next_in=0,u.input=P,ge(L);L.lookahead>=D;){for(C=L.strstart,k=L.lookahead-(D-1);L.ins_h=(L.ins_h<<L.hash_shift^L.window[C+D-1])&L.hash_mask,L.prev[C&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=C,C++,--k;);L.strstart=C,L.lookahead=D-1,ge(L)}return L.strstart+=L.lookahead,L.block_start=L.strstart,L.insert=L.lookahead,L.lookahead=0,L.match_length=L.prev_length=D-1,L.match_available=0,u.next_in=p,u.input=N,u.avail_in=U,L.wrap=z,h},l.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,a,l){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,a,l){a.exports=function(o,s){var r,c,d,m,f,v,h,w,g,y,x,b,j,S,A,T,B,$,D,V,Q,I,M,_,F;r=o.state,c=o.next_in,_=o.input,d=c+(o.avail_in-5),m=o.next_out,F=o.output,f=m-(s-o.avail_out),v=m+(o.avail_out-257),h=r.dmax,w=r.wsize,g=r.whave,y=r.wnext,x=r.window,b=r.hold,j=r.bits,S=r.lencode,A=r.distcode,T=(1<<r.lenbits)-1,B=(1<<r.distbits)-1;e:do{j<15&&(b+=_[c++]<<j,j+=8,b+=_[c++]<<j,j+=8),$=S[b&T];t:for(;;){if(b>>>=D=$>>>24,j-=D,(D=$>>>16&255)===0)F[m++]=65535&$;else{if(!(16&D)){if(!(64&D)){$=S[(65535&$)+(b&(1<<D)-1)];continue t}if(32&D){r.mode=12;break e}o.msg="invalid literal/length code",r.mode=30;break e}V=65535&$,(D&=15)&&(j<D&&(b+=_[c++]<<j,j+=8),V+=b&(1<<D)-1,b>>>=D,j-=D),j<15&&(b+=_[c++]<<j,j+=8,b+=_[c++]<<j,j+=8),$=A[b&B];n:for(;;){if(b>>>=D=$>>>24,j-=D,!(16&(D=$>>>16&255))){if(!(64&D)){$=A[(65535&$)+(b&(1<<D)-1)];continue n}o.msg="invalid distance code",r.mode=30;break e}if(Q=65535&$,j<(D&=15)&&(b+=_[c++]<<j,(j+=8)<D&&(b+=_[c++]<<j,j+=8)),h<(Q+=b&(1<<D)-1)){o.msg="invalid distance too far back",r.mode=30;break e}if(b>>>=D,j-=D,(D=m-f)<Q){if(g<(D=Q-D)&&r.sane){o.msg="invalid distance too far back",r.mode=30;break e}if(M=x,(I=0)===y){if(I+=w-D,D<V){for(V-=D;F[m++]=x[I++],--D;);I=m-Q,M=F}}else if(y<D){if(I+=w+y-D,(D-=y)<V){for(V-=D;F[m++]=x[I++],--D;);if(I=0,y<V){for(V-=D=y;F[m++]=x[I++],--D;);I=m-Q,M=F}}}else if(I+=y-D,D<V){for(V-=D;F[m++]=x[I++],--D;);I=m-Q,M=F}for(;2<V;)F[m++]=M[I++],F[m++]=M[I++],F[m++]=M[I++],V-=3;V&&(F[m++]=M[I++],1<V&&(F[m++]=M[I++]))}else{for(I=m-Q;F[m++]=F[I++],F[m++]=F[I++],F[m++]=F[I++],2<(V-=3););V&&(F[m++]=F[I++],1<V&&(F[m++]=F[I++]))}break}}break}}while(c<d&&m<v);c-=V=j>>3,b&=(1<<(j-=V<<3))-1,o.next_in=c,o.next_out=m,o.avail_in=c<d?d-c+5:5-(c-d),o.avail_out=m<v?v-m+257:257-(m-v),r.hold=b,r.bits=j}},{}],49:[function(t,a,l){var o=t("../utils/common"),s=t("./adler32"),r=t("./crc32"),c=t("./inffast"),d=t("./inftrees"),m=1,f=2,v=0,h=-2,w=1,g=852,y=592;function x(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(I){var M;return I&&I.state?(M=I.state,I.total_in=I.total_out=M.total=0,I.msg="",M.wrap&&(I.adler=1&M.wrap),M.mode=w,M.last=0,M.havedict=0,M.dmax=32768,M.head=null,M.hold=0,M.bits=0,M.lencode=M.lendyn=new o.Buf32(g),M.distcode=M.distdyn=new o.Buf32(y),M.sane=1,M.back=-1,v):h}function S(I){var M;return I&&I.state?((M=I.state).wsize=0,M.whave=0,M.wnext=0,j(I)):h}function A(I,M){var _,F;return I&&I.state?(F=I.state,M<0?(_=0,M=-M):(_=1+(M>>4),M<48&&(M&=15)),M&&(M<8||15<M)?h:(F.window!==null&&F.wbits!==M&&(F.window=null),F.wrap=_,F.wbits=M,S(I))):h}function T(I,M){var _,F;return I?(F=new b,(I.state=F).window=null,(_=A(I,M))!==v&&(I.state=null),_):h}var B,$,D=!0;function V(I){if(D){var M;for(B=new o.Buf32(512),$=new o.Buf32(32),M=0;M<144;)I.lens[M++]=8;for(;M<256;)I.lens[M++]=9;for(;M<280;)I.lens[M++]=7;for(;M<288;)I.lens[M++]=8;for(d(m,I.lens,0,288,B,0,I.work,{bits:9}),M=0;M<32;)I.lens[M++]=5;d(f,I.lens,0,32,$,0,I.work,{bits:5}),D=!1}I.lencode=B,I.lenbits=9,I.distcode=$,I.distbits=5}function Q(I,M,_,F){var te,H=I.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new o.Buf8(H.wsize)),F>=H.wsize?(o.arraySet(H.window,M,_-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(F<(te=H.wsize-H.wnext)&&(te=F),o.arraySet(H.window,M,_-F,te,H.wnext),(F-=te)?(o.arraySet(H.window,M,_-F,F,0),H.wnext=F,H.whave=H.wsize):(H.wnext+=te,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=te))),0}l.inflateReset=S,l.inflateReset2=A,l.inflateResetKeep=j,l.inflateInit=function(I){return T(I,15)},l.inflateInit2=T,l.inflate=function(I,M){var _,F,te,H,ne,W,ee,R,O,X,q,G,ge,we,ae,de,xe,ve,Oe,Ne,u,P,L,C,k=0,z=new o.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return h;(_=I.state).mode===12&&(_.mode=13),ne=I.next_out,te=I.output,ee=I.avail_out,H=I.next_in,F=I.input,W=I.avail_in,R=_.hold,O=_.bits,X=W,q=ee,P=v;e:for(;;)switch(_.mode){case w:if(_.wrap===0){_.mode=13;break}for(;O<16;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}if(2&_.wrap&&R===35615){z[_.check=0]=255&R,z[1]=R>>>8&255,_.check=r(_.check,z,2,0),O=R=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&R)<<8)+(R>>8))%31){I.msg="incorrect header check",_.mode=30;break}if((15&R)!=8){I.msg="unknown compression method",_.mode=30;break}if(O-=4,u=8+(15&(R>>>=4)),_.wbits===0)_.wbits=u;else if(u>_.wbits){I.msg="invalid window size",_.mode=30;break}_.dmax=1<<u,I.adler=_.check=1,_.mode=512&R?10:12,O=R=0;break;case 2:for(;O<16;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}if(_.flags=R,(255&_.flags)!=8){I.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){I.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=R>>8&1),512&_.flags&&(z[0]=255&R,z[1]=R>>>8&255,_.check=r(_.check,z,2,0)),O=R=0,_.mode=3;case 3:for(;O<32;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}_.head&&(_.head.time=R),512&_.flags&&(z[0]=255&R,z[1]=R>>>8&255,z[2]=R>>>16&255,z[3]=R>>>24&255,_.check=r(_.check,z,4,0)),O=R=0,_.mode=4;case 4:for(;O<16;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}_.head&&(_.head.xflags=255&R,_.head.os=R>>8),512&_.flags&&(z[0]=255&R,z[1]=R>>>8&255,_.check=r(_.check,z,2,0)),O=R=0,_.mode=5;case 5:if(1024&_.flags){for(;O<16;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}_.length=R,_.head&&(_.head.extra_len=R),512&_.flags&&(z[0]=255&R,z[1]=R>>>8&255,_.check=r(_.check,z,2,0)),O=R=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(W<(G=_.length)&&(G=W),G&&(_.head&&(u=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),o.arraySet(_.head.extra,F,H,G,u)),512&_.flags&&(_.check=r(_.check,F,G,H)),W-=G,H+=G,_.length-=G),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(W===0)break e;for(G=0;u=F[H+G++],_.head&&u&&_.length<65536&&(_.head.name+=String.fromCharCode(u)),u&&G<W;);if(512&_.flags&&(_.check=r(_.check,F,G,H)),W-=G,H+=G,u)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(W===0)break e;for(G=0;u=F[H+G++],_.head&&u&&_.length<65536&&(_.head.comment+=String.fromCharCode(u)),u&&G<W;);if(512&_.flags&&(_.check=r(_.check,F,G,H)),W-=G,H+=G,u)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;O<16;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}if(R!==(65535&_.check)){I.msg="header crc mismatch",_.mode=30;break}O=R=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),I.adler=_.check=0,_.mode=12;break;case 10:for(;O<32;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}I.adler=_.check=x(R),O=R=0,_.mode=11;case 11:if(_.havedict===0)return I.next_out=ne,I.avail_out=ee,I.next_in=H,I.avail_in=W,_.hold=R,_.bits=O,2;I.adler=_.check=1,_.mode=12;case 12:if(M===5||M===6)break e;case 13:if(_.last){R>>>=7&O,O-=7&O,_.mode=27;break}for(;O<3;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}switch(_.last=1&R,O-=1,3&(R>>>=1)){case 0:_.mode=14;break;case 1:if(V(_),_.mode=20,M!==6)break;R>>>=2,O-=2;break e;case 2:_.mode=17;break;case 3:I.msg="invalid block type",_.mode=30}R>>>=2,O-=2;break;case 14:for(R>>>=7&O,O-=7&O;O<32;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}if((65535&R)!=(R>>>16^65535)){I.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&R,O=R=0,_.mode=15,M===6)break e;case 15:_.mode=16;case 16:if(G=_.length){if(W<G&&(G=W),ee<G&&(G=ee),G===0)break e;o.arraySet(te,F,H,G,ne),W-=G,H+=G,ee-=G,ne+=G,_.length-=G;break}_.mode=12;break;case 17:for(;O<14;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}if(_.nlen=257+(31&R),R>>>=5,O-=5,_.ndist=1+(31&R),R>>>=5,O-=5,_.ncode=4+(15&R),R>>>=4,O-=4,286<_.nlen||30<_.ndist){I.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;O<3;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}_.lens[U[_.have++]]=7&R,R>>>=3,O-=3}for(;_.have<19;)_.lens[U[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,L={bits:_.lenbits},P=d(0,_.lens,0,19,_.lencode,0,_.work,L),_.lenbits=L.bits,P){I.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;de=(k=_.lencode[R&(1<<_.lenbits)-1])>>>16&255,xe=65535&k,!((ae=k>>>24)<=O);){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}if(xe<16)R>>>=ae,O-=ae,_.lens[_.have++]=xe;else{if(xe===16){for(C=ae+2;O<C;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}if(R>>>=ae,O-=ae,_.have===0){I.msg="invalid bit length repeat",_.mode=30;break}u=_.lens[_.have-1],G=3+(3&R),R>>>=2,O-=2}else if(xe===17){for(C=ae+3;O<C;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}O-=ae,u=0,G=3+(7&(R>>>=ae)),R>>>=3,O-=3}else{for(C=ae+7;O<C;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}O-=ae,u=0,G=11+(127&(R>>>=ae)),R>>>=7,O-=7}if(_.have+G>_.nlen+_.ndist){I.msg="invalid bit length repeat",_.mode=30;break}for(;G--;)_.lens[_.have++]=u}}if(_.mode===30)break;if(_.lens[256]===0){I.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,L={bits:_.lenbits},P=d(m,_.lens,0,_.nlen,_.lencode,0,_.work,L),_.lenbits=L.bits,P){I.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,L={bits:_.distbits},P=d(f,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,L),_.distbits=L.bits,P){I.msg="invalid distances set",_.mode=30;break}if(_.mode=20,M===6)break e;case 20:_.mode=21;case 21:if(6<=W&&258<=ee){I.next_out=ne,I.avail_out=ee,I.next_in=H,I.avail_in=W,_.hold=R,_.bits=O,c(I,q),ne=I.next_out,te=I.output,ee=I.avail_out,H=I.next_in,F=I.input,W=I.avail_in,R=_.hold,O=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;de=(k=_.lencode[R&(1<<_.lenbits)-1])>>>16&255,xe=65535&k,!((ae=k>>>24)<=O);){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}if(de&&!(240&de)){for(ve=ae,Oe=de,Ne=xe;de=(k=_.lencode[Ne+((R&(1<<ve+Oe)-1)>>ve)])>>>16&255,xe=65535&k,!(ve+(ae=k>>>24)<=O);){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}R>>>=ve,O-=ve,_.back+=ve}if(R>>>=ae,O-=ae,_.back+=ae,_.length=xe,de===0){_.mode=26;break}if(32&de){_.back=-1,_.mode=12;break}if(64&de){I.msg="invalid literal/length code",_.mode=30;break}_.extra=15&de,_.mode=22;case 22:if(_.extra){for(C=_.extra;O<C;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}_.length+=R&(1<<_.extra)-1,R>>>=_.extra,O-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;de=(k=_.distcode[R&(1<<_.distbits)-1])>>>16&255,xe=65535&k,!((ae=k>>>24)<=O);){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}if(!(240&de)){for(ve=ae,Oe=de,Ne=xe;de=(k=_.distcode[Ne+((R&(1<<ve+Oe)-1)>>ve)])>>>16&255,xe=65535&k,!(ve+(ae=k>>>24)<=O);){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}R>>>=ve,O-=ve,_.back+=ve}if(R>>>=ae,O-=ae,_.back+=ae,64&de){I.msg="invalid distance code",_.mode=30;break}_.offset=xe,_.extra=15&de,_.mode=24;case 24:if(_.extra){for(C=_.extra;O<C;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}_.offset+=R&(1<<_.extra)-1,R>>>=_.extra,O-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){I.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(ee===0)break e;if(G=q-ee,_.offset>G){if((G=_.offset-G)>_.whave&&_.sane){I.msg="invalid distance too far back",_.mode=30;break}ge=G>_.wnext?(G-=_.wnext,_.wsize-G):_.wnext-G,G>_.length&&(G=_.length),we=_.window}else we=te,ge=ne-_.offset,G=_.length;for(ee<G&&(G=ee),ee-=G,_.length-=G;te[ne++]=we[ge++],--G;);_.length===0&&(_.mode=21);break;case 26:if(ee===0)break e;te[ne++]=_.length,ee--,_.mode=21;break;case 27:if(_.wrap){for(;O<32;){if(W===0)break e;W--,R|=F[H++]<<O,O+=8}if(q-=ee,I.total_out+=q,_.total+=q,q&&(I.adler=_.check=_.flags?r(_.check,te,q,ne-q):s(_.check,te,q,ne-q)),q=ee,(_.flags?R:x(R))!==_.check){I.msg="incorrect data check",_.mode=30;break}O=R=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;O<32;){if(W===0)break e;W--,R+=F[H++]<<O,O+=8}if(R!==(4294967295&_.total)){I.msg="incorrect length check",_.mode=30;break}O=R=0}_.mode=29;case 29:P=1;break e;case 30:P=-3;break e;case 31:return-4;case 32:default:return h}return I.next_out=ne,I.avail_out=ee,I.next_in=H,I.avail_in=W,_.hold=R,_.bits=O,(_.wsize||q!==I.avail_out&&_.mode<30&&(_.mode<27||M!==4))&&Q(I,I.output,I.next_out,q-I.avail_out)?(_.mode=31,-4):(X-=I.avail_in,q-=I.avail_out,I.total_in+=X,I.total_out+=q,_.total+=q,_.wrap&&q&&(I.adler=_.check=_.flags?r(_.check,te,q,I.next_out-q):s(_.check,te,q,I.next_out-q)),I.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(X==0&&q===0||M===4)&&P===v&&(P=-5),P)},l.inflateEnd=function(I){if(!I||!I.state)return h;var M=I.state;return M.window&&(M.window=null),I.state=null,v},l.inflateGetHeader=function(I,M){var _;return I&&I.state&&2&(_=I.state).wrap?((_.head=M).done=!1,v):h},l.inflateSetDictionary=function(I,M){var _,F=M.length;return I&&I.state?(_=I.state).wrap!==0&&_.mode!==11?h:_.mode===11&&s(1,M,F,0)!==_.check?-3:Q(I,M,F,F)?(_.mode=31,-4):(_.havedict=1,v):h},l.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,a,l){var o=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(m,f,v,h,w,g,y,x){var b,j,S,A,T,B,$,D,V,Q=x.bits,I=0,M=0,_=0,F=0,te=0,H=0,ne=0,W=0,ee=0,R=0,O=null,X=0,q=new o.Buf16(16),G=new o.Buf16(16),ge=null,we=0;for(I=0;I<=15;I++)q[I]=0;for(M=0;M<h;M++)q[f[v+M]]++;for(te=Q,F=15;1<=F&&q[F]===0;F--);if(F<te&&(te=F),F===0)return w[g++]=20971520,w[g++]=20971520,x.bits=1,0;for(_=1;_<F&&q[_]===0;_++);for(te<_&&(te=_),I=W=1;I<=15;I++)if(W<<=1,(W-=q[I])<0)return-1;if(0<W&&(m===0||F!==1))return-1;for(G[1]=0,I=1;I<15;I++)G[I+1]=G[I]+q[I];for(M=0;M<h;M++)f[v+M]!==0&&(y[G[f[v+M]]++]=M);if(B=m===0?(O=ge=y,19):m===1?(O=s,X-=257,ge=r,we-=257,256):(O=c,ge=d,-1),I=_,T=g,ne=M=R=0,S=-1,A=(ee=1<<(H=te))-1,m===1&&852<ee||m===2&&592<ee)return 1;for(;;){for($=I-ne,V=y[M]<B?(D=0,y[M]):y[M]>B?(D=ge[we+y[M]],O[X+y[M]]):(D=96,0),b=1<<I-ne,_=j=1<<H;w[T+(R>>ne)+(j-=b)]=$<<24|D<<16|V|0,j!==0;);for(b=1<<I-1;R&b;)b>>=1;if(b!==0?(R&=b-1,R+=b):R=0,M++,--q[I]==0){if(I===F)break;I=f[v+y[M]]}if(te<I&&(R&A)!==S){for(ne===0&&(ne=te),T+=_,W=1<<(H=I-ne);H+ne<F&&!((W-=q[H+ne])<=0);)H++,W<<=1;if(ee+=1<<H,m===1&&852<ee||m===2&&592<ee)return 1;w[S=R&A]=te<<24|H<<16|T-g|0}}return R!==0&&(w[T+R]=I-ne<<24|64<<16|0),x.bits=te,0}},{"../utils/common":41}],51:[function(t,a,l){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,a,l){var o=t("../utils/common"),s=0,r=1;function c(k){for(var z=k.length;0<=--z;)k[z]=0}var d=0,m=29,f=256,v=f+1+m,h=30,w=19,g=2*v+1,y=15,x=16,b=7,j=256,S=16,A=17,T=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(v+2));c(Q);var I=new Array(2*h);c(I);var M=new Array(512);c(M);var _=new Array(256);c(_);var F=new Array(m);c(F);var te,H,ne,W=new Array(h);function ee(k,z,U,p,N){this.static_tree=k,this.extra_bits=z,this.extra_base=U,this.elems=p,this.max_length=N,this.has_stree=k&&k.length}function R(k,z){this.dyn_tree=k,this.max_code=0,this.stat_desc=z}function O(k){return k<256?M[k]:M[256+(k>>>7)]}function X(k,z){k.pending_buf[k.pending++]=255&z,k.pending_buf[k.pending++]=z>>>8&255}function q(k,z,U){k.bi_valid>x-U?(k.bi_buf|=z<<k.bi_valid&65535,X(k,k.bi_buf),k.bi_buf=z>>x-k.bi_valid,k.bi_valid+=U-x):(k.bi_buf|=z<<k.bi_valid&65535,k.bi_valid+=U)}function G(k,z,U){q(k,U[2*z],U[2*z+1])}function ge(k,z){for(var U=0;U|=1&k,k>>>=1,U<<=1,0<--z;);return U>>>1}function we(k,z,U){var p,N,Z=new Array(y+1),J=0;for(p=1;p<=y;p++)Z[p]=J=J+U[p-1]<<1;for(N=0;N<=z;N++){var K=k[2*N+1];K!==0&&(k[2*N]=ge(Z[K]++,K))}}function ae(k){var z;for(z=0;z<v;z++)k.dyn_ltree[2*z]=0;for(z=0;z<h;z++)k.dyn_dtree[2*z]=0;for(z=0;z<w;z++)k.bl_tree[2*z]=0;k.dyn_ltree[2*j]=1,k.opt_len=k.static_len=0,k.last_lit=k.matches=0}function de(k){8<k.bi_valid?X(k,k.bi_buf):0<k.bi_valid&&(k.pending_buf[k.pending++]=k.bi_buf),k.bi_buf=0,k.bi_valid=0}function xe(k,z,U,p){var N=2*z,Z=2*U;return k[N]<k[Z]||k[N]===k[Z]&&p[z]<=p[U]}function ve(k,z,U){for(var p=k.heap[U],N=U<<1;N<=k.heap_len&&(N<k.heap_len&&xe(z,k.heap[N+1],k.heap[N],k.depth)&&N++,!xe(z,p,k.heap[N],k.depth));)k.heap[U]=k.heap[N],U=N,N<<=1;k.heap[U]=p}function Oe(k,z,U){var p,N,Z,J,K=0;if(k.last_lit!==0)for(;p=k.pending_buf[k.d_buf+2*K]<<8|k.pending_buf[k.d_buf+2*K+1],N=k.pending_buf[k.l_buf+K],K++,p===0?G(k,N,z):(G(k,(Z=_[N])+f+1,z),(J=B[Z])!==0&&q(k,N-=F[Z],J),G(k,Z=O(--p),U),(J=$[Z])!==0&&q(k,p-=W[Z],J)),K<k.last_lit;);G(k,j,z)}function Ne(k,z){var U,p,N,Z=z.dyn_tree,J=z.stat_desc.static_tree,K=z.stat_desc.has_stree,Y=z.stat_desc.elems,he=-1;for(k.heap_len=0,k.heap_max=g,U=0;U<Y;U++)Z[2*U]!==0?(k.heap[++k.heap_len]=he=U,k.depth[U]=0):Z[2*U+1]=0;for(;k.heap_len<2;)Z[2*(N=k.heap[++k.heap_len]=he<2?++he:0)]=1,k.depth[N]=0,k.opt_len--,K&&(k.static_len-=J[2*N+1]);for(z.max_code=he,U=k.heap_len>>1;1<=U;U--)ve(k,Z,U);for(N=Y;U=k.heap[1],k.heap[1]=k.heap[k.heap_len--],ve(k,Z,1),p=k.heap[1],k.heap[--k.heap_max]=U,k.heap[--k.heap_max]=p,Z[2*N]=Z[2*U]+Z[2*p],k.depth[N]=(k.depth[U]>=k.depth[p]?k.depth[U]:k.depth[p])+1,Z[2*U+1]=Z[2*p+1]=N,k.heap[1]=N++,ve(k,Z,1),2<=k.heap_len;);k.heap[--k.heap_max]=k.heap[1],function(se,Ae){var et,Re,tt,ye,ht,Et,Be=Ae.dyn_tree,mn=Ae.max_code,_i=Ae.stat_desc.static_tree,gi=Ae.stat_desc.has_stree,vi=Ae.stat_desc.extra_bits,_n=Ae.stat_desc.extra_base,nt=Ae.stat_desc.max_length,ft=0;for(ye=0;ye<=y;ye++)se.bl_count[ye]=0;for(Be[2*se.heap[se.heap_max]+1]=0,et=se.heap_max+1;et<g;et++)nt<(ye=Be[2*Be[2*(Re=se.heap[et])+1]+1]+1)&&(ye=nt,ft++),Be[2*Re+1]=ye,mn<Re||(se.bl_count[ye]++,ht=0,_n<=Re&&(ht=vi[Re-_n]),Et=Be[2*Re],se.opt_len+=Et*(ye+ht),gi&&(se.static_len+=Et*(_i[2*Re+1]+ht)));if(ft!==0){do{for(ye=nt-1;se.bl_count[ye]===0;)ye--;se.bl_count[ye]--,se.bl_count[ye+1]+=2,se.bl_count[nt]--,ft-=2}while(0<ft);for(ye=nt;ye!==0;ye--)for(Re=se.bl_count[ye];Re!==0;)mn<(tt=se.heap[--et])||(Be[2*tt+1]!==ye&&(se.opt_len+=(ye-Be[2*tt+1])*Be[2*tt],Be[2*tt+1]=ye),Re--)}}(k,z),we(Z,he,k.bl_count)}function u(k,z,U){var p,N,Z=-1,J=z[1],K=0,Y=7,he=4;for(J===0&&(Y=138,he=3),z[2*(U+1)+1]=65535,p=0;p<=U;p++)N=J,J=z[2*(p+1)+1],++K<Y&&N===J||(K<he?k.bl_tree[2*N]+=K:N!==0?(N!==Z&&k.bl_tree[2*N]++,k.bl_tree[2*S]++):K<=10?k.bl_tree[2*A]++:k.bl_tree[2*T]++,Z=N,he=(K=0)===J?(Y=138,3):N===J?(Y=6,3):(Y=7,4))}function P(k,z,U){var p,N,Z=-1,J=z[1],K=0,Y=7,he=4;for(J===0&&(Y=138,he=3),p=0;p<=U;p++)if(N=J,J=z[2*(p+1)+1],!(++K<Y&&N===J)){if(K<he)for(;G(k,N,k.bl_tree),--K!=0;);else N!==0?(N!==Z&&(G(k,N,k.bl_tree),K--),G(k,S,k.bl_tree),q(k,K-3,2)):K<=10?(G(k,A,k.bl_tree),q(k,K-3,3)):(G(k,T,k.bl_tree),q(k,K-11,7));Z=N,he=(K=0)===J?(Y=138,3):N===J?(Y=6,3):(Y=7,4)}}c(W);var L=!1;function C(k,z,U,p){q(k,(d<<1)+(p?1:0),3),function(N,Z,J,K){de(N),X(N,J),X(N,~J),o.arraySet(N.pending_buf,N.window,Z,J,N.pending),N.pending+=J}(k,z,U)}l._tr_init=function(k){L||(function(){var z,U,p,N,Z,J=new Array(y+1);for(N=p=0;N<m-1;N++)for(F[N]=p,z=0;z<1<<B[N];z++)_[p++]=N;for(_[p-1]=N,N=Z=0;N<16;N++)for(W[N]=Z,z=0;z<1<<$[N];z++)M[Z++]=N;for(Z>>=7;N<h;N++)for(W[N]=Z<<7,z=0;z<1<<$[N]-7;z++)M[256+Z++]=N;for(U=0;U<=y;U++)J[U]=0;for(z=0;z<=143;)Q[2*z+1]=8,z++,J[8]++;for(;z<=255;)Q[2*z+1]=9,z++,J[9]++;for(;z<=279;)Q[2*z+1]=7,z++,J[7]++;for(;z<=287;)Q[2*z+1]=8,z++,J[8]++;for(we(Q,v+1,J),z=0;z<h;z++)I[2*z+1]=5,I[2*z]=ge(z,5);te=new ee(Q,B,f+1,v,y),H=new ee(I,$,0,h,y),ne=new ee(new Array(0),D,0,w,b)}(),L=!0),k.l_desc=new R(k.dyn_ltree,te),k.d_desc=new R(k.dyn_dtree,H),k.bl_desc=new R(k.bl_tree,ne),k.bi_buf=0,k.bi_valid=0,ae(k)},l._tr_stored_block=C,l._tr_flush_block=function(k,z,U,p){var N,Z,J=0;0<k.level?(k.strm.data_type===2&&(k.strm.data_type=function(K){var Y,he=4093624447;for(Y=0;Y<=31;Y++,he>>>=1)if(1&he&&K.dyn_ltree[2*Y]!==0)return s;if(K.dyn_ltree[18]!==0||K.dyn_ltree[20]!==0||K.dyn_ltree[26]!==0)return r;for(Y=32;Y<f;Y++)if(K.dyn_ltree[2*Y]!==0)return r;return s}(k)),Ne(k,k.l_desc),Ne(k,k.d_desc),J=function(K){var Y;for(u(K,K.dyn_ltree,K.l_desc.max_code),u(K,K.dyn_dtree,K.d_desc.max_code),Ne(K,K.bl_desc),Y=w-1;3<=Y&&K.bl_tree[2*V[Y]+1]===0;Y--);return K.opt_len+=3*(Y+1)+5+5+4,Y}(k),N=k.opt_len+3+7>>>3,(Z=k.static_len+3+7>>>3)<=N&&(N=Z)):N=Z=U+5,U+4<=N&&z!==-1?C(k,z,U,p):k.strategy===4||Z===N?(q(k,2+(p?1:0),3),Oe(k,Q,I)):(q(k,4+(p?1:0),3),function(K,Y,he,se){var Ae;for(q(K,Y-257,5),q(K,he-1,5),q(K,se-4,4),Ae=0;Ae<se;Ae++)q(K,K.bl_tree[2*V[Ae]+1],3);P(K,K.dyn_ltree,Y-1),P(K,K.dyn_dtree,he-1)}(k,k.l_desc.max_code+1,k.d_desc.max_code+1,J+1),Oe(k,k.dyn_ltree,k.dyn_dtree)),ae(k),p&&de(k)},l._tr_tally=function(k,z,U){return k.pending_buf[k.d_buf+2*k.last_lit]=z>>>8&255,k.pending_buf[k.d_buf+2*k.last_lit+1]=255&z,k.pending_buf[k.l_buf+k.last_lit]=255&U,k.last_lit++,z===0?k.dyn_ltree[2*U]++:(k.matches++,z--,k.dyn_ltree[2*(_[U]+f+1)]++,k.dyn_dtree[2*O(z)]++),k.last_lit===k.lit_bufsize-1},l._tr_align=function(k){q(k,2,3),G(k,j,Q),function(z){z.bi_valid===16?(X(z,z.bi_buf),z.bi_buf=0,z.bi_valid=0):8<=z.bi_valid&&(z.pending_buf[z.pending++]=255&z.bi_buf,z.bi_buf>>=8,z.bi_valid-=8)}(k)}},{"../utils/common":41}],53:[function(t,a,l){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,a,l){(function(o){(function(s,r){if(!s.setImmediate){var c,d,m,f,v=1,h={},w=!1,g=s.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(s);y=y&&y.setTimeout?y:s,c={}.toString.call(s.process)==="[object process]"?function(S){process.nextTick(function(){b(S)})}:function(){if(s.postMessage&&!s.importScripts){var S=!0,A=s.onmessage;return s.onmessage=function(){S=!1},s.postMessage("","*"),s.onmessage=A,S}}()?(f="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",j,!1):s.attachEvent("onmessage",j),function(S){s.postMessage(f+S,"*")}):s.MessageChannel?((m=new MessageChannel).port1.onmessage=function(S){b(S.data)},function(S){m.port2.postMessage(S)}):g&&"onreadystatechange"in g.createElement("script")?(d=g.documentElement,function(S){var A=g.createElement("script");A.onreadystatechange=function(){b(S),A.onreadystatechange=null,d.removeChild(A),A=null},d.appendChild(A)}):function(S){setTimeout(b,0,S)},y.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var A=new Array(arguments.length-1),T=0;T<A.length;T++)A[T]=arguments[T+1];var B={callback:S,args:A};return h[v]=B,c(v),v++},y.clearImmediate=x}function x(S){delete h[S]}function b(S){if(w)setTimeout(b,0,S);else{var A=h[S];if(A){w=!0;try{(function(T){var B=T.callback,$=T.args;switch($.length){case 0:B();break;case 1:B($[0]);break;case 2:B($[0],$[1]);break;case 3:B($[0],$[1],$[2]);break;default:B.apply(r,$)}})(A)}finally{x(S),w=!1}}}}function j(S){S.source===s&&typeof S.data=="string"&&S.data.indexOf(f)===0&&b(+S.data.slice(f.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Le<"u"?Le:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ci);var Ko=ci.exports;const fn=ji(Ko),Go=[{key:"local",label:i.jsx("span",{className:"theme-text",children:"本地上传"})},{key:"remote",label:i.jsx("span",{className:"theme-text",children:"远程导入"})}];function qo(e){const n=E.useRef(),t=E.useRef(""),a=Zo({onOk({url:c}){if(!n.current){oe.warn("package新增失败");return}n.current.origin="remote",n.current.originData=c,l(n.current,t.current)}});function l(c,d){var m;if(!c)return oe.warn("不包含组件包");(m=e==null?void 0:e.onAdd)==null||m.call(e,c,d||"")}function o(c,d){var m;if(!(c!=null&&c.length))return oe.warn("不包含组件包");(m=e==null?void 0:e.onAddSome)==null||m.call(e,c,d)}async function s(c){var g;const d=new Blob([c],{type:c.type}),f=await new fn().loadAsync(d),v=(f==null?void 0:f.files)||{},h=[],w=[];for(const y in v){if(!((g=y==null?void 0:y.endsWith)!=null&&g.call(y,".js")))continue;const b=await v[y].async("text"),j=await zt(b);j&&(j.origin="local",h.push(j),w.push(b))}return{pkgs:h,codes:w}}async function r(c){let d="";switch(c){case"local":const m=await Kn({accept:"text/javascript,application/zip"});if(!m)return;if(["application/x-zip-compressed","application/zip"].includes(m==null?void 0:m.type)){const{pkgs:f,codes:v}=await s(m);o(f,v);return}if((m==null?void 0:m.type)==="text/javascript"){d=await Gn(m);const f=await zt(d);if(!f)return oe.warn("文本内容必须为UMD或者AMD格式");f.origin="local",l(f,d);return}oe.warn("只能上传 .js 和 .zip 文件");break;case"remote":a.open({async beforeOk(f){return t.current=f,n.current=await zt(f),n.current||oe.warn("文本内容必须为UMD或者AMD格式"),!!n.current}});break}}return i.jsx(i.Fragment,{children:i.jsx(ct,{trigger:["click"],menu:{items:Go,onClick({key:c}){r(c)}},children:i.jsx(Ie,{size:"small",style:{fontSize:12},type:"primary",children:e==null?void 0:e.children})})})}var di={exports:{}};(function(e,n){(function(t,a){a()})(Le,function(){function t(d,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function a(d,m,f){var v=new XMLHttpRequest;v.open("GET",d),v.responseType="blob",v.onload=function(){c(v.response,m,f)},v.onerror=function(){console.error("could not download file")},v.send()}function l(d){var m=new XMLHttpRequest;m.open("HEAD",d,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(m)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Le=="object"&&Le.global===Le?Le:void 0,r=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(d,m,f){var v=s.URL||s.webkitURL,h=document.createElement("a");m=m||d.name||"download",h.download=m,h.rel="noopener",typeof d=="string"?(h.href=d,h.origin===location.origin?o(h):l(h.href)?a(d,m,f):o(h,h.target="_blank")):(h.href=v.createObjectURL(d),setTimeout(function(){v.revokeObjectURL(h.href)},4e4),setTimeout(function(){o(h)},0))}:"msSaveOrOpenBlob"in navigator?function(d,m,f){if(m=m||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,f),m);else if(l(d))a(d,m,f);else{var v=document.createElement("a");v.href=d,v.target="_blank",setTimeout(function(){o(v)})}}:function(d,m,f,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof d=="string")return a(d,m,f);var h=d.type==="application/octet-stream",w=/constructor/i.test(s.HTMLElement)||s.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||h&&w||r)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var j=y.result;j=g?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=j:location=j,v=null},y.readAsDataURL(d)}else{var x=s.URL||s.webkitURL,b=x.createObjectURL(d);v?v.location=b:location.href=b,v=null,setTimeout(function(){x.revokeObjectURL(b)},4e4)}});s.saveAs=c.saveAs=c,e.exports=c})})(di);var ui=di.exports;const An="./demo.umd.js",zn="./demo.amd.js",Jo=[{key:"umd-demo",label:i.jsx("span",{className:"theme-text",children:"下载示例组件包（UMD）"})},{key:"amd-demo",label:i.jsx("span",{className:"theme-text",children:"下载示例组件包（AMD）"})},{key:"zip-demo",label:i.jsx("span",{className:"theme-text",children:"下载示例组件包集合（.zip）"})},{key:"all",label:i.jsx("span",{className:"theme-text",children:"下载全部资产"})}];function Yo(e){async function n(t){var a;switch(t){case"umd-demo":yn(An,"测试包2.js");break;case"amd-demo":yn(zn,"测试包1.js");break;case"zip-demo":const l=await Gt(An),o=await Gt(zn),s=new fn;s.file("测试包1.js",o),s.file("测试包2.js",l),s.generateAsync({type:"blob"}).then(function(r){ui.saveAs(r,"组件包集合.zip")});break;case"all":(a=e==null?void 0:e.onDownloadAll)==null||a.call(e);break}}return i.jsx(i.Fragment,{children:i.jsx(ct,{trigger:["click"],menu:{items:Jo,onClick({key:t}){n(t)}},children:i.jsx(Ie,{size:"small",style:{fontSize:12},children:e==null?void 0:e.children})})})}const Xo="_property_zt9oy_59",Qo="_property_header_zt9oy_68",Nn={property:Xo,property_header:Qo};function el(){var r;const e=Fn(),{engine:n}=re(),{loading:t,run:a}=pn(async()=>new Promise(c=>{setTimeout(()=>{oe.success("刷新成功"),c()},500)}),{manual:!0});function l(c,d){const m=Array.isArray(c)?c:[c],f=Array.isArray(d)?d:[d];n.component.registerPackage(m),f.forEach((v,h)=>{n.component.savePackageSourceCode(m[h],v)})}function o(c,d){n.component.unregisterPackage(c),n.componentNode.delete(d)}async function s(){const c=e.map(d=>n.component.getPackageSourceCode(d.id));Promise.all(c).then(d=>{const m=new fn;let f=0;if(d.forEach((v,h)=>{if(!v)return;const w=e[h];m.file(`${w.name}.js`,v),f++}),!f){oe.warn("暂无组件包");return}m.generateAsync({type:"blob"}).then(function(v){ui.saveAs(v,"组件包集合.zip")})})}return i.jsxs("div",{className:Nn.property,children:[i.jsxs("div",{className:Nn.property_header,children:[i.jsxs(ue,{children:[i.jsx("b",{children:"资产列表"}),i.jsx("span",{title:"刷新资产",className:"icon_clickable",onClick:()=>!t&&a(),children:t?i.jsx(Jn,{}):i.jsx(Pe,{})})]}),i.jsxs(ue,{children:[i.jsx(Yo,{onDownloadAll:()=>{s()},children:"下载"}),i.jsx(qo,{onAdd:(c,d)=>{l(c,d)},onAddSome:(c,d)=>{l(c,d)},children:"新增组件包"})]})]}),!e.length&&i.jsx(Ee,{}),(r=e==null?void 0:e.map)==null?void 0:r.call(e,c=>i.jsx(po,{data:c,onDelete:(d,m)=>{o(d,m)}},c.id))]})}const tl="_favorites_1mbr5_59",nl={favorites:tl},il="_favoriteItem_1ipdv_59",rl="_favoriteItem_head_1ipdv_74",al="_favoriteItem_name_1ipdv_83",sl="_favoriteItem_footer_1ipdv_93",gt={favoriteItem:il,favoriteItem_head:rl,favoriteItem_name:al,favoriteItem_footer:sl};function ol(e){const{favorite:n}=e,t=E.useRef(null),a=E.useRef(null);return ri(t,{type:"create-favorite",data:{favorite:n}}),sn(a,{mousedown(l){l.stopPropagation()}}),i.jsxs("div",{className:gt.favoriteItem,ref:t,children:[i.jsx("div",{className:gt.favoriteItem_head,children:i.jsx(cn,{})}),i.jsx("div",{className:gt.favoriteItem_name,title:n.id,children:n.name}),i.jsxs("div",{className:gt.favoriteItem_footer,ref:a,children:[i.jsx(ke,{title:"编辑",children:i.jsx(Mn,{onClick:()=>{var l;return(l=e==null?void 0:e.onEdit)==null?void 0:l.call(e)}})}),i.jsx(ke,{title:"删除",children:i.jsx(Je,{onClick:()=>{var l;return(l=e==null?void 0:e.onDelete)==null?void 0:l.call(e)}})}),i.jsx(ke,{title:"详情",children:i.jsx(Rr,{onClick:()=>{var l;return(l=e==null?void 0:e.onDetail)==null?void 0:l.call(e)}})})]})]},n.id)}const ll=Xe(e=>{var l;const[n]=_e.useForm(),t=(l=e==null?void 0:e.params)==null?void 0:l.favorite;function a(){n.validateFields().then(o=>{var s;(s=e==null?void 0:e.onOk)==null||s.call(e,{...t,name:o==null?void 0:o.name})})}return E.useEffect(()=>{e!=null&&e.visible&&n.setFieldsValue({name:t==null?void 0:t.name})},[e==null?void 0:e.visible]),i.jsx(qe,{centered:!0,closable:!1,open:e==null?void 0:e.visible,onCancel:e==null?void 0:e.onCancel,afterClose:e==null?void 0:e.afterClose,bodyStyle:{paddingBottom:6},footer:null,children:i.jsx(_e,{form:n,children:i.jsx(_e.Item,{label:"名称",name:"name",rules:[{required:!0,message:"请填写名称"}],children:i.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[i.jsx(_e.Item,{noStyle:!0,name:"name",children:i.jsx(Ue,{size:"middle",style:{flex:1}})}),i.jsx(Ie,{type:"primary",onClick:a,children:"保存"})]})})})})}),cl="_favoriteDetailDialog_title_17m9n_67",dl="_favoriteDetailDialog_componentNodes_17m9n_73",ul="_favoriteDetailDialog_item_17m9n_78",Ut={favoriteDetailDialog_title:cl,favoriteDetailDialog_componentNodes:dl,favoriteDetailDialog_item:ul},hl=Xe(e=>{var a,l,o,s;const{engine:n}=re(),t=(a=e==null?void 0:e.params)==null?void 0:a.favorite;return i.jsxs(qe,{centered:!0,title:i.jsx("div",{className:Ut.favoriteDetailDialog_title,children:t==null?void 0:t.name}),open:e==null?void 0:e.visible,onCancel:e==null?void 0:e.onCancel,afterClose:e==null?void 0:e.afterClose,okText:"保存",cancelText:"取消",footer:null,bodyStyle:{padding:"12px 24px 24px",height:500,overflowY:"hidden"},children:[i.jsxs(At,{column:2,labelStyle:{color:"rgba(0,0,0,0.5)",fontSize:12},contentStyle:{color:"rgba(0,0,0,0.5)",fontSize:12},children:[i.jsx(At.Item,{label:"id",children:t==null?void 0:t.id}),i.jsx(At.Item,{label:"创建时间",children:t==null?void 0:t.gmtCreate})]}),i.jsxs("div",{className:Ut.favoriteDetailDialog_componentNodes,children:[!((l=t==null?void 0:t.children)!=null&&l.length)&&i.jsx(Ee,{}),(s=(o=t==null?void 0:t.children)==null?void 0:o.map)==null?void 0:s.call(o,r=>{const c=n.component.get(r.cId);return i.jsxs("div",{className:Ut.favoriteDetailDialog_item,children:[i.jsx("div",{children:i.jsx(ut,{src:c==null?void 0:c.icon,style:{maxWidth:"80%",maxHeight:"80%"}})}),i.jsx("span",{title:r.name,children:r.name})]},r.id)})]})]})});function fl(){const{engine:e}=re(),n=$a(),t=hl(),a=ll({onOk(o){e.favorites.update(o.id,o)}});function l(o){e.favorites.delete(o)}return i.jsxs("div",{className:nl.favorites,children:[!(n!=null&&n.length)&&i.jsx(Ee,{}),n.map(o=>i.jsx(ol,{favorite:o,onDelete:()=>l(o),onEdit:()=>{a.open({favorite:o})},onDetail:()=>{t.open({favorite:o})}},o.id))]})}const ml="_pages_1ty8r_59",_l="_pages_head_1ty8r_67",gl="_pages_body_1ty8r_76",$t={pages:ml,pages_head:_l,pages_body:gl},vl=Xe(e=>{const{params:n}=e,[t]=_e.useForm();function a(o){return{name:o,id:nn(),parentId:n==null?void 0:n.parentId}}function l(){t.validateFields().then(o=>{var s;(s=e==null?void 0:e.onOk)==null||s.call(e,{page:a(o.name),parentId:n==null?void 0:n.parentId})})}return i.jsx(qe,{centered:!0,open:e==null?void 0:e.visible,title:"新增页面",afterClose:e==null?void 0:e.afterClose,onCancel:e==null?void 0:e.onCancel,onOk:l,width:500,bodyStyle:{padding:"12px 24px 12px 12px"},children:i.jsxs(_e,{form:t,labelCol:{span:4},children:[(n==null?void 0:n.parentName)&&i.jsx(_e.Item,{label:"父页面",children:n==null?void 0:n.parentName}),i.jsx(_e.Item,{label:"名称",name:"name",rules:[{required:!0,message:"请输入名称"}],children:i.jsx(Ue,{})})]})})});function yl(){const{engine:e}=re(),[n,t]=E.useState([]),[a,l]=E.useState([]),[o,s,r]=Wi([]),c=ur(),d=ar(),m=vl({onOk({page:y,parentId:x}){if(e.page.insert(y,x),Rt(y.id),x){const b=Array.from(new Set(n).add(x));f(b)}}});function f(y){t(y),e.config.setConfigSilently({expandedPageIds:y})}function v(y){var x;return((x=y==null?void 0:y.reduce)==null?void 0:x.call(y,(b,j)=>b.concat([j.key,...v(j==null?void 0:j.children)]),[]))||[]}function h(y){m.open({parentId:y.id,parentName:y.name})}function w(y,x={}){var j,S,A,T,B,$,D;const b=[y.id,...v(x[y.id].children)];if(((j=r.current)==null?void 0:j.length)===1&&(b!=null&&b.includes((A=(S=r.current)==null?void 0:S[0])==null?void 0:A.key))){oe.warn("至少保留一个顶层页");return}if(b.includes(e.config.getCurrentPage())){let V=(B=(T=r.current)==null?void 0:T[0])==null?void 0:B.key;b.includes(V)&&(V=(D=($=r.current)==null?void 0:$[1])==null?void 0:D.key),Rt(V)}e.page.delete(b)}function g(y,x={}){const b=[];return y.forEach(j=>{var T,B,$;const S=x[j.id],A=x[j.id]={key:(S==null?void 0:S.key)||j.id,title:(S==null?void 0:S.title)||i.jsxs("span",{children:[i.jsx("span",{children:j.name}),i.jsxs("span",{style:{fontSize:12},onClick:D=>D.stopPropagation(),children:[i.jsx("a",{style:{marginLeft:16},onClick:()=>h(j),children:"新增"}),i.jsx("a",{style:{marginLeft:8},onClick:()=>w(j,x),children:"删除"})]})]}),children:(S==null?void 0:S.children)||[]};if(j!=null&&j.parentId){($=(B=x[T=j==null?void 0:j.parentId]||(x[T]={key:"",title:"",children:[]}))==null?void 0:B.children)==null||$.push(A);return}b.push(A)}),b}return E.useEffect(()=>{t(e.config.getConfig().expandedPageIds||[])},[]),E.useEffect(()=>{s(g(c))},[c]),E.useEffect(()=>{l([d])},[d]),i.jsxs("div",{className:$t.pages,children:[i.jsxs("div",{className:$t.pages_head,children:[i.jsx("b",{children:"页面管理"}),i.jsx(ue,{children:i.jsx(Ie,{type:"primary",size:"small",style:{fontSize:12},onClick:()=>{m.open()},children:"新增页面"})})]}),i.jsx("div",{className:$t.pages_body,children:i.jsx(Pi,{showIcon:!0,multiple:!1,defaultExpandAll:!0,icon:i.jsx(ra,{}),treeData:o,selectedKeys:a,expandedKeys:n,onExpand:f,onSelect:y=>{y.length&&Rt(y==null?void 0:y[0])}})})]})}const xl="_history_zo6ip_59",bl="_history_head_zo6ip_71",wl="_history_body_zo6ip_75",kl="_history_item_zo6ip_80",jl="_history_item_gray_zo6ip_88",rt={history:xl,history_head:bl,history_body:wl,history_item:kl,history_item_gray:jl};function Cl(){var l,o,s,r;const{engine:e}=re(),n=ei(),t=(l=n.current)==null?void 0:l.stepId;function a(c){e.history.isPass(c)&&t===c?hn():os(c)}return i.jsxs("div",{className:rt.history,children:[i.jsx("div",{className:rt.history_head,children:i.jsxs("b",{children:["最大存储容量：",n==null?void 0:n.maxSize]})}),i.jsxs("div",{className:rt.history_body,children:[(s=(o=n==null?void 0:n.list)==null?void 0:o.map)==null?void 0:s.call(o,c=>i.jsx("div",{className:je(rt.history_item,!c.isPass&&rt.history_item_gray),onClick:()=>{a(c.stepId)},children:c.description},c.stepId)),!((r=n==null?void 0:n.list)!=null&&r.length)&&i.jsx(Ee,{})]})]})}function Sl(){const{engine:e}=re(),[n,t]=Ye(),a=E.useMemo(()=>[{key:"library",domId:"rbs-library",icon:i.jsx(xr,{}),title:n("menu.bar.library"),children:i.jsx(Qs,{})},{key:"pages",domId:"rbs-pages",icon:i.jsx(oa,{}),title:n("menu.bar.pages"),children:i.jsx(yl,{})},{key:"componentNodes",domId:"rbs-componentNodes",icon:i.jsx(gr,{}),title:n("menu.bar.componentNodes"),children:i.jsx(Eo,{})},{key:"property",domId:"rbs-property",icon:i.jsx(Nr,{}),title:n("menu.bar.property"),children:i.jsx(el,{})},{key:"favorites",domId:"rbs-favorites",icon:i.jsx(cn,{}),title:n("menu.bar.favorites"),children:i.jsx(fl,{})},{key:"history",domId:"rbs-history",icon:i.jsx(fa,{}),title:n("menu.bar.history"),children:i.jsx(Cl,{})}],[t.language]),l=bt(d=>d.currentMenu),[o,s]=E.useState(""),r=E.useMemo(()=>{var d;return(d=a.find(m=>m.key===o))==null?void 0:d.children},[o]);function c(d){s(d),e.config.setConfigSilently({currentMenu:d})}return E.useEffect(()=>{const{currentMenu:d}=e.config.getConfig(),m=a.find(f=>f.key===d);s((m==null?void 0:m.key)||a[0].key)},[l]),i.jsxs("div",{className:Lt.menu,children:[i.jsx("div",{className:Lt.menu_bar,children:i.jsx(Oo,{value:o,list:a,onChange:c})}),i.jsx("div",{className:Lt.menu_main,children:r})]})}const Il="_editor_82kko_59",El="_editor_render_82kko_65",On={editor:Il,editor_render:El},Al="_flexCenter_1kt3d_29",zl="_icon_clickable_1kt3d_49",Nl="_icon_selected_1kt3d_56",Ol="_moveItem_box_1kt3d_59",Rl="_moveItem_box_lock_1kt3d_69",Bl="_moveItem_box_selected_1kt3d_72",Ll="_moveItem_box_hover_1kt3d_79",Dl="_dragPointCommon_1kt3d_83",Tl="_p_top_1kt3d_92",Ml="_p_left_1kt3d_95",Pl="_p_right_1kt3d_98",Fl="_p_bottom_1kt3d_101",Ul="_p_horizontal_mid_1kt3d_104",$l="_p_vertical_mid_1kt3d_107",pl="_dragPoint_top_1kt3d_110",Hl="_dragPoint_top_left_1kt3d_123",Wl="_dragPoint_top_right_1kt3d_136",Vl="_dragPoint_bottom_1kt3d_149",Zl="_dragPoint_bottom_left_1kt3d_162",Kl="_dragPoint_bottom_right_1kt3d_175",Gl="_dragPoint_left_1kt3d_188",ql="_dragPoint_right_1kt3d_201",We={flexCenter:Al,"theme-text":"_theme-text_1kt3d_34","theme-color":"_theme-color_1kt3d_38","text-ellipsis":"_text-ellipsis_1kt3d_41","border-right":"_border-right_1kt3d_46",icon_clickable:zl,icon_selected:Nl,moveItem_box:Ol,moveItem_box_lock:Rl,moveItem_box_selected:Bl,moveItem_box_hover:Ll,dragPointCommon:Dl,p_top:Tl,p_left:Ml,p_right:Pl,p_bottom:Fl,p_horizontal_mid:Ul,p_vertical_mid:$l,dragPoint_top:pl,dragPoint_top_left:Hl,dragPoint_top_right:Wl,dragPoint_bottom:Vl,dragPoint_bottom_left:Zl,dragPoint_bottom_right:Kl,dragPoint_left:Gl,dragPoint_right:ql},Jl=["top","top_left","top_right","bottom","bottom_left","bottom_right","left","right"],Yl={top:"n-resize",top_left:"nw-resize",top_right:"ne-resize",bottom:"s-resize",bottom_left:"sw-resize",bottom_right:"se-resize",left:"w-resize",right:"e-resize"};function Xl(e,n,t){const a={dx:0,dy:0,dw:0,dh:0};function l(){a.dh=-t,a.dy=t}function o(){a.dw=-n,a.dx=n}function s(){a.dh=t}function r(){a.dw=n}switch(e){case"top":l();break;case"top_left":l(),o();break;case"top_right":l(),r();break;case"bottom":s();break;case"bottom_left":s(),o();break;case"bottom_right":s(),r();break;case"left":o();break;case"right":r();break}return a}function Ql(e,n,t){let a={x:0,y:0,width:n.offsetWidth,height:n.offsetHeight};const l=ie.getActiveEngine();if(l)return{onStart(){a={x:e.x,y:e.y,width:e.width,height:e.height},n.style.zIndex=`${l.componentNode.getMaxLevel()}`,Ke.set(Yl[t])},onMove(o,s){const r=Xl(t,o,s),c=a.width+r.dw,d=a.height+r.dh;c<0||d<0||l.componentNode.update(e.id,{x:Math.round(a.x+r.dx),y:Math.round(a.y+r.dy),height:Math.round(Math.max(d,0)),width:Math.round(Math.max(c,0))})},onEnd(){Ke.revoke(),fe("拖拽组件大小")}}}const ec=E.forwardRef((e,n)=>{const{componentNode:t}=e,a=E.useRef(null),[l,o]=E.useState(!1),s=bt(r=>r.scale);return E.useImperativeHandle(n,()=>({handleHover(){var r,c,d;(d=(c=(r=a.current)==null?void 0:r.classList)==null?void 0:c.add)==null||d.call(c,We.moveItem_box_hover)},handleUnHover(){var r,c,d;(d=(c=(r=a.current)==null?void 0:r.classList)==null?void 0:c.remove)==null||d.call(c,We.moveItem_box_hover)},handleSelected(){o(!0)},handleUnSelected(){o(!1)}})),E.useMemo(()=>i.jsx("div",{[`data-${Ge.componentNodeId}`]:t.id,ref:a,className:je(We.moveItem_box,l&&We.moveItem_box_selected,t.lock&&We.moveItem_box_lock),children:l&&!t.lock&&Jl.map(r=>i.jsx("div",{style:{transform:s<1?`scale(${1/s})`:void 0},className:We[`dragPoint_${r}`],[`data-${Ge.dragDirection}`]:r},r))}),[t.lock,l,s])});function tc(e){var s;const{engine:n}=re(),[t,a]=E.useState(e==null?void 0:e.componentNode),l=t?(t==null?void 0:t.show)??!0:!1,o=E.useMemo(()=>n.component.get(e==null?void 0:e.componentNode.cId),[(s=e==null?void 0:e.componentNode)==null?void 0:s.cId,e==null?void 0:e.packages]);return Vn(()=>n.componentNode.onChange(e==null?void 0:e.componentNode.id,({payload:r})=>{a({...r})})),ln(()=>{a(e==null?void 0:e.componentNode)},[e==null?void 0:e.componentNode]),o&&l?i.jsx(nc,{componentNode:t,component:o}):i.jsx(i.Fragment,{})}function nc(e){const{component:n,componentNode:t}=e,a=Zn(t),l=E.useRef(null),{dataSource:o,requestInstance:s}=Ki(t),r=Gi(t.id),c=qi(t.id),d=E.useRef(null),m=Ji({id:t.id,handleHover(){var f,v;(v=(f=d==null?void 0:d.current)==null?void 0:f.handleHover)==null||v.call(f)},handleUnHover(){var f,v;(v=(f=d==null?void 0:d.current)==null?void 0:f.handleUnHover)==null||v.call(f)},handleSelected(){var f,v;(v=(f=d==null?void 0:d.current)==null?void 0:f.handleSelected)==null||v.call(f)},handleUnSelected(){var f,v;(v=(f=d==null?void 0:d.current)==null?void 0:f.handleUnSelected)==null||v.call(f)},getContainerDom(){return l.current},getComponentNode(){return a.current},getComponent(){return n},reloadRequest(){s.reload()},request:(f,v)=>s.request(f,v)});return i.jsxs("div",{ref:l,style:{position:"absolute",opacity:t.lock?.75:1,left:t.x,top:t.y,width:t.width,height:t.height,zIndex:t.level},onMouseEnter:()=>{m.handleHover()},onMouseLeave:()=>{m.handleUnHover()},children:[i.jsx(E.Suspense,{children:i.jsx(n.component,{useExpose:c,handleTrigger:r,dataSource:o,options:t.options,width:t.width,height:t.height,componentNode:t})}),i.jsx(ec,{ref:d,componentNode:t})]})}function ic(e){const n=ie.getActiveEngine();n&&wt(e)&&n.instance.getAllSelected().length&&(n.instance.unselectAll(),fe("取消选中组件"))}function rc(e,n){const t=wt(n),a=St("shift"),l=ie.getActiveEngine();if(!l||e.lock&&t&&!a)return;n.stopPropagation();const o=Un(n);if(t||o){if(l.instance.isSelected(e.id)){a&&l.instance.unselect(e.id);return}const s=e.groupId?l.componentNode.getGroupComponentNodeIds(e.groupId):[e.id];l.instance.select(s,!a),fe("选中组件")}}function ac(e){var c;const n=e.getComponentNode();if(!n||n!=null&&n.lock)return;const t=(c=e==null?void 0:e.getContainerDom)==null?void 0:c.call(e);if(!t)throw new Error("dom must be set.");let a=[],l=!1;const o=t.style.pointerEvents;let s=!1,r;return{onStart(){return Ke.set("move"),setTimeout(()=>{let{list:d,showCount:m}=lc();a=d,l=m<300,r=Wn((f,v)=>{sc(a,l,f,v)},m<100?0:20,{trailing:!0})}),!1},onMove(d,m){s||(t.style.pointerEvents="none",s=!0),r==null||r(d,m)},onEnd(d,m){Ke.revoke(),s&&(t.style.pointerEvents=o,oc(a,l,d,m),a!=null&&a.length&&fe("移动组件"),s=!1,r=void 0)}}}function sc(e,n,t,a){e.forEach(l=>{if(!l.show)return;const o=l.containerDom;if(n)o.style.transform=`translate3d(${t}px,${a}px, 0)`;else{const s=l.componentNode;o.style.left=`${s.x+t}px`,o.style.top=`${s.y+a}px`}})}function oc(e,n,t,a){const l=ie.getActiveEngine();l&&e.forEach(o=>{o!=null&&o.show&&n&&o.containerDom.style.removeProperty("transform");const s=o==null?void 0:o.componentNode;s&&l.componentNode.update(s.id,{x:Math.round(t+((s==null?void 0:s.x)||0)),y:Math.round(a+((s==null?void 0:s.y)||0))})})}function lc(){const e=ie.getActiveEngine();return e?Ct().reduce((t,a)=>{var s,r,c,d;const l=a.show??!0;l&&t.showCount++;const o={id:a.id,componentNode:a,show:l,containerDom:(d=(c=(r=(s=e.instance)==null?void 0:s.get)==null?void 0:r.call(s,a.id))==null?void 0:c.getContainerDom)==null?void 0:d.call(c)};return t.list.push(o),t},{showCount:0,list:[]}):{showCount:0,list:[]}}const cc="_rangeBox_12c3t_59",dc={rangeBox:cc},Rn=Wn((e,n)=>{const t=ie.getActiveEngine();if(!t)return;const a=t.componentNode.getAll().reduce((l,o)=>{const s={x1:o.x,y1:o.y,x2:o.x+o.width,y2:o.y+o.height},r={x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height};return ir(s,r)&&(!o.lock||o.lock&&St("shift"))&&l.push(o.id),l},[]);t.instance.select(a,!0),n==null||n(a)},100);let Ce;function uc(e){let n={x:0,y:0},t=1;function a(o=0,s=0){const r=o*t,c=s*t,d=n.x+r,m=n.y+c,f={x:n.x,y:n.y,width:Math.abs(o),height:Math.abs(s)};return d<f.x&&(f.x=d),m<f.y&&(f.y=m),f.x/=t,f.y/=t,f}function l(){Ce&&(Ce==null||Ce.remove(),Ce=void 0)}return{onStart(o,s,r){const c=ie.getActiveEngine();if(!c)return;l();const{x:d=0,y:m=0}=r||{};t=c.config.getConfig().scale;const f=e.getBoundingClientRect();n.x=d-f.x,n.y=m-f.y,Ce=document.createElement("div"),Ce.classList.add(dc.rangeBox),Ce.style.zIndex=`${c.componentNode.getMaxLevel()}`,e.appendChild(Ce),Ke.set("default")},onMove(o,s){if(!Ce)return;const r=a(o,s);Ce.style.top=`${r.y}px`,Ce.style.left=`${r.x}px`,Ce.style.width=`${r.width}px`,Ce.style.height=`${r.height}px`,Ce.style.borderWidth="1px",Rn(r)},onEnd(o,s){l(),Ke.revoke();const r=a(o,s);(r.width||r.height)&&Rn(r,c=>{c.length&&fe("范围选中组件")})}}}function hc(e,n){return{onEnd(t,a,l){setTimeout(()=>{var f;const o=ie.getActiveEngine();if(!o)return;const s=o.config.getConfig().scale,r=e.getComponentNode(),c=e.getContainerDom();if(!r||r!=null&&r.lock||!c)return;const d=((f=c==null?void 0:c.getBoundingClientRect)==null?void 0:f.call(c))||{x:0,y:0},m=mc(r,{x:(l.x-d.x)/s+r.x,y:(l.y-d.y)/s+r.y});n==null||n(m)})}}}function fc(e,n){const t=ie.getActiveEngine();if(!t)return;const a=t.componentNode.getAll().reduce((s,r)=>{var c;return(r.show??!0)&&r.category==="layout"&&r.id!==e.id&&rr(n,t.componentNode.getCoordinate(r))&&(s[c=`${r.level}`]||(s[c]=[])).push(r),s},{}),l=Object.values(a),o=l[l.length-1];return o==null?void 0:o[(o==null?void 0:o.length)-1]}function mc(e,n){const t=ie.getActiveEngine();if(!t)return;const a=fc(e,{x:n.x,y:n.y});if(a){const o=a==null?void 0:a.currentPanelId;if(!o||t.componentNode.isInPanel(o,e))return;const s=t.componentNode.getPanelName(o)||"目标";return xn({title:"移入提醒",content:`确定放入面板“${s}”？`,onOk(r){t.instance.getAllSelected().forEach(c=>{const d=t.componentNode.get(c.id);t.componentNode.insertPanel(o,d)}),t.instance.select(a.id,!0),fe(`移入面板 “${s}”`),r()}})}const l=e.panelId;if(l){const o=t.componentNode.getPanelName(l)||"目标";return xn({title:"移出提醒",content:`是否移出面板“${o}”?`,onOk(s){t.instance.getAllSelected().forEach(r=>{const c=t.componentNode.get(r.id);t.componentNode.removeFromPanel(c),fe(`移出面板 “${o}”`)}),s()}})}}function _c(e){const n=E.useRef([]),{engine:t}=re();function a(){var l,o;n!=null&&n.current.length&&((o=(l=n==null?void 0:n.current)==null?void 0:l.forEach)==null||o.call(l,s=>s==null?void 0:s()),n.current=[])}sn(e,{mousedown(l){var h;const o=e.current;if(!o)throw new Error("dom must be exist.");a();const s=wt(l),r=Un(l),c=St("shift"),d=Jt(l.target,Ge.componentNodeId,!0),m=t.instance.get(d),f=(h=m==null?void 0:m.getComponentNode)==null?void 0:h.call(m),v=r?!0:f!=null&&f.lock?s&&c:s;if(m&&f&&v){if(rc(f,l),!(f!=null&&f.lock)&&s){const w=Jt(l.target,Ge.dragDirection);n.current.push(bn({startX:l.x,startY:l.y,startEvent:l,scale:t.config.getConfig().scale,hookQueue:[w&&Ql(f,l.target,w),!w&&ac(m),hc(m,g=>{n.current.push(g)})]}))}return}ic(l),n.current.push(bn({startX:l.x,startY:l.y,startEvent:l,scale:t.config.getConfig().scale,hookQueue:[s&&uc(o)]}))}}),$n(()=>{a()})}function gc(e){const{engine:n}=re();ai(e,{accept:["create-component"],onDrop:(t,a)=>{const l=e.current;if(!l)throw new Error("dom must be exist.");const{data:o}=a;if(!(o==null?void 0:o.component))return;const r=l.getBoundingClientRect(),c=n.config.getConfig().scale,d=n.componentNode.createFromComponent(o.component,{x:Math.round((t.x-r.x)/c),y:Math.round((t.y-r.y)/c),pageId:n.config.getCurrentPage()});n.componentNode.add(d),setTimeout(async()=>{n.instance.select(d.id,!0),fe(`新增一个组件 “${d.cName}”`)})}})}function vc(e){const{engine:n}=re();ai(e,{accept:["create-favorite"],onDrop:(t,a)=>{var y,x;const l=e.current;if(!l)throw new Error("dom must be exist.");const o=l.getBoundingClientRect(),s=(y=a.data)==null?void 0:y.favorite;(x=s.children)!=null&&x.length||oe.warn("收藏元素为空");const r=Math.round(t.x-o.x),c=Math.round(t.y-o.y),d=s.children[0],{x:m,y:f}=s.children.reduce((b,j)=>(b.x=Math.min(b.x,j.x),b.y=Math.min(b.y,j.y),b),{x:d.x,y:d.y}),v=n.config.getCurrentPage(),h=[],w=n.config.getConfig().scale,g=n.componentNode.cloneComponentNodes(s.children,{onClone(b,j){j.x=Math.round((r+(j.x-m))/w),j.y=Math.round((c+(j.y-f))/w),j.pageId=v,h.push(j.id)}});n.componentNode.add(g),setTimeout(()=>{n.instance.select(h,!0),fe(`新增收藏组件 “${s.name}”`)})}})}const yc=()=>{const{engine:e}=re(),n=E.useRef(null),t=E.useRef(null),a=Fn(),l=Pn(),o=E.useMemo(()=>{if(a.length)return l==null?void 0:l.map(s=>i.jsx(tc,{componentNode:s,packages:a},s.id))},[l,a]);return _c(t),li(n),gc(t),vc(t),E.useEffect(()=>e.componentNode.onDelete(s=>{e.page.removeGlobalComponentNode(s)}),[]),i.jsx("div",{ref:n,className:On.editor,onMouseDown:()=>jt(),children:i.jsx(Yi,{ref:t,className:On.editor_render,children:o})})},xc="_attributes_esabd_59",bc={attributes:xc},wc="_singleInstanceAttributesBase_description_x66dv_59",kc="_singleInstanceAttributesBase_body_x66dv_64",jc="_singleInstanceAttributesBase_label_x66dv_67",Cc="_singleInstanceAttributesBase_x66dv_59",Me={singleInstanceAttributesBase_description:wc,singleInstanceAttributesBase_body:kc,singleInstanceAttributesBase_label:jc,singleInstanceAttributesBase:Cc},Sc="_opacity0_1lvzj_59",Ic="_editText_1lvzj_62",Ec="_editText_text_1lvzj_69",pt={opacity0:Sc,editText:Ic,editText_text:Ec};function Ac(e){const[n,t]=E.useState(!1),[a,l]=E.useState("");function o(){l((e==null?void 0:e.value)||""),t(!0)}function s(){var r;if(!a){oe.warn(e==null?void 0:e.emptyMessage);return}t(!1),(r=e==null?void 0:e.onChange)==null||r.call(e,a)}return E.useEffect(()=>{t(!1)},[e==null?void 0:e.value]),i.jsxs("div",{className:pt.editText,children:[n?i.jsx(Ue,{value:a,style:{width:"100%"},onChange:r=>l(r),onPressEnter:()=>{n&&s()}}):i.jsx("b",{className:pt.editText_text,title:`${(e==null?void 0:e.value)||""}`,children:e==null?void 0:e.value}),n?i.jsx(Fe,{className:"icon_clickable",onClick:s}):i.jsx(Mn,{className:je(pt.opacity0,"icon_clickable"),onClick:o})]})}function zc(){const{engine:e}=re(),{componentNode:n}=Qe(),[t]=_e.useForm(),a=E.useMemo(()=>e.component.get(n==null?void 0:n.cId),[n==null?void 0:n.cId]),l=a==null?void 0:a.attributesComponent;function o(s){s||e.page.removeGlobalComponentNode(n==null?void 0:n.id)}return E.useEffect(()=>{n&&t.setFieldsValue({...n,isAllPage:!!(n!=null&&n.isAllPage)})},[n]),i.jsxs(_e,{form:t,className:Me.singleInstanceAttributesBase,onValuesChange:s=>{let r="修改组件";s.hasOwnProperty("isAllPage")&&(o(s.isAllPage),r=s.isAllPage?"设置组件全页面":"取消组件全页面"),e.componentNode.update(n==null?void 0:n.id,s),fe(r)},children:[i.jsx("div",{className:Me.singleInstanceAttributesBase_description,children:i.jsxs(Kt,{children:[i.jsx(Se,{span:24,style:{marginBottom:6},children:i.jsx(Ac,{emptyMessage:"请填写名称",value:n==null?void 0:n.name,onChange:s=>{e.componentNode.update(n==null?void 0:n.id,{name:s})}})}),i.jsxs(Se,{span:24,children:["id：",(n==null?void 0:n.id)||"-"]}),i.jsxs(Se,{span:24,children:["cId：",(n==null?void 0:n.cId)||"-"]}),i.jsxs(Se,{span:24,children:["cName：",(n==null?void 0:n.cName)||"-"]})]})}),i.jsxs("div",{className:Me.singleInstanceAttributesBase_body,children:[i.jsxs("div",{children:[i.jsxs(Kt,{gutter:[8,8],style:{fontSize:12},children:[i.jsx(Se,{span:3,className:Me.singleInstanceAttributesBase_label,children:"X轴"}),i.jsx(Se,{span:9,children:i.jsx(_e.Item,{name:"x",noStyle:!0,children:i.jsx(Ve,{size:"small",style:{width:"100%"}})})}),i.jsx(Se,{span:3,className:Me.singleInstanceAttributesBase_label,children:"Y轴"}),i.jsx(Se,{span:9,children:i.jsx(_e.Item,{name:"y",noStyle:!0,children:i.jsx(Ve,{size:"small",style:{width:"100%"}})})}),i.jsx(Se,{span:3,className:Me.singleInstanceAttributesBase_label,children:"宽度"}),i.jsx(Se,{span:9,children:i.jsx(_e.Item,{name:"width",noStyle:!0,children:i.jsx(Ve,{size:"small",style:{width:"100%"}})})}),i.jsx(Se,{span:3,className:Me.singleInstanceAttributesBase_label,children:"高度"}),i.jsx(Se,{span:9,children:i.jsx(_e.Item,{name:"height",noStyle:!0,children:i.jsx(Ve,{size:"small",style:{width:"100%"}})})})]}),i.jsxs(kt,{labelSpan:4,children:[i.jsx(be,{label:"层级",style:{marginTop:8},labelSpan:3,children:i.jsx(_e.Item,{name:"level",noStyle:!0,children:i.jsx(Ve,{size:"small",style:{width:"100%"}})})}),i.jsx(be,{label:"全页面",style:{marginTop:8},labelTip:"每个页面都会显示",children:i.jsx(_e.Item,{noStyle:!0,name:"isAllPage",valuePropName:"checked",children:i.jsx(xt,{})})})]})]}),n&&l&&i.jsx("div",{style:{paddingTop:8},children:i.jsx(E.Suspense,{children:i.jsx(l,{componentNode:n,onChangeComponentNode:s=>{e.componentNode.update(n==null?void 0:n.id,s),fe("修改组件属性")},options:n==null?void 0:n.options,onChange:(s,r)=>{e.componentNode.update(n==null?void 0:n.id,{options:r?s:{...n==null?void 0:n.options,...s}}),fe("修改组件属性")}})})})]})]})}const Nc="_dataSource_1t8uf_59",Oc={dataSource:Nc},Rc="_requestDataSource_147st_59",Bc={requestDataSource:Rc};function Lc(e){const n=ie.getActiveEngine(),{componentNode:t}=Qe(),a=E.useMemo(()=>{var d,m;return(m=(d=n==null?void 0:n.instance)==null?void 0:d.get)==null?void 0:m.call(d,t==null?void 0:t.id)},[t==null?void 0:t.id]),l=t==null?void 0:t.request,{data:o,loading:s,refresh:r}=pn(async()=>{var d,m;return(m=(d=a==null?void 0:a.request)==null?void 0:d.call(a,void 0,!0))==null?void 0:m.then(f=>typeof f=="object"&&f?JSON.stringify(f,null,"  "):`${f??null}`)},{refreshDeps:[t==null?void 0:t.id]});function c(d){var m,f;(f=(m=n==null?void 0:n.componentNode)==null?void 0:m.update)==null||f.call(m,t==null?void 0:t.id,v=>({request:{...v.request,...d}}))}return i.jsxs("div",{style:e==null?void 0:e.style,className:Bc.requestDataSource,children:[i.jsx(be,{label:"请求类型",children:i.jsx(dt,{allowClear:!1,style:{width:"100%"},requestFn:async()=>[{label:"GET",value:"get"},{label:"POST",value:"post"},{label:"DELETE",value:"delete"},{label:"PUT",value:"put"}],value:(l==null?void 0:l.method)||"get",onChange:d=>{c({method:d}),fe("修改请求类型")}})}),i.jsx(be,{label:"请求地址",children:i.jsx(Ue,{value:l==null?void 0:l.url,onChange:d=>{c({url:d}),fe("修改请求地址")}})}),i.jsx("b",{style:{marginTop:12},children:"请求配置"}),i.jsx(be,{label:"轮循请求",children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx(xt,{checked:(l==null?void 0:l.loop)??!1,onChange:d=>{c({loop:d.target.checked}),fe("修改轮训请求")}}),(l==null?void 0:l.loop)&&i.jsxs(i.Fragment,{children:[i.jsx(on,{style:{width:100},value:(l==null?void 0:l.loopDelay)||1e3,onChange:d=>{c({loopDelay:d}),fe("修改轮训时长")}}),i.jsx("span",{children:"毫秒"})]})]})}),i.jsx(be,{label:"初次请求",children:i.jsx(xt,{checked:(l==null?void 0:l.first)??!1,onChange:d=>{c({first:d.target.checked}),fe("修改初次请求")}})}),i.jsxs("div",{style:{marginTop:12,display:"flex",gap:8,alignItems:"center"},children:[i.jsx("b",{children:"数据结果"}),i.jsx(ke,{title:"请求数据",children:i.jsx(Pe,{className:"icon_clickable",onClick:()=>{r()}})})]}),i.jsx(Te,{readOnly:!0,minimap:!1,language:"json",value:s?"":o,style:{flex:1,minHeight:200,maxHeight:400}})]})}const Dc="_staticDataSource_1p3pl_59",Tc={staticDataSource:Dc};function Mc(e){const{engine:n}=re(),{componentNode:t}=Qe(),[a,l]=E.useState("");function o(){if(!a)return oe.warn("json格式不正确");try{const s=JSON.parse(a);n.componentNode.update(t==null?void 0:t.id,{staticDataSource:s}),oe.success("修改成功"),fe("修改静态数据")}catch{oe.warn("json格式不正确")}}return E.useEffect(()=>{l(t!=null&&t.staticDataSource?JSON.stringify((t==null?void 0:t.staticDataSource)||{},null,"	"):"")},[t]),i.jsxs("div",{className:Tc.staticDataSource,style:e==null?void 0:e.style,children:[i.jsx(be,{label:"配置数据",children:i.jsx(ke,{title:"保存",children:i.jsx(Fe,{className:"icon_clickable",onClick:o})})}),i.jsx(Te,{minimap:!1,language:"json",style:{flex:1},value:a,onChange:l,options:{tabSize:2}})]})}const Pc=[{label:"静态数据",value:"static"},{label:"请求接口",value:"request"}];function Fc(){const{engine:e}=re(),{componentNode:n}=Qe(),t=(n==null?void 0:n.dataSourceType)??"static";return i.jsx(kt,{labelSpan:5,children:i.jsxs("div",{className:Oc.dataSource,children:[i.jsx(be,{label:"数据源",children:i.jsx(dt,{value:t,allowClear:!1,style:{width:"100%"},requestFn:async()=>Pc,onChange:a=>{e.componentNode.update(n==null?void 0:n.id,{dataSourceType:a})}})}),t==="static"&&i.jsx(Mc,{style:{flex:1,overflow:"hidden"}}),t==="request"&&i.jsx(Lc,{style:{flex:1,overflow:"hidden"}})]})})}const Uc="_interactive_1j74j_59",$c={interactive:Uc};function pc(e){const{componentNode:n}=e,{engine:t}=re(),[a,l]=E.useState([]),o=E.useMemo(()=>t.component.get(n==null?void 0:n.cId),[n==null?void 0:n.cId]);return E.useEffect(()=>{var s,r;l(((r=(s=o==null?void 0:o.triggers)==null?void 0:s.map)==null?void 0:r.call(s,c=>{var d;return{disabled:!!((d=n==null?void 0:n.events)!=null&&d.find(m=>m.triggerId===c.value)),key:c.value,style:{fontSize:12},label:c.label}}))||[])},[o,n]),i.jsx(ct,{trigger:["click"],menu:{items:a,onClick:({key:s})=>{var r;(r=e==null?void 0:e.onSelect)==null||r.call(e,s)}},children:i.jsx(Ie,{type:"dashed",block:!0,icon:i.jsx(an,{}),children:"组件绑定事件"})})}const Hc="_eventList_19gi2_59",Wc="_eventList_head_19gi2_62",Vc="_eventList_body_19gi2_68",Zc="_eventList_item_19gi2_74",Kc="_eventList_item_body_19gi2_84",Gc="_eventList_item_opt_19gi2_90",qc="_eventList_item_opt_clickable_19gi2_95",De={eventList:Hc,eventList_head:Wc,eventList_body:Vc,eventList_item:Zc,eventList_item_body:Kc,eventList_item_opt:Gc,eventList_item_opt_clickable:qc},Jc="_editEventDialog_11y5n_59",Yc="_editEventDialog_menu_11y5n_63",Xc="_editEventDialog_body_11y5n_78",Ht={editEventDialog:Jc,editEventDialog_menu:Yc,editEventDialog_body:Xc},Qc="_eventOptions_main_16n1f_59",It={eventOptions_main:Qc};function ed(e){var n;return i.jsx("div",{className:It.eventOptions_main,children:i.jsx(be,{label:"组件显示",labelSpan:3,children:i.jsx(Dn,{size:"small",checked:(n=e==null?void 0:e.value)==null?void 0:n.visible,onChange:t=>{var a;(a=e==null?void 0:e.onChange)==null||a.call(e,{...e==null?void 0:e.value,visible:t})}})})})}const td=Xe(e=>{const[n,t]=Ln.useState();return E.useEffect(()=>{var a;e!=null&&e.visible&&t((a=e==null?void 0:e.params)==null?void 0:a.text)},[e==null?void 0:e.visible]),i.jsxs(qe,{centered:!0,width:650,title:!1,open:e==null?void 0:e.visible,closable:!1,bodyStyle:{padding:"12px 20px"},onCancel:e==null?void 0:e.onCancel,afterClose:e==null?void 0:e.afterClose,footer:i.jsxs(ue,{children:[i.jsx(Ie,{onClick:()=>{var a;(a=e==null?void 0:e.onOk)==null||a.call(e,void 0)},children:"重置"}),i.jsx(Ie,{type:"primary",onClick:()=>{var a;(a=e==null?void 0:e.onOk)==null||a.call(e,n)},children:"保存"})]}),children:[i.jsx("h3",{children:"转换函数"}),i.jsx(Te,{language:"javascript",style:{height:450},value:n??pa,onChange:t})]})});function hi(e){const n=td({onOk(a){var l;(l=e==null?void 0:e.onChange)==null||l.call(e,a)}}),t=E.useMemo(()=>e!=null&&e.tooltip?i.jsx(ke,{title:e==null?void 0:e.tooltip,children:i.jsx("span",{children:"{}"})}):i.jsx("span",{children:"{}"}),[e==null?void 0:e.tooltip]);return i.jsx(i.Fragment,{children:i.jsx("span",{className:je("icon_clickable",(e==null?void 0:e.value)&&"icon_selected"),style:{fontSize:14},onClick:()=>{n.open({text:e==null?void 0:e.value})},children:t})})}const nd=i.jsxs("div",{children:[i.jsx("div",{children:"格式参考："}),i.jsx("div",{style:{whiteSpace:"pre-wrap",padding:"12px 0"},children:JSON.stringify({name:"tjh",age:25},null,"    ")})]});function id(e){var r,c,d;const n=((r=e==null?void 0:e.value)==null?void 0:r.type)||"default",[t,a]=E.useState(),[l,o]=E.useState("");function s(){var m;try{const f=JSON.parse(l);if(typeof f!="object"||f===null){oe.warn("只能保存对象格式数据");return}(m=e==null?void 0:e.onChange)==null||m.call(e,{...e==null?void 0:e.value,params:f}),oe.success("更新成功")}catch{oe.warn("JSON格式不正确")}}return E.useEffect(()=>{var m;o(JSON.stringify(((m=e==null?void 0:e.value)==null?void 0:m.params)||{},null,"	"))},[(c=e==null?void 0:e.value)==null?void 0:c.params]),E.useEffect(()=>{var m;a((m=e==null?void 0:e.value)==null?void 0:m.parserFunc)},[(d=e==null?void 0:e.value)==null?void 0:d.parserFunc]),i.jsxs("div",{className:It.eventOptions_main,children:[i.jsxs(ue,{style:{width:"100%"},direction:"vertical",size:2,children:[i.jsx(be,{label:"参数类型",labelSpan:3}),i.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[i.jsx(dt,{value:n,allowClear:!1,style:{width:yt},requestFn:async()=>[{label:"默认",value:"default"},{label:"json对象",value:"json"}],onChange:m=>{var f;(f=e==null?void 0:e.onChange)==null||f.call(e,{...e==null?void 0:e.value,params:m==="default"?void 0:{},type:m})}}),i.jsx(hi,{tooltip:"解析函数",value:t,onChange:m=>{var f;a(m),(f=e==null?void 0:e.onChange)==null||f.call(e,{...e==null?void 0:e.value,parserFunc:m})}})]})]}),n==="json"&&i.jsxs(ue,{style:{width:"100%"},direction:"vertical",size:2,children:[i.jsx(be,{label:"json对象",labelSpan:3,labelTip:nd,children:i.jsx(ke,{title:"更新",children:i.jsx(Fe,{onClick:s,className:"icon_clickable"})})}),i.jsx(Te,{value:l,language:"json",style:{height:380},onChange:m=>{o(m)}})]})]})}function rd(e){var o;const[n,t]=E.useState();function a(s){var r;(r=e==null?void 0:e.onChange)==null||r.call(e,{...e==null?void 0:e.value,function:s})}function l(){a(void 0),t(void 0),oe.success("重置成功")}return E.useEffect(()=>{var s;t((s=e==null?void 0:e.value)==null?void 0:s.function)},[(o=e==null?void 0:e.value)==null?void 0:o.function]),i.jsx("div",{className:It.eventOptions_main,children:i.jsxs(ue,{style:{width:"100%"},direction:"vertical",size:4,children:[i.jsx(be,{label:"函数内容",labelSpan:3,children:i.jsx("div",{style:{height:24,display:"flex",alignItems:"center",justifyContent:"space-between"},children:i.jsx(ke,{title:"重置",children:i.jsx(xa,{onClick:l,className:"icon_clickable"})})})}),i.jsx(Te,{value:n??Ha,language:"javascript",style:{height:440},onChange:s=>{a(s)}})]})})}const ad={default:void 0,number:0,text:"",json:{}};function sd(e){var d,m,f,v,h,w,g,y,x,b,j;const{onChange:n}=e,t=((d=e==null?void 0:e.value)==null?void 0:d.type)||"default",a=((m=e==null?void 0:e.value)==null?void 0:m.type)==="json",[l,o]=E.useState(),[s,r]=E.useState();function c(){var S;if(!s)return oe.warn("json不能为空");try{const A=JSON.parse(s||"");typeof A=="object"&&A&&((S=e==null?void 0:e.onChange)==null||S.call(e,{...e==null?void 0:e.value,value:A}),oe.success("设置成功"))}catch{oe.warn("json格式不正确")}}return E.useEffect(()=>{var S;o((S=e==null?void 0:e.value)==null?void 0:S.parserFunc)},[(f=e==null?void 0:e.value)==null?void 0:f.parserFunc]),E.useEffect(()=>{var S,A;((S=e==null?void 0:e.value)==null?void 0:S.type)==="json"&&r(JSON.stringify(((A=e==null?void 0:e.value)==null?void 0:A.value)||{},null,"	"))},[(v=e==null?void 0:e.value)==null?void 0:v.type,(h=e==null?void 0:e.value)==null?void 0:h.value]),i.jsxs("div",{className:It.eventOptions_main,children:[i.jsxs(ue,{direction:"vertical",size:4,style:{width:"100%"},children:[i.jsx(be,{label:"参数类型",labelSpan:3,labelTip:"json数据格式为数组或对象"}),i.jsxs(ue,{children:[i.jsx(dt,{value:t,allowClear:!1,style:{width:yt},requestFn:async()=>[{label:"默认",value:"default"},{label:"数字",value:"number"},{label:"文本值",value:"text"},{label:"json数据",value:"json"}],onChange:S=>n({...e==null?void 0:e.value,value:ad[S],type:S})}),i.jsx(hi,{tooltip:"解析函数",value:l,onChange:S=>{var A;o(S),(A=e==null?void 0:e.onChange)==null||A.call(e,{...e==null?void 0:e.value,parserFunc:S})}})]})]}),((w=e==null?void 0:e.value)==null?void 0:w.type)&&((g=e==null?void 0:e.value)==null?void 0:g.type)!=="default"&&i.jsxs(ue,{direction:"vertical",size:4,style:{width:"100%"},children:[i.jsx(be,{label:"参数值",labelSpan:3,children:a&&i.jsx(ke,{title:"更新",children:i.jsx(Fe,{onClick:c,className:"icon_clickable"})})}),i.jsxs(i.Fragment,{children:[((y=e==null?void 0:e.value)==null?void 0:y.type)==="number"&&i.jsx(on,{min:void 0,style:{width:yt*2},value:(x=e==null?void 0:e.value)==null?void 0:x.value,onChange:S=>{n({...e==null?void 0:e.value,value:S})}}),((b=e==null?void 0:e.value)==null?void 0:b.type)==="text"&&i.jsx(tr,{style:{width:yt*2},value:(j=e==null?void 0:e.value)==null?void 0:j.value,autoSize:{minRows:3,maxRows:3},onChange:S=>{n({...e==null?void 0:e.value,value:S})}}),a&&i.jsx(Te,{language:"javascript",style:{height:375},value:s,onChange:S=>{r(S)}})]})]})]})}const yt=200;function od(e){var a,l,o,s,r;const n=(a=e==null?void 0:e.value)==null?void 0:a.option;function t(c){var d;e!=null&&e.value&&((d=e==null?void 0:e.onChange)==null||d.call(e,{...e==null?void 0:e.value,option:c}))}return(l=e==null?void 0:e.value)!=null&&l.exposeId?((o=e==null?void 0:e.value)==null?void 0:o.exposeId)===Nt.visible?i.jsx(ed,{value:n,onChange:t}):((s=e==null?void 0:e.value)==null?void 0:s.exposeId)===Nt.request?i.jsx(id,{value:n,onChange:t}):((r=e==null?void 0:e.value)==null?void 0:r.exposeId)===Nt.custom?i.jsx(rd,{value:n,onChange:t}):i.jsx(sd,{value:n,onChange:t}):i.jsx(Ee,{description:"请选中目标操作"})}const ld="_targetList_17cmb_59",cd="_targetList_body_17cmb_66",dd="_targetList_item_17cmb_74",ud="_targetList_item_clickable_17cmb_82",hd="_targetList_item_selected_17cmb_89",at={targetList:ld,targetList_body:cd,targetList_item:dd,targetList_item_clickable:ud,targetList_item_selected:hd},fd="_addComponentNodeButton_xm0lb_59",md="_addComponentNodeButton_body_xm0lb_68",_d="_addComponentNodeButton_item_xm0lb_73",gd="_addComponentNodeButton_item_text_xm0lb_84",vd="_dropdown_overlay_xm0lb_93",st={addComponentNodeButton:fd,addComponentNodeButton_body:md,addComponentNodeButton_item:_d,addComponentNodeButton_item_text:gd,dropdown_overlay:vd};function yd(e){const{componentNode:n}=e;return i.jsxs(ue,{direction:"vertical",style:{fontSize:12},className:"theme-color",size:6,children:[i.jsxs("div",{children:[i.jsx("b",{children:"id"}),"：",n==null?void 0:n.id]}),i.jsxs("div",{children:[i.jsx("b",{children:"name"}),"：",n==null?void 0:n.name]}),i.jsxs("div",{children:[i.jsx("b",{children:"cName"}),"：",n==null?void 0:n.cName]}),i.jsxs("div",{children:[i.jsx("b",{children:"show"}),"：",i.jsx(Dn,{disabled:!0,size:"small",checked:(n==null?void 0:n.show)??!0})]})]})}function xd(e){var v;const{engine:n}=re(),[t,a]=E.useState(!1),[l,o]=E.useState([]),[s,r]=E.useState(""),c=E.useRef();E.useEffect(()=>{if(t){c.current&&(clearTimeout(c.current),c.current=null);let h=n.componentNode.getAll();e!=null&&e.beforeVisible&&(h=e==null?void 0:e.beforeVisible(h)),o(h),r("")}},[t]);const d=E.useMemo(()=>{var w;const h=(w=s==null?void 0:s.toLowerCase)==null?void 0:w.call(s);return l.filter(g=>{var y,x,b,j;return(j=(b=(x=(y=g==null?void 0:g.name)==null?void 0:y.toLowerCase)==null?void 0:x.call(y))==null?void 0:b.includes)==null?void 0:j.call(b,h)})},[s,l]);function m(){a(!1),c.current=setTimeout(()=>{o([]),c.current=null},300)}function f(h){var w;(w=e==null?void 0:e.onSelect)==null||w.call(e,h),m()}return i.jsx(ct,{overlayClassName:st.dropdown_overlay,menu:{items:[{key:"body",label:i.jsxs("div",{className:st.addComponentNodeButton,children:[i.jsx(Ue,{placeholder:"搜索页面组件",value:s,onChange:r}),i.jsxs("div",{className:st.addComponentNodeButton_body,children:[!(d!=null&&d.length)&&i.jsx(Ee,{}),(v=d==null?void 0:d.map)==null?void 0:v.call(d,h=>{const w=n.component.get(h==null?void 0:h.cId);return i.jsx(tn,{content:i.jsx(yd,{componentNode:h}),placement:"right",children:i.jsxs("div",{className:st.addComponentNodeButton_item,title:h==null?void 0:h.name,onClick:()=>f(h),children:[i.jsx(ut,{src:w==null?void 0:w.icon,style:{maxHeight:20,maxWidth:20}}),i.jsx("div",{className:st.addComponentNodeButton_item_text,children:h==null?void 0:h.name})]})},h==null?void 0:h.id)})]})]})}]},trigger:["click"],open:t,onOpenChange:h=>{h||m()},children:i.jsx("div",{style:{width:"100%",...e==null?void 0:e.style},children:i.jsx(Ie,{block:!0,onClick:()=>!t&&a(!0),style:{fontSize:12,color:"rgba(0,0,0,0.5)"},icon:i.jsx(an,{}),children:(e==null?void 0:e.children)||"新增组件"})})})}function bd(e){var s;const n=rn(),{engine:t}=re(),a=E.useMemo(()=>{var r,c;return(c=(r=e==null?void 0:e.targets)==null?void 0:r.map)==null?void 0:c.call(r,d=>{var m;return{value:d.id,label:(m=t.componentNode.get(d==null?void 0:d.id))==null?void 0:m.name}})},[e==null?void 0:e.targets]);function l(r){var d;const c=[...(e==null?void 0:e.targets)||[],{id:r.id,opts:[]}];(d=e==null?void 0:e.onChangeTargets)==null||d.call(e,c,"add")}function o(r){var v,h,w;let c;const d=((h=(v=e==null?void 0:e.targets)==null?void 0:v.filter)==null?void 0:h.call(v,g=>g.id===r?(c=g,!1):!0))||[],m=((w=c==null?void 0:c.opts)==null?void 0:w.length)||0;function f(){var g,y,x;(g=e==null?void 0:e.onChangeTargets)==null||g.call(e,d,"delete"),r===(e==null?void 0:e.value)&&((x=e==null?void 0:e.onChange)==null||x.call(e,(y=d==null?void 0:d[0])==null?void 0:y.id))}if(m){n({title:"提醒",content:`该组件已配置 ${m} 个事件操作，确定删除？`,onOk(g){f(),g()}});return}f()}return i.jsxs("div",{className:je(at.targetList,e==null?void 0:e.className),style:e==null?void 0:e.style,children:[i.jsx(xd,{style:{margin:-1},beforeVisible:r=>r.filter(c=>{var d,m;return!((m=(d=e==null?void 0:e.targets)==null?void 0:d.find)!=null&&m.call(d,f=>f.id===(c==null?void 0:c.id)))}),onSelect:r=>l(r),children:"新增目标组件"}),i.jsx("div",{className:at.targetList_body,children:(s=a==null?void 0:a.map)==null?void 0:s.call(a,r=>{const c=(r==null?void 0:r.value)===(e==null?void 0:e.value);return i.jsxs("div",{className:je(at.targetList_item,c&&at.targetList_item_selected),onClick:()=>{var d;return(d=e==null?void 0:e.onChange)==null?void 0:d.call(e,r==null?void 0:r.value)},children:[r==null?void 0:r.label,i.jsx(Je,{className:at.targetList_item_clickable,onClick:d=>{o(r==null?void 0:r.value),d.stopPropagation()}})]},r==null?void 0:r.value)})}),!(a!=null&&a.length)&&i.jsx(Ee,{})]})}const wd="_targetList_17cmb_59",kd="_targetList_body_17cmb_66",jd="_targetList_item_17cmb_74",Cd="_targetList_item_clickable_17cmb_82",Sd="_targetList_item_selected_17cmb_89",ot={targetList:wd,targetList_body:kd,targetList_item:jd,targetList_item_clickable:Cd,targetList_item_selected:Sd},Id="_addExposesButton_1t3fz_59",Ed="_addExposesButton_body_1t3fz_68",Ad="_addExposesButton_item_1t3fz_73",zd="_addExposesButton_item_text_1t3fz_84",vt={addExposesButton:Id,addExposesButton_body:Ed,addExposesButton_item:Ad,addExposesButton_item_text:zd};function Nd(e){var f;const{engine:n}=re(),[t,a]=E.useState(!1),[l,o]=E.useState([]),[s,r]=E.useState(""),c=E.useRef(),d=E.useMemo(()=>{var h;const v=(h=s==null?void 0:s.toLowerCase)==null?void 0:h.call(s);return l.filter(w=>{var g,y,x,b;return(b=(x=(y=(g=w==null?void 0:w.label)==null?void 0:g.toLowerCase)==null?void 0:y.call(g))==null?void 0:x.includes)==null?void 0:b.call(x,v)})},[s,l]);function m(){a(!1)}return E.useEffect(()=>{var v;if(t){c.current&&(clearTimeout(c.current),c.current=null);let h=[];if(e!=null&&e.cId){const w=n.component.get(e==null?void 0:e.cId);h=(v=(w==null?void 0:w.exposes)||[])==null?void 0:v.reduce((g,y)=>(g.push({label:y.label,value:y.value}),g),[...Vi])}e!=null&&e.beforeVisible&&(h=e==null?void 0:e.beforeVisible(h)),o(h),r("")}},[t]),i.jsx(er,{visible:t,onClose:m,overlayChildren:i.jsxs("div",{className:vt.addExposesButton,children:[i.jsx(Ue,{placeholder:"搜索组件操作",value:s,onChange:r}),i.jsxs("div",{className:vt.addExposesButton_body,children:[!(d!=null&&d.length)&&i.jsx(Ee,{}),(f=d==null?void 0:d.map)==null?void 0:f.call(d,v=>i.jsx("div",{className:vt.addExposesButton_item,title:v==null?void 0:v.label,onClick:()=>{var h;(h=e==null?void 0:e.onSelect)==null||h.call(e,v),m()},children:i.jsx("div",{className:vt.addExposesButton_item_text,children:v==null?void 0:v.label})},v==null?void 0:v.value))]})]}),children:i.jsx("div",{style:{width:"100%",...e==null?void 0:e.style},onClick:()=>a(!0),children:i.jsx(Ie,{block:!0,onClick:()=>m(),style:{fontSize:12,color:"rgba(0,0,0,0.5)"},icon:i.jsx(an,{}),children:(e==null?void 0:e.children)||"新增操作"})})})}function Od(e){var s;const{engine:n}=re(),t=E.useMemo(()=>{var c,d;const r=n.component.get(e==null?void 0:e.cId);return{...Zi,...(d=(c=r==null?void 0:r.exposes)==null?void 0:c.reduce)==null?void 0:d.call(c,(m,f)=>(m[f.value]=f.label,m),{})}},[e==null?void 0:e.cId]),a=E.useMemo(()=>{var r,c;return(c=(r=e==null?void 0:e.opts)==null?void 0:r.map)==null?void 0:c.call(r,d=>({value:d.operateId,label:t[d.exposeId]||"-"}))},[e==null?void 0:e.opts,t]);function l(r){var d;const c=[...(e==null?void 0:e.opts)||[],{operateId:nn(),exposeId:r.value,option:{}}];(d=e==null?void 0:e.onChangeOpts)==null||d.call(e,c)}function o(r){var d,m,f,v,h;const c=((m=(d=e==null?void 0:e.opts)==null?void 0:d.filter)==null?void 0:m.call(d,w=>w.operateId!==r))||[];(f=e==null?void 0:e.onChangeOpts)==null||f.call(e,c),r===(e==null?void 0:e.value)&&((h=e==null?void 0:e.onChange)==null||h.call(e,(v=c==null?void 0:c[0])==null?void 0:v.operateId))}return i.jsxs("div",{className:je(ot.targetList,e==null?void 0:e.className),style:e==null?void 0:e.style,children:[i.jsx(Nd,{style:{margin:-1},cId:e==null?void 0:e.cId,onSelect:r=>l(r),children:"新增操作"}),i.jsxs("div",{className:ot.targetList_body,children:[!(a!=null&&a.length)&&i.jsx(Ee,{}),(s=a==null?void 0:a.map)==null?void 0:s.call(a,r=>{const c=(r==null?void 0:r.value)===(e==null?void 0:e.value);return i.jsxs("div",{className:je(ot.targetList_item,c&&ot.targetList_item_selected),onClick:()=>{var d;return(d=e==null?void 0:e.onChange)==null?void 0:d.call(e,r==null?void 0:r.value)},children:[r==null?void 0:r.label,i.jsx(Je,{className:ot.targetList_item_clickable,onClick:d=>{o(r==null?void 0:r.value),d.stopPropagation()}})]},r==null?void 0:r.value)})]})]})}const Rd=Xe(e=>{const{engine:n}=re(),{componentNode:t,triggerId:a,triggerName:l}=(e==null?void 0:e.params)||{},[o,s]=E.useState(),[r,c]=E.useState(),[d,m]=E.useState(),f=E.useMemo(()=>{var b;return(b=n.componentNode.get(r==null?void 0:r.id))==null?void 0:b.cId},[r]);function v(b){var S,A,T;const j=(A=(S=o==null?void 0:o.targets)==null?void 0:S.find)==null?void 0:A.call(S,B=>B.id===b);c(j),m((T=j==null?void 0:j.opts)==null?void 0:T[0])}function h(b){var j,S;m((S=(j=r==null?void 0:r.opts)==null?void 0:j.find)==null?void 0:S.call(j,A=>(A==null?void 0:A.operateId)===b))}function w(b,j){s({...o,targets:b}),j&&b.length===1&&c(b[b.length-1])}function g(b){var j,S;(S=(j=o==null?void 0:o.targets)==null?void 0:j.find)==null||S.call(j,A=>A.id!==(r==null?void 0:r.id)?!1:(A.opts=b,!0)),s({...o}),b.length===1&&m(b==null?void 0:b[0])}function y(b){var j,S;(S=(j=o==null?void 0:o.targets)==null?void 0:j.find)==null||S.call(j,A=>{var T,B;return A.id!==(r==null?void 0:r.id)?!1:((B=(T=A.opts)==null?void 0:T.find)==null||B.call(T,$=>($==null?void 0:$.operateId)!==(b==null?void 0:b.operateId)?!1:(Object.assign($,b),!0)),!0)}),s({...o})}function x(){var b;(b=e==null?void 0:e.onOk)==null||b.call(e,o)}return E.useEffect(()=>{var b,j,S,A;if(e!=null&&e.visible){if(!a){oe.error("triggerId不存在");return}let T=(j=(b=t==null?void 0:t.events)==null?void 0:b.find)==null?void 0:j.call(b,D=>(D==null?void 0:D.triggerId)===a);T=Hn(T||{}),s(T);const B=(S=T==null?void 0:T.targets)==null?void 0:S[0];c(B);const $=(A=B==null?void 0:B.opts)==null?void 0:A[0];m($)}else s(void 0),c(void 0),m(void 0)},[e==null?void 0:e.visible]),i.jsxs(qe,{centered:!0,width:850,okText:"保存",cancelText:"取消",open:e==null?void 0:e.visible,className:Ht.editEventDialog,title:`${l||"-"}`,bodyStyle:{height:500,display:"flex",padding:16,userSelect:"none"},afterClose:e==null?void 0:e.afterClose,onCancel:e==null?void 0:e.onCancel,onOk:x,children:[i.jsxs("div",{className:Ht.editEventDialog_menu,children:[i.jsx(bd,{className:"border-right",value:r==null?void 0:r.id,onChange:b=>{v(b)},targets:o==null?void 0:o.targets,onChangeTargets:(b,j)=>{w(b,j==="add")}}),i.jsx(Od,{value:d==null?void 0:d.operateId,onChange:b=>{h(b)},cId:f,opts:r==null?void 0:r.opts,onChangeOpts:b=>{g(b)}})]}),i.jsx("div",{className:Ht.editEventDialog_body,children:i.jsx(od,{value:d,onChange:b=>{y(b)}})})]})});function Bd(e){var m;const{engine:n}=re(),{componentNode:t}=e,a=E.useMemo(()=>n.component.get(t==null?void 0:t.cId),[t]),l=rn(),o=Rd({onOk(f){n.componentNode.update(t==null?void 0:t.id,v=>{var h,w;return(w=(h=v==null?void 0:v.events)==null?void 0:h.find)==null||w.call(h,g=>g.triggerId!==(f==null?void 0:f.triggerId)?!1:(Object.assign(g,f),!0)),{events:v==null?void 0:v.events}})}}),s=E.useMemo(()=>{var f;return((f=t==null?void 0:t.events)==null?void 0:f.map(v=>{var w,g;const h=(g=(w=a==null?void 0:a.triggers)==null?void 0:w.find)==null?void 0:g.call(w,y=>(y==null?void 0:y.value)===v.triggerId);return{label:`${(h==null?void 0:h.label)||"-"}`,value:`${v.triggerId}`}}))||[]},[t,a]);function r(f){if(!(f!=null&&f.value)){oe.warn("triggerId不存在");return}o.open({componentNode:t,triggerId:f==null?void 0:f.value,triggerName:f==null?void 0:f.label})}function c(f){n.componentNode.update(t==null?void 0:t.id,v=>{var h,w;return{events:[...((w=(h=v==null?void 0:v.events)==null?void 0:h.filter)==null?void 0:w.call(h,g=>g.triggerId!==f))||[]]}})}function d(f){var h,w,g,y;if(!f){oe.warn("triggerId不存在");return}const v=(w=(h=t==null?void 0:t.events)==null?void 0:h.find)==null?void 0:w.call(h,x=>(x==null?void 0:x.triggerId)===f);(g=v==null?void 0:v.targets)!=null&&g.length?l({title:"提醒",content:`已配置${((y=v==null?void 0:v.targets)==null?void 0:y.length)||0}个事件项，确定删除该事件？`,onOk(x){c(f),x()}}):c(f)}return i.jsxs("div",{className:De.eventList,children:[i.jsx("div",{className:De.eventList_head,children:"绑定事件："}),i.jsxs("div",{className:De.eventList_body,children:[!(s!=null&&s.length)&&i.jsx(Ee,{}),(m=s==null?void 0:s.map)==null?void 0:m.call(s,f=>i.jsxs("div",{className:De.eventList_item,children:[i.jsx("div",{className:De.eventList_item_body,children:f.label}),i.jsxs("div",{className:De.eventList_item_opt,children:[i.jsx(Xn,{className:De.eventList_item_opt_clickable,onClick:()=>r(f)}),i.jsx(Je,{className:De.eventList_item_opt_clickable,onClick:()=>d(f==null?void 0:f.value)})]})]},f.value))]})]})}function Ld(){const{engine:e}=re(),{componentNode:n}=Qe();return i.jsx(kt,{labelSpan:5,children:i.jsxs("div",{className:$c.interactive,children:[i.jsx(pc,{componentNode:n,onSelect:t=>{e.componentNode.update(n==null?void 0:n.id,a=>({events:[...(a==null?void 0:a.events)||[],{triggerId:t,targets:[]}]}))}}),i.jsx(Bd,{componentNode:n})]})})}const Dd="_json_1lpul_59",Td="_json_head_1lpul_69",Md="_json_body_1lpul_76",Wt={json:Dd,json_head:Td,json_body:Md};function Pd(){const{engine:e}=re(),{componentNode:n}=Qe(),[t]=_e.useForm();function a(){t.setFieldsValue({code:n?JSON.stringify(n||{},null,"	"):""})}function l(){const o=t.getFieldValue("code")||"";try{const s=JSON.parse(o);if(!Xi(s)){console.error("must be an object.");return}e.componentNode.update(n==null?void 0:n.id,s,{cover:!0}),oe.success("修改成功")}catch(s){console.error(s),oe.error("json格式不正确")}}return E.useEffect(()=>{a()},[n]),i.jsxs(_e,{className:Wt.json,form:t,children:[i.jsxs("div",{className:Wt.json_head,children:[i.jsxs("span",{children:[i.jsx("b",{style:{marginRight:8},children:"ComponentNode数据"}),i.jsx(ke,{title:"重置",children:i.jsx(Pe,{className:"icon_clickable",onClick:a})})]}),i.jsx(ke,{title:"保存",placement:"top",children:i.jsx(Fe,{className:"icon_clickable",onClick:l})})]}),i.jsx("div",{className:Wt.json_body,children:i.jsx(_e.Item,{noStyle:!0,name:"code",children:i.jsx(Te,{language:"json",minimap:!1,style:{height:"100%",width:"100%"},options:{fontSize:11,tabSize:3}})})})]})}const Fd="_singleAttributes_109pm_59",Ud={singleAttributes:Fd},fi=E.createContext({}),Qe=()=>E.useContext(fi);function mi(e){const[n,t]=Ye(),{engine:a}=re(),{instance:l}=e,[o,s]=E.useState(),r=Zn(l);return E.useEffect(()=>{const c=a.componentNode.get(l.id);return c&&s(c),a.componentNode.onChange(l.id,({payload:d})=>{s({...d})})},[l.id]),E.useEffect(()=>a.onJsonChange(()=>{var c;s(a.componentNode.get((c=r==null?void 0:r.current)==null?void 0:c.id))}),[]),E.useMemo(()=>o?i.jsx(fi.Provider,{value:{instance:l,componentNode:o},children:i.jsx(Fi,{className:Ud.singleAttributes,defaultActiveKey:"1",size:"small",items:[{key:"1",label:n("attributes.attr.title"),children:i.jsx(zc,{})},{key:"2",label:n("attributes.dataSource.title"),children:i.jsx(Fc,{})},{key:"3",label:n("attributes.interactive.title"),children:i.jsx(Ld,{})},{key:"4",label:"json",children:i.jsx(Pd,{})}]})}):i.jsx(vn,{image:vn.PRESENTED_IMAGE_SIMPLE,description:"暂无数据"}),[l,o,t.language])}const $d="_multipleInstanceAttributes_1ehj2_59",pd="_multipleInstanceAttributes_header_1ehj2_66",Hd="_multipleInstanceAttributes_body_1ehj2_70",Vt={multipleInstanceAttributes:$d,multipleInstanceAttributes_header:pd,multipleInstanceAttributes_body:Hd};function Wd(e){const n=dn();return i.jsx(dt,{...e,effectParams:[n],requestFn:async()=>{var t;return((t=n==null?void 0:n.map)==null?void 0:t.call(n,a=>({label:a.getComponentNode().name,value:a.id})))||[]}})}function Vd(e){const{instances:n}=e,[t,a]=E.useState();return E.useEffect(()=>{a(n[0])},[n]),i.jsxs("div",{className:Vt.multipleInstanceAttributes,children:[i.jsx("div",{className:Vt.multipleInstanceAttributes_header,children:i.jsx(Wd,{allowClear:!1,style:{width:"100%"},value:t==null?void 0:t.id,onChange:l=>{a(n.find(o=>o.id===l))}})}),i.jsx("div",{className:Vt.multipleInstanceAttributes_body,children:t&&i.jsx(mi,{instance:t})})]})}const Zd="_pageAttributes_u2l2i_59",Kd="_pageAttributes_description_u2l2i_65",Gd="_pageAttributes_body_u2l2i_70",Zt={pageAttributes:Zd,pageAttributes_description:Kd,pageAttributes_body:Gd};function qd(){const{engine:e}=re(),[n]=Ye(),t=Qi(),{id:a,options:l}=t||{};function o(s){e.page.update(a,{options:{...l,...s}})}return i.jsxs("div",{className:Zt.pageAttributes,children:[i.jsx("div",{className:Zt.pageAttributes_description,children:i.jsxs(Kt,{children:[i.jsx(Se,{span:24,style:{marginBottom:6},children:i.jsx("b",{children:t==null?void 0:t.name})}),i.jsx(Se,{span:24,children:i.jsxs("span",{children:["id：",(t==null?void 0:t.id)||"-"]})}),i.jsx(Se,{span:24,children:i.jsxs("span",{children:["parentId：",(t==null?void 0:t.parentId)||"-"]})})]})}),i.jsx("div",{className:Zt.pageAttributes_body,children:i.jsxs(kt,{labelSpan:5,children:[i.jsxs(be,{label:"页面背景",labelTip:"设置当前页背景颜色",childrenStyle:{display:"flex",alignItems:"center",gap:8},children:[i.jsx(Ot,{style:{flex:1},value:l==null?void 0:l.background,onChange:s=>{o({background:s})}}),i.jsx(ke,{title:n("reset"),children:i.jsx(Pe,{className:"icon_clickable",onClick:()=>{o({background:"white"})}})})]}),i.jsxs(be,{label:"白板背景",labelTip:"页面所处白板的背景颜色",childrenStyle:{display:"flex",alignItems:"center",gap:8},children:[i.jsx(Ot,{style:{flex:1},value:l==null?void 0:l.whiteBoardColor,onChange:s=>{o({whiteBoardColor:s})}}),i.jsx(ke,{title:n("reset"),children:i.jsx(Pe,{className:"icon_clickable",onClick:()=>{o({whiteBoardColor:"white"})}})})]}),i.jsxs(be,{label:"边框",childrenStyle:{display:"flex",alignItems:"center",gap:8},labelTip:"设置当前页边框",children:[i.jsx(xt,{checked:l==null?void 0:l.bordered,onChange:s=>{o({bordered:s.target.checked})}}),(l==null?void 0:l.bordered)&&i.jsxs(i.Fragment,{children:[i.jsx(Ot,{style:{flex:1},value:l==null?void 0:l.borderColor,onChange:s=>{o({borderColor:s})}}),i.jsx(ke,{title:n("reset"),children:i.jsx(Pe,{className:"icon_clickable",onClick:()=>{o({borderColor:"white"})}})})]})]})]})})]})}function Jd(){const e=dn(),n=E.useMemo(()=>!!e.length,[e]),t=E.useMemo(()=>e.length===1,[e]);return i.jsx("div",{className:bc.attributes,children:n?i.jsxs(i.Fragment,{children:[t&&i.jsx(mi,{instance:e[0]}),!t&&i.jsx(Vd,{instances:e})]}):i.jsx(qd,{})})}function gu(e){const{engine:n,json:t,pageFooter:a}=e;return ls(),Ln.useEffect(()=>{n.loadJSON(t).then(()=>{var l;(l=e==null?void 0:e.onJSONLoad)==null||l.call(e)})},[]),i.jsxs("div",{className:pe.page,children:[i.jsx("div",{className:pe.page_header,children:i.jsx(Ts,{pageLogo:e==null?void 0:e.pageLogo})}),i.jsxs("div",{className:pe.page_body,children:[i.jsx("div",{className:pe.page_body_left,id:"rbs-menu",children:i.jsx(Sl,{})}),i.jsx("div",{className:pe.page_body_main,id:"rbs-editor",children:i.jsx(yc,{})}),i.jsx("div",{className:pe.page_body_right,id:"rbs-attributes",children:i.jsx(Jd,{})})]}),a?i.jsx(a,{}):i.jsx(i.Fragment,{})]})}export{gu as default};
