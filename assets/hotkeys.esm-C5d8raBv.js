import{b as z,D as H}from"./index-ucXmJ9nZ.js";import"./react-vendor-C7qxa2PD.js";import"./index-CM8xp5W3.js";function ne(){return z(e=>{var t;return((t=e==null?void 0:e.config)==null?void 0:t.currentPageId)||H.id})}const A=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function P(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on".concat(t),i)}function E(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on".concat(t),i)}function D(e,t){const i=t.slice(0,t.length-1);for(let n=0;n<i.length;n++)i[n]=e[i[n].toLowerCase()];return i}function G(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");const t=e.split(",");let i=t.lastIndexOf("");for(;i>=0;)t[i-1]+=",",t.splice(i,1),i=t.lastIndexOf("");return t}function R(e,t){const i=e.length>=t.length?e:t,n=e.length>=t.length?t:e;let s=!0;for(let r=0;r<i.length;r++)n.indexOf(i[r])===-1&&(s=!1);return s}const _={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":A?173:189,"=":A?61:187,";":A?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220},y={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,meta:91,command:91},b={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},a={16:!1,18:!1,17:!1,91:!1},c={};for(let e=1;e<20;e++)_["f".concat(e)]=111+e;let f=[],L=null,I="all";const w=new Map,O=e=>_[e.toLowerCase()]||y[e.toLowerCase()]||e.toUpperCase().charCodeAt(0),V=e=>Object.keys(_).find(t=>_[t]===e),X=e=>Object.keys(y).find(t=>y[t]===e);function B(e){I=e||"all"}function x(){return I||"all"}function q(){return f.slice(0)}function J(){return f.map(e=>V(e)||X(e)||String.fromCharCode(e))}function Q(){const e=[];return Object.keys(c).forEach(t=>{c[t].forEach(i=>{let{key:n,scope:s,mods:r,shortcut:l}=i;e.push({scope:s,shortcut:l,mods:r,keys:n.split("+").map(o=>O(o))})})}),e}function W(e){const t=e.target||e.srcElement,{tagName:i}=t;let n=!0;const s=i==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(s||i==="TEXTAREA"||i==="SELECT")&&!t.readOnly)&&(n=!1),n}function Y(e){return typeof e=="string"&&(e=O(e)),f.indexOf(e)!==-1}function Z(e,t){let i,n;e||(e=x());for(const s in c)if(Object.prototype.hasOwnProperty.call(c,s))for(i=c[s],n=0;n<i.length;)i[n].scope===e?i.splice(n,1).forEach(l=>{let{element:o}=l;return S(o)}):n++;x()===e&&B(t||"all")}function $(e){let t=e.keyCode||e.which||e.charCode;e.key&&e.key.toLowerCase()==="capslock"&&(t=O(e.key));const i=f.indexOf(t);if(i>=0&&f.splice(i,1),e.key&&e.key.toLowerCase()==="meta"&&f.splice(0,f.length),(t===93||t===224)&&(t=91),t in a){a[t]=!1;for(const n in y)y[n]===t&&(k[n]=!1)}}function F(e){if(typeof e>"u")Object.keys(c).forEach(s=>{Array.isArray(c[s])&&c[s].forEach(r=>C(r)),delete c[s]}),S(null);else if(Array.isArray(e))e.forEach(s=>{s.key&&C(s)});else if(typeof e=="object")e.key&&C(e);else if(typeof e=="string"){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let[s,r]=i;typeof s=="function"&&(r=s,s=""),C({key:e,scope:s,method:r,splitKey:"+"})}}const C=e=>{let{key:t,scope:i,method:n,splitKey:s="+"}=e;G(t).forEach(l=>{const o=l.split(s),u=o.length,h=o[u-1],g=h==="*"?"*":O(h);if(!c[g])return;i||(i=x());const p=u>1?D(y,o):[],m=[];c[g]=c[g].filter(d=>{const K=(n?d.method===n:!0)&&d.scope===i&&R(d.mods,p);return K&&m.push(d.element),!K}),m.forEach(d=>S(d))})};function T(e,t,i,n){if(t.element!==n)return;let s;if(t.scope===i||t.scope==="all"){s=t.mods.length>0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(!a[r]&&t.mods.indexOf(+r)>-1||a[r]&&t.mods.indexOf(+r)===-1)&&(s=!1);(t.mods.length===0&&!a[16]&&!a[18]&&!a[17]&&!a[91]||s||t.shortcut==="*")&&(t.keys=[],t.keys=t.keys.concat(f),t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function U(e,t){const i=c["*"];let n=e.keyCode||e.which||e.charCode;if(e.key&&e.key.toLowerCase()==="capslock"||!k.filter.call(this,e))return;if((n===93||n===224)&&(n=91),f.indexOf(n)===-1&&n!==229&&f.push(n),["metaKey","ctrlKey","altKey","shiftKey"].forEach(o=>{const u=b[o];e[o]&&f.indexOf(u)===-1?f.push(u):!e[o]&&f.indexOf(u)>-1?f.splice(f.indexOf(u),1):o==="metaKey"&&e[o]&&(f=f.filter(h=>h in b||h===n))}),n in a){a[n]=!0;for(const o in y)if(Object.prototype.hasOwnProperty.call(y,o)){const u=b[y[o]];k[o]=e[u]}if(!i)return}for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&(a[o]=e[b[o]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(f.indexOf(17)===-1&&f.push(17),f.indexOf(18)===-1&&f.push(18),a[17]=!0,a[18]=!0);const s=x();if(i)for(let o=0;o<i.length;o++)i[o].scope===s&&(e.type==="keydown"&&i[o].keydown||e.type==="keyup"&&i[o].keyup)&&T(e,i[o],s,t);if(!(n in c))return;const r=c[n],l=r.length;for(let o=0;o<l;o++)if((e.type==="keydown"&&r[o].keydown||e.type==="keyup"&&r[o].keyup)&&r[o].key){const u=r[o],{splitKey:h}=u,g=u.key.split(h),p=[];for(let m=0;m<g.length;m++)p.push(O(g[m]));p.sort().join("")===f.sort().join("")&&T(e,u,s,t)}}function k(e,t,i){f=[];const n=G(e);let s=[],r="all",l=document,o=0,u=!1,h=!0,g="+",p=!1,m=!1;for(i===void 0&&typeof t=="function"&&(i=t),Object.prototype.toString.call(t)==="[object Object]"&&(t.scope&&(r=t.scope),t.element&&(l=t.element),t.keyup&&(u=t.keyup),t.keydown!==void 0&&(h=t.keydown),t.capture!==void 0&&(p=t.capture),typeof t.splitKey=="string"&&(g=t.splitKey),t.single===!0&&(m=!0)),typeof t=="string"&&(r=t),m&&F(e,r);o<n.length;o++)e=n[o].split(g),s=[],e.length>1&&(s=D(y,e)),e=e[e.length-1],e=e==="*"?"*":O(e),e in c||(c[e]=[]),c[e].push({keyup:u,keydown:h,scope:r,mods:s,shortcut:n[o],method:i,key:n[o],splitKey:g,element:l});if(typeof l<"u"&&window){if(!w.has(l)){const d=function(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return U(K,l)},M=function(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;U(K,l),$(K)};w.set(l,{keydownListener:d,keyupListenr:M,capture:p}),P(l,"keydown",d,p),P(l,"keyup",M,p)}if(!L){const d=()=>{f=[]};L={listener:d,capture:p},P(window,"focus",d,p)}}}function N(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(c).forEach(i=>{c[i].filter(s=>s.scope===t&&s.shortcut===e).forEach(s=>{s&&s.method&&s.method()})})}function S(e){const t=Object.values(c).flat();if(t.findIndex(n=>{let{element:s}=n;return s===e})<0){const{keydownListener:n,keyupListenr:s,capture:r}=w.get(e)||{};n&&s&&(E(e,"keyup",s,r),E(e,"keydown",n,r),w.delete(e))}if((t.length<=0||w.size<=0)&&(Object.keys(w).forEach(s=>{const{keydownListener:r,keyupListenr:l,capture:o}=w.get(s)||{};r&&l&&(E(s,"keyup",l,o),E(s,"keydown",r,o),w.delete(s))}),w.clear(),Object.keys(c).forEach(s=>delete c[s]),L)){const{listener:s,capture:r}=L;E(window,"focus",s,r),L=null}}const j={getPressedKeyString:J,setScope:B,getScope:x,deleteScope:Z,getPressedKeyCodes:q,getAllKeyCodes:Q,isPressed:Y,filter:W,trigger:N,unbind:F,keyMap:_,modifier:y,modifierMap:b};for(const e in j)Object.prototype.hasOwnProperty.call(j,e)&&(k[e]=j[e]);if(typeof window<"u"){const e=window.hotkeys;k.noConflict=t=>(t&&window.hotkeys===k&&(window.hotkeys=e),k),window.hotkeys=k}export{k as h,ne as u};
