import{j as o}from"./index-CM8xp5W3.js";import{r as b}from"./react-vendor-C7qxa2PD.js";import{o as J,u as V}from"./ahooks-CSAi6c6A.js";import{u as Q}from"./useEffectOnce-BgFV88FQ.js";import{n as X}from"./index-ucXmJ9nZ.js";import{al as C}from"./antd-DPo7ARJh.js";const Y=(e,n)=>{var r,f,d;return(d=(r=(n==null?void 0:n.children)||"")==null?void 0:r.toLowerCase)==null?void 0:d.call(r).includes((f=e==null?void 0:e.toLowerCase)==null?void 0:f.call(e))};function $(e){const{allowClear:n=!0,size:r="small",defaultFirst:f,disabled:d,all:s,allName:z="全部",value:v=void 0,placeholder:B="请选择",style:K={},debounceTime:N=500,showSearch:j=!0,isLocalSearch:M=!0,effectParams:U=[],filterOption:S=void 0,requestFn:m=()=>Promise.resolve([]),onChange:l}=e,i={label:z,value:""},[O,W]=b.useState(""),[w,P]=b.useState([]),[_,E]=b.useState(void 0),[A,I]=b.useState({}),[q,g,G]=X(!1);function R(t="",u){m==null||m(t).then((a=[])=>{var L,T,D,F;const c={};a.forEach(h=>{c[`${h==null?void 0:h.value}`]=h}),I(c),P(a),!G.current&&f&&(l==null||l((L=a==null?void 0:a[0])==null?void 0:L.value,(T=a==null?void 0:a[0])==null?void 0:T.label,c),g(!0)),u&&e!=null&&e.effectDefaultFirst&&(l==null||l((D=a==null?void 0:a[0])==null?void 0:D.value,(F=a==null?void 0:a[0])==null?void 0:F.label,c))})}J(()=>{var t;(t=m==null?void 0:m(O))==null||t.then((u=[])=>{const a={};u.forEach(c=>{a[`${c==null?void 0:c.value}`]=c}),I(a),P(u)})},[O],{wait:N});function H(t,u){return S==null?void 0:S(t,u,A)}return Q(()=>{v!==void 0&&E(v),R("")}),V(()=>{E(v)},[v]),V(()=>{R("",!0)},U),o.jsxs(C,{size:r,allowClear:n,disabled:d,style:K,value:_,placeholder:B,showSearch:j,filterOption:j&&M?S?H:Y:!1,onBlur:()=>{e!=null&&e.isLocalSearch||R("")},onSearch:j&&!M?t=>W(t):void 0,onChange:(t,u)=>{const a=Array.isArray(u)?u.map(c=>c.children):u==null?void 0:u.children;l==null||l(t,a,A),v===void 0&&E(t)},...e==null?void 0:e.extAntdProps,children:[s&&o.jsx(C.Option,{value:i.value,children:e!=null&&e.optionRender?e.optionRender(i):i==null?void 0:i.label},i.value),w==null?void 0:w.map(t=>o.jsx(C.Option,{value:t.value,children:e!=null&&e.optionRender?e.optionRender(t):t==null?void 0:t.label},t.value))]})}function Z(e){const{value:n,onChange:r,extAntdProps:f,...d}=e;return o.jsx($,{...d,value:n,onChange:r,extAntdProps:{mode:"multiple",maxTagCount:(e==null?void 0:e.maxTagCount)??1,...f}})}function te(e){const n=e!=null&&e.multiple?Z:$;return o.jsx(n,{...e})}export{te as I};
