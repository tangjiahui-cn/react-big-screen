# 大屏架构设计 - 总纲

  大屏就是将一个个组件拖拽到页面上，然后放置到合适的位置，然后展示出来。关键点是每个组件的位置、大小，以及组件之间如何通信的。通过引用远程组件的方式，来管理注册资产。
## 一、核心思想

json初始化、或component 创建 componentNode，componentNode 渲染时创建 instance。

- component: 组件模板。
- componentNode: 组件数据实例。
- instance: 组件运行时行为实例。
- 实例：componentNode + instance。

## 二、核心 API

- engine.component.xxx()：管理组件模板。
- engine.componentNode.xxx()：管理数据实例。
- engine.instance.xxx()：管理运行时行为实例。
- engine.config.xxx(): 管理运行中的全局配置项。
- engine.setJSON(json)：初始化JSON数据。
- engine.getJSON()：获取JSON数据。

## 三、额外功能

- 国际化
- 主题色
- UI布局

## 四、关键步骤

- ✨ 创建实例（拖拽到面板位置创建）
- ✨ 选中组件（单击选中、范围画框选中、取消选中）。
- ✨ 拖拽组件（修改大小、旋转、位置）。
- ✨ 拖拽到容器组件。
- ✨ 复制、删除。
- ✨ 锁定、解锁
- ✨ 成组、取消成组、复杂嵌套成组。
- ✨ 撤销步骤、取消撤销步骤。
- ✨ 预览渲染器（autofit.js）

## 六、流程

- 初始化：读取json。（远程服务器/本地/上传json文件）
- 设计页面：修改json。(修改 componentData)
- 存储：获取json。（保存/下载/存储到远程服务器）

## 七、性能优化
核心是减少全量更新、全量查询。
- 预读取 used 组件列表。
- 实例修改避免全量更新。
